function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function _inherits(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function _inherits(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function _inherits(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var k10=k10||{},_get,_createClass,tkSocialChecker;k10.className=k10.className||{oldSubByo:"k10-sub-byo",oldHiddenBySubByo:"k10-hidden_by-sub-byo",lBody:"k10-l-body",lBodyHidden:"k10-l-body_hidden",bodyDietaryInfo:"k10-body__dietary-info",content:"k10-content",contentWrapper:"k10-content-wrapper",contentWrapperOverlay:"k10-content-wrapper__overlay",contentWrapperOverlayHidden:"k10-content-wrapper__overlay_hidden",wrapper:"k10-wrapper",wrapperOverlay:"k10-wrapper__overlay",wrapperOverlayHidden:"k10-wrapper__overlay_hidden",menus:"k10-menus",menusWrapper:"k10-menus__wrapper",hiddenMenus:"k10-hidden-menus",disclaimer:"k10-disclaimer",disclaimerHidden:"k10-disclaimer_hidden",disclaimerModalDrop:"k10-disclaimer__modal-drop",disclaimerModalDropHidden:"k10-disclaimer__modal-drop_hidden",disclaimerTitleAgree:"k10-disclaimer__title_agree",disclaimerContentAgree:"k10-disclaimer__content_agree",disclaimerButtonYes:"k10-disclaimer__button_yes",disclaimerInline:"k10-disclaimer_inline",toolbarMenuSelector:"k10-toolbar__menu-selector",menuSelector:"k10-menu-selector",menuSelectorOpen:"k10-menu-selector_open",menuSelectorOptions:"k10-menu-selector__options",menuSelectorOptionsOpened:"k10-menu-selector__options_opened",menuSelectorName:"k10-menu-selector__name",menuSelectorNameOpened:"k10-menu-selector__name_opened",menuSelectorNameWrapper:"k10-menu-selector__name-wrapper",menuSelectorOption:"k10-menu-selector__option",menuSelectorOptionCurrent:"k10-menu-selector__option_current",menuSelectorOptionName:"k10-menu-selector__option-name",menuSelectorOptionNameActive:"k10-menu-selector__option-name_active",menuSelectorPanel:"k10-menu-selector__panel",menuSelectorArrow:"k10-menu-selector__arrow",menuSelectorArrowHidden:"k10-menu-selector__arrow_hidden",menuSelectorArrowLeft:"k10-menu-selector__arrow_left",menuSelectorWrapper:"k10-menu-selector__wrapper",menuSelectorOptionsArrow:"k10-menu-selector__options-arrow",course:"k10-course",courseHidden:"k10-course_hidden",courseCollapsed:"k10-course_collapsed",courseNameWrapper:"k10-course__name-wrapper",courseName:"k10-course__name",courseNameHidden:"k10-course__name_hidden",courseBody:"k10-course__body",courseBodyHidden:"k10-course__body_hidden",toolbarMenuSectionSelector:"k10-toolbar__menu-section-selector",toolbarMenuSectionSelectorOpened:"k10-toolbar__menu-section-selector_opened",menuSectionSelector:"k10-menu-section-selector",menuSectionSelectorName:"k10-menu-section-selector__name",menuSectionSelectorPanel:"k10-menu-section-selector__panel",menuSectionSelectorPanelOpened:"k10-menu-section-selector__panel_opened",menuSectionSelectorOptionsOpened:"k10-menu-section-selector__options_opened",menuSectionSelectorOptions:"k10-menu-section-selector__options",menuSectionSelectorOptionsL2:"k10-menu-section-selector__options_l2",menuSectionSelectorOption:"k10-menu-section-selector__options-li",menuSectionSelectorOptionL1:"k10-menu-section-selector__options-li_l1",menuSectionSelectorOptionL2:"k10-menu-section-selector__options-li_l2",menuSectionSelectorOptionHidden:"k10-menu-section-selector__options-li_hidden",menuSectionSelectorOptionCurrent:"k10-menu-section-selector__options-li_current-menu-section",menuSectionSelectorArrow:"k10-menu-section-selector__arrow",menuSectionSelectorArrowHidden:"k10-menu-section-selector__arrow_hidden",menuSectionSelectorArrowLeft:"k10-menu-section-selector__arrow_left",menuSectionSelectorWrapper:"k10-menu-section-selector__wrapper",menuSectionSelectorWrapperL2:"k10-menu-section-selector__wrapper_l2",menuSectionSelectorWrapperHidden:"k10-menu-section-selector__wrapper_hidden",filterMay:"k10-filter-may",filterMayInfoIcon:"k10-filter-may__info-icon",filterMayToggle:"k10-filter-may__toggle",toggleInputMain:"k10-toggle__input-main",nutritionToggleInputMain:"k10-nutritition-toggle__input-main",toolbar:"k10-toolbar",toolbarOpen:"k10-toolbar_open",toolbarIcon:"k10-toolbar__icon",toolbarFiltersClear:"k10-toolbar__filters-clear",toolbarFiltersClearHidden:"k10-toolbar__filters-clear_hidden",toolbarFiltersDone:"k10-toolbar__filters-done",toolbarToggleDietaryInfo:"k10-toolbar__toggle_dietary-info",toolbarMenuSelector:"k10-toolbar__menu-selector",toolbarLabelFilters2:"k10-toolbar__label-filters2",toolbarLabelFiltersOpened2:"k10-toolbar__label-filters2_opened",byo:"k10-byo",byoHidden:"k10-byo_hidden",byoHeader:"k10-byo__header",byoPrice:"k10-byo__price",byoName:"k10-byo__name",byoNameWrapper:"k10-byo__name-wrapper",byoDesc:"k10-byo__desc",byoMessage:"k10-byo__message",byoMessageMin:"k10-byo__message_min",byoMessageMax:"k10-byo__message_max",byoMessageShow:"k10-byo__message_show",byoNutrient:"k10-byo__nutrient",byoNutrientPer100g:"k10-byo__nutrient_per100g",byoNutrientValue:"k10-byo__nutrient-value",byoNutrientEnergy:"k10-byo__nutrient_energy",byoLabels:"k10-byo__labels",byoLabelsSuitable:"k10-byo__labels_suitable",byoLabelsContains:"k10-byo__labels_contains",byoLabelsMay:"k10-byo__labels_may",byoLabelsValue:"k10-byo__labels-value",byoPopoverTooltip:"k10-byo__popover-tooltip",byoInfoImg:"k10-byo__info-img",byoSub:"k10-byo_sub",byoSubHidden:"k10-byo_sub_hidden",byoSubTwo:"k10-byo__sub",byoSubL1:"k10-byo_sub_l1",byoSubL2:"k10-byo_sub_l2",byoSection:"k10-byo__section",byoSectionSubL1:"k10-byo__section_sub_l1",byoSectionSubL2:"k10-byo__section_sub_l2",byoSectionName:"k10-byo__section-name",byoSectionRoot:"k10-byo__section_root",byoItemContainer:"k10-byo__item",byoItem:"k10-byo-item",byoItemSub:"k10-byo-item_sub-byo",byoItemHidden:"k10-byo-item_hidden",byoItemCore:"k10-byo-item_core",byoItemSelected:"k10-byo-item_selected",byoItemName:"k10-byo-item__name",byoItemDescription:"k10-byo-item__description",byoItemPrice:"k10-byo-item__price",byoItemPriceAddRsp:"k10-byo-item__price-addrsp",byoItemPriceDeductRsp:"k10-byo-item__price-deductrsp",byoItemPriceNoCharge:"k10-byo-item__price-nocharge",byoItemCheckbox:"k10-byo-item__checkbox",byoItemCheckboxInput:"k10-byo-item__checkbox-input",byoItemCheckboxIcon:"k10-byo-item__checkbox-icon",byoItemDietaryContainer:"k10-byo-item__dietary-container",byoItemLabel:"k10-byo-item__label",byoItemLabels:"k10-byo-item__labels",byoItemNutrient:"k10-byo-item__nutrient",byoItemNutrientEnergy:"k10-byo-item__nutrient_energy",byoItemRecipe:"k10-byo-item_recipe",byoItemPopoverTooltip:"k10-byo-item__popover-tooltip",byoItemInfo:"k10-byo-item__info",byoItemInfoImg:"k10-byo-item__info-img",byoItemPrimaryLabelImg:"k10-byo-item__primary-label-img",byoItemBody:"k10-byo-item__body",byoItemNameContainer:"k10-byo-item__name-container",byoItemNameWrapper:"k10-byo-item__name-wrapper",byoItemOpenByoButton:"k10-byo-item__open-byo-button",byoItemChoice:"k10-byo-item_choice",byoItemOption:"k10-byo-item_option",recipe:"k10-recipe",recipeMore:"k10-recipe__more",recipeHidden:"k10-recipe_hidden",recipeWithNutrition:"k10-recipe_with-nutrition",recipeNoNutrition:"k10-recipe_nutrition_no",recipeMay:"k10-recipe_may",recipeCard:"k10-recipe-card",recipeInfo:"k10-recipe_info-recipe",recipeByo:"k10-recipe_byo",recipeByoRecipe:"k10-recipe__byo-recipe",recipeSubByo:"k10-recipe_sub-byo",recipeNotByo:"k10-recipe_not-byo",recipeLabel:"k10-recipe__label",recipeLabels:"k10-recipe__labels",recipeLabelCustom:"k10-recipe__label_custom",recipePrice:"k10-recipe__price",recipePriceDash:"k10-recipe__price-dash",recipePriceDashHidden:"k10-recipe__price-dash_hidden",recipeNutrientValue:"k10-recipe__nutrient-value",recipeNutrientEnergy:"k10-recipe__nutrient_energy",recipeAddCalories:"k10-recipe__add-calories",recipeAddCaloriesHidden:"k10-recipe__add-calories_hidden",recipeInfoImg:"k10-recipe__info-img",recipePrimaryLabelImg:"k10-recipe__primary-label-img",recipeNutrientsButton:"k10-recipe__nutrients-button",recipePopoverTooltip:"k10-recipe__popover-tooltip",recipeMenuItem:"k10-recipe_menu-item",recipeDietaryInfo:"k10-recipe__dietary-info",recipeDietaryInfoHidden:"k10-recipe__dietary-info_hidden",recipeSectionSuitable:"k10-recipe__section_suitable",recipeSectionContains:"k10-recipe__section_contains",recipeSectionMay:"k10-recipe__section_may",recipeMoreInfo:"k10-recipe__more-info",recipeFoodPrintLabel:"k10-recipe__food-print-label",recipeFoodPrintLabelHidden:"k10-recipe__food-print-label_hidden",recipeModal:"k10-recipe-modal",recipeModalClose:"k10-recipe-modal__close",recipeModalLabel:"k10-recipe-modal__label",recipeModalLabelIcon:"k10-recipe-modal__label-icon",recipeModalLabelText:"k10-recipe-modal__label-text",recipeModalComponentTablet:"k10-recipe-modal__component_tablet",recipeModalComponentMobile:"k10-recipe-modal__component_mobile",recipeModalComponentLabels:"k10-recipe-modal__component_labels",recipeModalComponentNutrients:"k10-recipe-modal__component_nutrients",recipeModalComponentHidden:"k10-recipe-modal__component_hidden",recipeModalFoodPrintLabel:"k10-recipe-modal__food-print-label",recipeModalFoodPrintLabelHidden:"k10-recipe-modal__food-print-label_hidden",recipeSize:"k10-recipe__size",recipeSizeHidden:"k10-recipe__size_hidden",recipeSizeWrapper:"k10-recipe__size-wrapper",recipeSizeFilter:"k10-recipe__size-filter",recipeSizeCheckbox:"k10-recipe__size-checkbox",recipeSizeCheckboxInput:"k10-recipe__size-checkbox-input",byoItemSizeCheckbox:"k10-byo-item__size-checkbox",byoItemSizeCheckboxInput:"k10-byo-item__size-checkbox-input",popover:"k10-popover",popoverClose:"k10-popover__close",popoverLabel:"k10-popover__label",popoverLabelWrapper:"k10-popover__label-wrapper",modalPerfect:"k10-modal-perfect",modalPerfectByo:"k10-modal-perfect_byo",modalPerfectOpened:"k10-modal-perfect_opened",modalPerfectCloseIcon:"k10-modal-perfect__close-icon",modalPerfectBack:"k10-modal-perfect__back",hidden:"k10-hidden",alert:"k10-alert",alertFree:"k10-alert__free",alertLabels:"k10-alert__labels",alertLabelsDesktop:"k10-alert__labels-desktop",alertLabelsMobile:"k10-alert__labels-mobile",alertIcon:"k10-alert__icon",alertIconTrigger:"k10-alert__icon-trigger",alertIconDrawn:"k10-alert__icon-drawn",alertText:"k10-alert__text",labelInfo:"k10-label-info",labelInfoHidden:"k10-label-info_hidden",labelInfoPdf:"k10-label-info__pdf",labelsFilter:"k10-labels-filter",labelsFilter2:"k10-labels-filter2",labelsFilterLabelChecked:"k10-labels-filter__label-checked",labelsFilterClear:"k10-labels-filter__clear",labelsFilterClearIcon:"k10-labels-filter__clear-icon",labelsFilterReset2:"k10-labels-filter2__reset",labelsFilterReset2Hidden:"k10-labels-filter2__reset_hidden",labelsFilterClose2:"k10-labels-filter2__close",labelsFilterLabelWrapper:"k10-labels-filter__label-wrapper",labelsFilterLabelWrapper2:"k10-labels-filter2__label-wrapper",labelsFilterPanel:"k10-labels-filter__panel",labelsFilterPanel2:"k10-labels-filter2__panel",labelsFilterLabelChkbox:"k10-labels-filter__label-chkbox",labelsFilterLabelChkbox2:"k10-labels-filter2__label-chkbox",labelsFilterMore:"k10-labels-filter__more",labelsFilterMoreOpen:"k10-labels-filter__more_open",labelsFilterLess:"k10-labels-filter__less",labelsFilterMore2:"k10-labels-filter2__more",labelsFilterMoreOpen2:"k10-labels-filter2__more_open",labelsFilterLess2:"k10-labels-filter2__less",labelsFilterSuitableFor:"k10-labels-filter__suitableFor",labelsFilterDoesNotContain:"k10-labels-filter__doesNotContain",labelsFilterBody:"k10-labels-filter__body",labelsFilterOptions:"k10-labels-filter__options",labelsFilterOptionsOpened:"k10-labels-filter__options_opened",labelsFilterOptionsColumnHidden:"k10-labels-filter__options-column_hidden",labelsFilterOptionsColumnMoreOpen:"k10-labels-filter__options-column_more_open",labelsFilterOptionsColumnLeft:"k10-labels-filter__options-column_left",labelsFilterOptionsColumnRight:"k10-labels-filter__options-column_right",labelsFilterOptionsMoreOpen:"k10-labels-filter__options_more_open",labelsFilterOptions2:"k10-labels-filter2__options",labelsFilterOptionsOpened2:"k10-labels-filter2__options_opened2",labelsFilterSelect:"k10-labels-filter_select",labelsFilterOpen:"k10-labels-filter_open",labelsFilterOpen2:"k10-labels-filter2_open",labelsFilterName:"k10-labels-filter__name",labelsFilterNameOpened:"k10-labels-filter__name_opened",labelsFilterName2:"k10-labels-filter2__name",labelsFilterNameOpened2:"k10-labels-filter2__name_opened",labelsFilterIcon:"k10-labels-filter__icon",labelsFilterIconOpened:"k10-labels-filter__icon_opened",labelsFilterIcon2:"k10-labels-filter2__icon",labelsFilterIconOpened2:"k10-labels-filter2__icon_opened",labelsFilterPanelToggle2:"k10-labels-filter2__toggle",labelsFilterContainer2:"k10-labels-filter2__container",labelsFilterContainerOpened2:"k10-labels-filter2__container_opened",labelsFilterCol2:"k10-labels-filter2__options-column",labelsFilterColHidden2:"k10-labels-filter2__options-column_hidden",labelsFilterColShow2:"k10-labels-filter2__options-column_show",labelsFilterLabelCaption2:"k10-labels-filter2__label-caption",calorieFilter:"k10-calorie-filter",calorieFilterOpen:"k10-calorie-filter_open",scrollToTopButton:"k10-scroll-to-top",scrollToTopButtonHidden:"k10-scroll-to-top_hidden",foodPrintFilter:"k10-food-print-filter",foodPrintFilterOpen:"k10-food-print-filter_open",foodPrintFilterReset:"k10-food-print-filter__reset",foodPrintGrade:"k10-food-print-grade",foodPrintPanel:"k10-food-print-panel",foodPrintPanelOpen:"k10-food-print-panel_open",foodPrintPanelName:"k10-food-print-panel__name",foodPrintPanelNameOpen:"k10-food-print-panel__name_open",menuLocationSelector:"k10-menu-location-selector",menuLocationSelectorOpen:"k10-menu-location-selector_open",menuLocationSelectorOptions:"k10-menu-location-selector__options",menuLocationSelectorOptionsOpened:"k10-menu-location-selector__options_opened",menuLocationSelectorName:"k10-menu-location-selector__name",menuLocationSelectorNameOpened:"k10-menu-location-selector__name_opened",menuLocationSelectorPanel:"k10-menu-location-selector__panel",menuLocationSelectorOptionName:"k10-menu-location-selector__option-name",menuLocationSelectorOptionNameCurrent:"k10-menu-location-selector__option-name_current",menuDateSelector:"k10-menu-date-selector",menuDateSelectorOpen:"k10-menu-date-selector_open",menuDateSelectorOptions:"k10-menu-date-selector__options",menuDateSelectorOptionsOpened:"k10-menu-date-selector__options_opened",menuDateSelectorName:"k10-menu-date-selector__name",menuDateSelectorNameOpened:"k10-menu-date-selector__name_opened",menuDateSelectorPanel:"k10-menu-date-selector__panel",menuDateSelectorWeekCarousel:"k10-menu-date-selector__week-carousel",menuDateSelectorWeekCarouselArrow:"k10-menu-date-selector__week-carousel-arrow",menuDateSelectorWeekCarouselArrowLeft:"k10-menu-date-selector__week-carousel-arrow_left",menuDateSelectorWeekCarouselArrowRight:"k10-menu-date-selector__week-carousel-arrow_right",menuDateSelectorWeekCarouselItem:"k10-menu-date-selector__week-carousel-item",menuDateSelectorWeekCarouselItemCurrent:"k10-menu-date-selector__week-carousel-item_current",menuDateSelectorWeek:"k10-menu-date-selector__week",menuDateSelectorWeekCurrent:"k10-menu-date-selector__week_current",menuDateSelectorWeekDay:"k10-menu-date-selector__week-day",menuDateSelectorWeekDayCurrent:"k10-menu-date-selector__week-day_current"};k10=k10||{};k10.colcade=function(){function t(t=1e3){(typeof n=="undefined"&&(n=k10.tools.Debugger(!1,"colcade")),k10.settings.listView)||setTimeout(function(){var i=document.querySelectorAll(".k10-menus"),r,t,n;if(i.length>0&&(r=i[0].getAttribute("data-menu-identifier"),t=document.querySelectorAll('.k10-menus[data-menu-identifier="'+r+'"] .grid'),$k10(".k10-menus .colcade").length>0)){for(n=0;n<t.length;n++)new Colcade(t[n],{columns:".grid-col",items:".grid-item"+(k10.settings.hideFilteredRecipe?":not(.k10-recipe_hidden):not(.k10-byo__container_hidden)":"")});k10.settings.colcadeAnimate&&$k10(".k10-menus .colcade").animate({opacity:1},500)}},t)}function i(n){var i,r,u,t,f;if(!k10.settings.listView&&(i=document.querySelectorAll(".k10-menus"),i.length>0&&(r=i[0].getAttribute("data-menu-identifier"),typeof n!="undefined"&&n.hasOwnProperty("menuIdentifier")&&(r=n.menuIdentifier),u=document.querySelectorAll('.k10-menus[data-menu-identifier="'+r+'"] .grid'),$k10(".k10-menus .colcade").length>0)))for(k10.settings.colcadeAnimate&&$k10(".k10-menus .colcade").animate({opacity:0},0),t=0;t<u.length;t++)f=new Colcade(u[t],{columns:".grid-col",items:".grid-item"}),f.destroy()}function r(){typeof n=="undefined"&&(n=k10.tools.Debugger(!0,"colcade"));n.log("reInit");i();t()}function u(){function r(){$k10(".k10-course .k10-course__body").each(function(){var n=$k10(this),t=$k10("<div><\/div>"),i;n.find(".grid-item").sort(function(n,t){var i=+$k10(n).attr("data-recipe-order"),r=+$k10(t).attr("data-recipe-order");return i<r?-1:i>r?1:0}).appendTo(t);i=n.find(".colcade.grid");t.find(".grid-item").appendTo(i)})}(n.log("reInitWithHiddenItems"),k10.settings.listView)||(i(),r(),t(k10.settings.colcadeAnimate?0:1e3))}var n;return{init:t,destroy:i,reInit:r,reInitWithHiddenItems:u}}();k10=k10||{};k10.grid=function(){function t(){k10.settings.grid&&k10.settings.hideFilteredRecipe&&n(".k10-menus").first().find(".k10-course .k10-course__body .k10-grid").each(function(){var t=n(this),r=n("<div><\/div>");t.find(".grid-item:not(.k10-recipe_hidden)").sort(i).appendTo(r);t.find(".grid-item.k10-recipe_hidden").appendTo(r);r.find(".grid-item").appendTo(t)})}function i(n,t){var i=+$k10(n).attr("data-recipe-order"),r=+$k10(t).attr("data-recipe-order");return i<r?-1:i>r?1:0}var n=$k10;return{sortRecipesInCourse:t}}();k10=k10||{};k10.tools=function(){var t,n=!1,u=function(t,i){var r;if(this.debug={},n&&t)for(r in console)typeof console[r]=="function"&&(this.debug[r]=console[r].bind(window.console,i+": "));else for(r in console)typeof console[r]=="function"&&(this.debug[r]=function(){});return this.debug.errorLog=function(n,t){"object"==typeof console&&console.log(n+" "+t)},this.debug},f=window.location.protocol.indexOf("https")!=-1,e=function(){var n=window.visualViewport===undefined?window.innerWidth:window.visualViewport.width;return n<768},i=function(i){n&&"object"==typeof console&&t.log(i+" - "+(new Date).toString())},o=function(t){return typeof t!="undefined"&&(n=t),n},r=function(n,t){var i=n.closest(".k10-byo").find(".k10-l-body");n.removeClass("k10-byo__name-icon_collapse").removeClass("k10-byo__name-icon_expand");i.hasClass("k10-l-body_hidden")||t?(n.addClass("k10-byo__name-icon_collapse"),i.removeClass("k10-l-body_hidden")):(n.addClass("k10-byo__name-icon_expand"),i.addClass("k10-l-body_hidden"))},s=function(){var n=$k10("#k10-view-menu-options").prop("checked");n?$k10(".k10-byo").removeClass("k10-byo_hidden"):$k10(".k10-byo:not(.k10-recipe_hidden)").each(function(){var n=$k10(this).find(".k10-recipe_hidden");n.length===0&&$k10(this).addClass("k10-byo_hidden")})},h=function(){$k10(".k10-recipe_menu-item").on("click",function(n){if(!($k10(n.target).hasClass("k10-recipe__add-calories")||$k10(n.target).hasClass("k10-recipe-card__add-calories")||$k10(n.target).hasClass("k10-recipe__nutrients-button"))){var t=$k10(".k10-recipe-card[data-section-id='"+$k10(this).attr("data-section-id")+"'][data-recipe-id='"+$k10(this).attr("data-recipe-id")+"']");t.length>0&&($k10(t[0]).removeClass("k10-recipe-card_hidden"),$k10(".k10-toolbar").addClass("k10-toolbar_hidden"),$k10(".k10-body").addClass("k10-body_hidden"),$k10(".k10-header").addClass("k10-header_hidden"),$k10("html, body").scrollTop(0))}});$k10(".k10-recipe-card__back-to-menu").on("click",function(){var n=$k10(this).closest(".k10-recipe-card");n.length>0&&($k10(n[0]).addClass("k10-recipe-card_hidden"),$k10(".k10-toolbar").removeClass("k10-toolbar_hidden"),$k10(".k10-body").removeClass("k10-body_hidden"),$k10(".k10-header").removeClass("k10-header_hidden"),$k10("html, body").scrollTop(0))})},c=function(){$k10(".k10-byo__name-icon").on("click",function(){r($k10(this),!1)});if($k10("#k10-view-menu-options").length>0)$k10("body").on("change","#k10-view-menu-options",s);$k10(".k10-refresh-page__button").on("click",function(){location.reload(!0)})},l=function(n){var t=$k10(".k10-menus").first(),r=t.find(".k10-toolbar").first();return function(){var l=parseInt(r.offset().top),a=r.height(),v=parseInt(r.css("margin-bottom")),o=a+l+v,s=$k10(window).scrollTop(),u=t.find(".k10-labels__header").first(),f=n?t.find(".k10-all-courses_desktop").css("width"):t.find(".k10-all-courses").css("width"),e;if(i("toolbarHeight:"+o+" height:"+a+" offset:"+l+" margin:"+v+" scroll:"+s+" max-width:"+f),n){var y=$k10(window).scrollLeft(),h=0,c=u.parents();for(e=0;e<c.length;e++)h+=parseInt(parseFloat($k10(c[e]).css("margin-left"))+parseFloat($k10(c[e]).css("padding-left")));u.css({});s<o?u.css({"margin-top":0,left:0-y+h,width:f}):u.css({"margin-top":0,left:0-y+h,width:f})}s<o?u.css({top:o-s,"max-width":f}):u.css({top:0,"max-width":f})}},a=function(n){$k10(window).width()>=768&&$k10(".k10-labels-filter").first().css({top:$k10(".k10-toolbar").first().height()+n+parseInt($k10(".k10-toolbar").first().offset().top)+"px"});$k10(window).on("scroll resize",function(){var t=$k10(".k10-labels-filter").first();if($k10(window).width()>=768){var u=parseInt($k10(".k10-toolbar").first().offset().top),i=$k10(".k10-toolbar").first().height()+u+n,r=$k10(window).scrollTop();r<i?t.css({top:i-r}):t.css({top:n})}else t.css({top:""})})},v=function(){$k10.each($k10(".k10-recipe__video, .k10-recipe-card__video, .k10-recipe-modal__video"),function(){var n=$k10(this).attr("data-preview-text");$k10(this).magnificPopup({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"><\/div>'+(n!=""?'<img src="'+k10.settings.SkinImagePath+'/tk-logo-circle-small.png" class="k10-video__preview-mode k10-video__preview-mode__logo"/><div class="k10-video__preview-mode k10-video__preview-mode__text">'+n+'<\/div><div class="k10-video__preview-mode k10-video__preview-mode__background"><\/div>':"")+'<iframe class="mfp-iframe" frameborder="0" allowfullscreen><\/iframe><div class="mfp-title"><\/div><\/div>'},callbacks:{elementParse:function(t){var i=$k10(t.el).attr("data-video"),f=navigator.userAgent||navigator.vendor||window.opera,r=1,u;(/android/i.test(f)||/iPad|iPhone|iPod/.test(f)&&!window.MSStream)&&(r=0);u=!1;i.indexOf("https://player.vimeo.com/")===0?(u=!0,i+="?autoplay="+r):i.indexOf("https://www.youtube.com/embed")===0&&(u=!0,i+="?autoplay="+r+"&rel=0&showinfo=0");t.src=u?i:k10.settings.BaseImageUrl+"ams?autoplay="+(r==1)+"&url="+i;n.length>0&&setTimeout(function(){$k10(".k10-video__preview-mode").addClass("k10-video__preview-mode_hidden")},2e3)},markupParse:function(n,t,i){t.title=i.el.attr("data-name")}},overflowY:"scroll",removalDelay:200,prependTo:$k10(".k10-video-container")})})},y=function(){$k10.each($k10(".k10-recipe-card"),function(){$k10(this).find(".k10-recipe-card__prep-method-picture").magnificPopup({type:"image",gallery:{enabled:!0},callbacks:{elementParse:function(n){n.src=n.el.attr("data-original-path")}},overflowY:"scroll",removalDelay:200,prependTo:$k10(".k10-menus")})})},p=function(){var t,n,i;for($k10(".k10-recipe,.k10-byo_mobile").removeClass("k10-recipe_first"),t=$k10(".k10-course"),n=0;n<t.length;n++)$k10(t[n]).removeClass("k10-recipe_hidden"),$k10(t[n]).find(".k10-byo.k10-recipe_hidden").find(".k10-recipe, .k10-byo_mobile").addClass("k10-recipe_hidden"),i=$k10(t[n]).find(".k10-recipe:not(.k10-recipe_hidden), .k10-byo_mobile:not(.k10-recipe_hidden)").first(),i.length>0?i.addClass("k10-recipe_first"):k10.settings.HideEmptySections==!0&&$k10(t[n]).addClass("k10-recipe_hidden")},w=function(){var t,n;for($k10(".k10-recipe_desktop").removeClass("k10-recipe_with-bg k10-w-recipe_with-bg"),t=$k10(".k10-recipe_desktop:not(.k10-recipe-card):not(.k10-recipe_hidden):not(.k10-recipe_desktop-nutrition)"),n=0;n<t.length;n++)n%2==1&&$k10(t[n]).addClass("k10-recipe_with-bg k10-w-recipe_with-bg")},b=function(n){setTimeout(function(){for(var t,i=$k10(".k10-all-courses_desktop thead tr.k10-course__header-labels-names").first().find("td:not(.k10-course__header_hidden)"),r=$k10(".k10-labels__header thead tr.k10-course__header-labels-names").first().find("td:not(.k10-course__header_hidden)"),n=0;n<i.length;n++)t=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&!(window.location.href.indexOf("tksiteinfo.com")>-1||window.location.port==="3568")?$k10(i[n]).width():$k10(i[n]).outerWidth(),$k10(r[n]).css("width",t+"px"),$k10(r[n]).css("min-width",t+"px"),$k10(r[n]).css("max-width",t+"px");$k10(".k10-all-courses_desktop .k10-course__header").css("height",$k10(".k10-labels__header thead tr:nth-child(2) td:not(.k10-course__header_hidden)").first().outerHeight()+"px")},n)},k=function(){setTimeout(function(){$k10(".k10-refresh-page__modal-drop").removeClass("k10-refresh-page__modal-drop_hidden");$k10(".k10-refresh-page").removeClass("k10-refresh-page_hidden")},k10.settings.timeOut*6e4)},d=function(n){var u=null,i,t,r;if(window.location.href.indexOf("?")!=-1)for(i=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),t=0;t<i.length;t++)if(r=i[t].split("="),r[0]==n){u=r[1];break}return u},g=function(n){if(n){if(n==null||n==!1)return!1;if(n==!0)return!0;if(typeof n=="string"){if(n.toLowerCase()=="false")return!1;if(n.toLowerCase()=="true")return!0}}return!1},nt=function(){t=k10.tools.Debugger(!1,"tools");t.log("init");c()};return{init:nt,Debugger:u,isHttps:f,debugMode:o,consoleLog:i,expandCollapse:r,initScrollHeader:l,initScrollLableFilter:a,initVideo:v,showHideRecipeCard:h,markFirstNotHiddenRecipe:p,handleTableRows:w,recalcFixedHeader:b,showRefreshPagePopup:k,initImageWithGallery:y,getQueryStringValue:d,getBoolValue:g,isMobile:e}}();k10=k10||{};k10.bus=function(){var n={},t=function(t,i){return n[t]||(n[t]=[]),n[t].push({context:this,callback:i}),this},i=function(t){var u,i,f,r,e;if(!n[t])return!1;for(u=Array.prototype.slice.call(arguments,1),i=0,f=n[t].length;i<f;i++)r=n[t][i],r.callback.apply(r.context,u);return e=k10.tools.Debugger(!1,"publish"),e.log(t),this};return{publish:i,subscribe:t,installTo:function(n){n.subscribe=t;n.publish=i}}}();k10=k10||{};k10.dietaryAdvice=function(){var n=[],t,i,r,u=function(n){n.addClass("k10-recipe_hidden")},f=function(n){n.removeClass("k10-recipe_hidden")},e=function(n){var t=[],i=[];return n.map(function(n){n.isExt===!0?i.push(n.id):t.push(n.id)}),{suitableFor:t,allergenFor:i}},o=function(){var n=[];return $k10(".k10-menus").first().find(".k10-dietary__recipe").each(function(){var u=$k10(this),t=new i;t.domElem=u;try{t.labelsIds=u.attr("data-labels")?JSON.parse("["+u.attr("data-labels")+"]"):[];t.labelsIds==null&&(t.labelsIds=[])}catch(f){r.errorLog("dietaryAdvice","JSON Error: "+f.message);t.labelsIds=[]}t.isVisible=!u.hasClass("k10-recipe_hidden");t.name=u.find(".k10-dietary__recipe-name").text();n.push(t)}),n},s=function(n){n.isVisible?f(n.domElem):u(n.domElem)},h=function(){var t=$k10(".k10-menus").not(".k10-hidden-menus .k10-menus");t.find(".k10-dietary").modal("show");n.length?$k10(".k10-menus").not(".k10-hidden-menus .k10-menus").find(".k10-dietary__btn_apply-filter").removeClass("hidden"):$k10(".k10-menus").not(".k10-hidden-menus .k10-menus").find(".k10-dietary__btn_apply-filter").addClass("hidden");$k10(".k10-menus").not(".k10-hidden-menus .k10-menus").find(".k10-dietary__btn_remove-filter").addClass("hidden");$k10(".k10-menus").first().find(".k10-dietary__recipe").removeClass("k10-recipe_hidden")},c=function(){$k10(this).addClass("hidden");$k10(this).closest(".k10-dietary__header").find(".k10-dietary__btn_remove-filter").removeClass("hidden");var r=e(n),i=o();t(i,r);i.forEach(function(n){s(n)})},l=function(){$k10(this).addClass("hidden");$k10(this).closest(".k10-dietary__header").find(".k10-dietary__btn_apply-filter").removeClass("hidden");$k10(".k10-menus").first().find(".k10-dietary__recipe").removeClass("k10-recipe_hidden")},a=function(){n=k10.labelFilter.model.selectedLabels},v=function(){$k10(".k10-menus").first().find(".k10-dietary__body").printThis({debug:!1,importCSS:!0,printContainer:!0,loadCSS:"",pageTitle:"",removeInline:!1})},y=function(){k10.dietaryAdvice.publish("pdfRequested",$k10(this))},p=function(){$k10(".k10-toolbar").on("click",".k10-toolbar__disclaimer",h);$k10(".k10-menus").not(".k10-hidden-menus .k10-menus").on("click",".k10-dietary__btn_apply-filter",c);$k10(".k10-menus").not(".k10-hidden-menus .k10-menus").on("click",".k10-dietary__btn_remove-filter",l);$k10(".k10-menus").not(".k10-hidden-menus .k10-menus").on("click","#printIntoleranceList",v);$k10(".k10-menus").not(".k10-hidden-menus .k10-menus").on("click",".k10-dietary__btn_download",y)},w=function(n,u){r=k10.tools.Debugger(!0,"dietaryAdvice");p();t=n;i=u};return{init:w,rememberSelectedLabels:a}}();k10=k10||{};k10.labelInfo=function(){var r=15e3,i={webPage:0,cookBook:1,printPresetPortal:2,printPresetMenu:3,printTool:4},c,t,n={selectedFilterLabels:[],selectedCalorieRange:[],selectedCalorieNoMaxMinSelected:!0,selectedFoodprintGrades:[]},e=function(){},u=function(t){var nt=i.webPage,f=n.pdf.tmplName,rt=n.pdf.includeAllLabels,ut=n.pdf.pdfAlgorithm,ft=n.pdf.includeBYO,et=n.pdf.showByoItems,ot=n.pdf.filterFunc,st=t.attr("data-limitclick"),b,s,h,c,l,a,v,y,p,d,tt,w,it,e;if(typeof st=="undefined"){b="";b=typeof $k10(".k10-dietary__btn_download").attr("data-file-name")!="undefined"?$k10(".k10-dietary__btn_download").attr("data-file-name"):$k10(".k10-menus").attr("data-file-name");k10.settings.StatFileName=b.split(".")[0];var ht=k10.settings.StatFileName.split("_")[0],ct=k10.settings.StatFileName.split("_")[1],o="",k=t.attr("includeMayValue");if(k=k==="false"?!1:!0,s=t.attr("showSectionL2"),s=typeof s=="undefined"||s==="false"?!1:!0,h=t.attr("showSectionL3"),h=typeof h=="undefined"||h==="false"?!1:!0,c=t.attr("showRoots"),c=typeof c=="undefined"||c==="false"?!1:!0,l=t.attr("showInfo"),l=typeof l=="undefined"||l==="false"?!1:!0,a=t.attr("isNew"),a=typeof a=="undefined"||a==="false"?!1:!0,v=t.attr("showRootItems"),v=typeof v=="undefined"||v==="false"?!1:!0,y=t.attr("showDescription"),y=typeof y=="undefined"||y==="false"?!1:!0,p=t.attr("showByoItemCalories"),p=typeof p=="undefined"||p==="true"?!0:!1,d=$k10(".k10-menus").first().find("input[name='k10-filter-nutrition']"),tt=d.length?d.prop("checked"):!0,n.selectedFilterLabels.length)for(w=0;w<n.selectedFilterLabels.length;w++)w>0&&(o=o+"-"),o=o+n.selectedFilterLabels[w].id;var lt=n.selectedFoodprintGrades.join("-"),g=k10.settings.BaseMenusUrl+"/hub/pdf/getpdfurl?ss="+encodeURIComponent(k10.settings.SessionIdentifierForApi),u={stc:null,cr:null,tur:"",oid:k10.settings.OrganisationGuid,zid:k10.settings.ZooMenuGuid,mid:k10.settings.MenuGuid,tn:f,ff:ht,td:ct,ls:o,sa:k10.tools.getBoolValue(rt),pa:ut,ib:ft,im:k10.tools.getBoolValue(k),sbi:k10.tools.getBoolValue(et),sl2:k10.tools.getBoolValue(s),sl3:k10.tools.getBoolValue(h),ffn:ot,sr:k10.tools.getBoolValue(c),sri:k10.tools.getBoolValue(v),si:k10.tools.getBoolValue(l),isn:k10.tools.getBoolValue(a),smid:k10.tools.getBoolValue(y),prid:"-1",uid:"00000000-0000-0000-0000-000000000000",sni:k10.tools.getBoolValue(tt),sbic:k10.tools.getBoolValue(p),fpgs:lt};f=="printrecord"?(it=k10.tools.getBoolValue(t.attr("printlayoutispreset")),u.tur=it?"preset/pdf/portal/printpresetpdffromweb":"report/pdf/portal/printpdffromweb",u.prid=t.attr("printRecordId"),u.uid=k10.settings.UnitGuid,nt=i.printPresetMenu):k10.settings.pdfAdviceByTmpl?u.tur="report/pdf/menupdfbytmpl":(u.tur="report/pdf/stgmenuallergysummary",f!==""&&(f=="tenkitesmenufoodprintsummary"&&(u.tur="report/pdf/tenkitesmenufoodprintsummary"),f=="cote"&&(u.tur="report/pdf/cote",u.sni=!u.sni),f=="tenkitesmenuallergysummary"&&(u.tur="report/pdf/tenkitesmenuallergysummary"),f=="wgmmenuallergysummary"&&(u.tur="report/pdf/wgmmenuallergysummary"),f=="fullers"&&(u.tur="report/pdf/fullerspdf"),f=="barlouiemenunutrientsummary"&&(u.tur="report/pdf/barlouiemenunutrientsummary"),f=="shepherd"&&(u.tur="report/pdf/shepherdpdf"),f=="hallwood"&&(u.tur="report/pdf/hallwoodpdf")));k10.settings.SiteCode.length>0&&(u.stc=k10.settings.SiteCode);n.selectedCalorieNoMaxMinSelected==!1&&n.selectedCalorieRange.length==2&&(u.cr=+n.selectedCalorieRange[0]+"-"+n.selectedCalorieRange[1]);g=g+"&dt="+JSON.stringify(u);t.attr("data-limitclick","true");e=document.createElement("a");e.setAttribute("href",g);e.style.display="none";document.body.appendChild(e);e.click();document.body.removeChild(e);setTimeout(function(){k10.labelInfo.publish("sendStatFiles",{pdfType:nt});t.removeAttr("data-limitclick")},r)}},o=function(n){var u=i.webPage,f=n.attr("data-limitclick"),t;typeof f=="undefined"&&(t=k10.settings.BaseMenusUrl+"/hub/pdf/printurl?oid="+k10.settings.OrganisationGuid+"&zid="+k10.settings.ZooMenuGuid+"&url="+encodeURIComponent(window.location.pathname.toString())+"&ss="+encodeURIComponent(k10.settings.SessionIdentifierForApi),k10.settings.SiteCode.length>0&&(t=t+"&stc="+k10.settings.SiteCode),n.attr("href",t),n.attr("data-limitclick","true"),n.click(),setTimeout(function(){k10.labelInfo.publish("sendStatFiles",{pdfType:u});n.removeAttr("data-limitclick")},r))},f=function(n){var u=i.webPage,f=n.attr("data-limitclick");if(typeof f=="undefined"){var e=n.closest(".k10-label-info").find("[name='PdfTemplate']").val(),o=n.attr("data-recipe-id"),s=encodeURIComponent(n.attr("data-recipe-name").replace(/\W/g,"")),t=k10.settings.BaseMenuUrl+"/hub/pdf/recipepdf?oid="+k10.settings.OrganisationGuid+"&zid="+k10.settings.ZooMenuGuid+"&rid="+o+"&ff="+s+"&td="+encodeURIComponent(l())+"&vn="+encodeURIComponent(e)+"&ss="+encodeURIComponent(k10.settings.SessionIdentifierForApi)+"&mmi="+encodeURIComponent(k10.settings.ZooMenuGuid)+"&mi="+encodeURIComponent(k10.settings.MenuGuid);k10.settings.SiteCode.length>0&&(t=t+"&stc="+k10.settings.SiteCode);k10.settings.ColorSchemeName.length>0&&(t=t+"&csn="+k10.settings.ColorSchemeName);n.attr("href",t);n.attr("data-limitclick","true");n.click();setTimeout(function(){k10.labelInfo.publish("sendStatFiles",{pdfType:u});n.removeAttr("data-limitclick")},r)}},l=function(){return(new Date).toISOString().split("T")[0]},s=function(){if(k10.settings.pdfForCurrentRecipe)t.on("click",".k10-label-info__pdf",function(){f($k10(this))});else if(typeof k10.settings.pdfFromCurrentUrl!="undefined"&&k10.settings.pdfFromCurrentUrl==!0)t.on("click",".k10-label-info__pdf",function(){o($k10(this))});else if(n.hasPdf&&n.hasOverlay||!n.hasPdf&&n.hasOverlay)t.on("click",".k10-label-info__pdf",e);else t.on("click",".k10-label-info__pdf",function(){h($k10(this).closest(".k10-label-info"));u($k10(this))})},a=function(){k10.settings.pdfForCurrentRecipe?t.off("click",".k10-label-info__pdf",function(){f($k10(this))}):typeof k10.settings.pdfFromCurrentUrl!="undefined"&&k10.settings.pdfFromCurrentUrl==!0?t.off("click",".k10-label-info__pdf",function(){o($k10(this))}):n.hasPdf&&n.hasOverlay||!n.hasPdf&&n.hasOverlay?t.off("click",".k10-label-info__pdf",e):t.off("click",".k10-label-info__pdf",function(){h($k10(this).closest(".k10-label-info"));u($k10(this))})},h=function(t){n.hasOverlay=t.find("[name='HasAllergenInfoOverlay']").val();n.hasPdf=t.find("[name='HasPdfAllergenInfo']").val();n.pdf={};n.pdf.tmplName=t.find("[name='PdfTemplate']").val();n.pdf.pdfAlgorithm=t.find("[name='PdfAlgorithm']").val();n.pdf.includeBYO=t.find("[name='IncludeBYO']").val();n.pdf.includeAllLabels=t.find("[name='IncludeAllLabelsInPdf']").val();n.pdf.showByoItems=$k10("#k10-view-menu-options").length>0?$k10("#k10-view-menu-options").prop("checked"):!0;n.pdf.filterFunc=t.find("[name='FilterFunc']").val()},v=function(t){n.hasOverlay=t.attr("data-has-allergen-info-overlay");n.hasPdf=t.attr("data-has-pdf-allergen-info");n.pdf={};n.pdf.tmplName=t.attr("data-pdf-template");n.pdf.pdfAlgorithm="";n.pdf.includeBYO=!0;n.pdf.includeAllLabels=t.attr("data-include-all-labels-in-pdf");n.pdf.showByoItems=!1;n.pdf.filterFunc=t.attr("data-filter-func");u(t)},y=function(){n.selectedFilterLabels=k10.labelFilter.model.selectedLabels;n.selectedCalorieRange=k10.calorieFilter.model.selectedCalorieValue;n.selectedCalorieNoMaxMinSelected=k10.calorieFilter.model.noMaxMinSelected;n.selectedCalorieNoMaxMinSelected==!1&&n.selectedCalorieRange.length==2&&n.selectedCalorieRange[1]==2500&&(n.selectedCalorieRange[1]=999999);n.selectedFoodprintGrades=k10.foodPrintFilter.getSelectedGrades()},p=function(){c=k10.tools.Debugger(!0,"label-info");t=$k10(".k10-label-info");navigator.userAgent.toLowerCase().match(/(ipad|iphone)/)&&$k10(".k10-label-info__pdf").attr("target","_blank");s()},w=function(){t=$k10(".k10-label-info");navigator.userAgent.toLowerCase().match(/(ipad|iphone)/)&&$k10(".k10-label-info__pdf").attr("target","_blank");a();s()};return{init:p,rememberSelectedValues:y,pdfRequested:v,getPdfRecipe:f,menuUpdate:w,model:n}}();k10=k10||{};k10.labelFilter=function(){var n=k10.className,f=k10.tools.Debugger(!1,"label-filter"),t={$allMenus:"",$labelFilter:"",$labelFilter2:"",$filterOptions:"",$filterOptions2:"",$leftColumn:"",$rightColumn:"",$suitableFor:"",$doesNotContain:"",$mayContain:""},i={selectedLabels:[]},w=function(n,t,i,r){this.id=n;this.isExt=t;this.name=i;this.code=r},b=function(n){i.selectedLabels=i.selectedLabels.filter(function(t){return t.id!==n})},o=function(){var r,u;if(f.log("_updateControls"),i.selectedLabels.length>0){for($k10("[data-label-id] input").prop("checked",!1),r=0;r<i.selectedLabels.length;r++)u=i.selectedLabels[r],$k10('[data-label-id="'+u.id+'"] input').prop("checked",!0);$k10(t.$labelFilter).addClass(n.labelsFilterSelect)}else t.$labelFilter.find("."+n.labelsFilterLabelChkbox).prop("checked",!1),t.$labelFilter2.find("."+n.labelsFilterLabelChkbox2).prop("checked",!1),t.$labelFilter.find("."+n.labelsFilterLabelChecked).removeClass(n.labelsFilterLabelChecked,!1),t.$labelFilter2.find("."+n.labelsFilterLabelChecked).removeClass(n.labelsFilterLabelChecked,!1),$k10(t.$labelFilter).removeClass(n.labelsFilterSelect);tt()},s=function(t){if(f.log("_labelClicked"),$k10(t.target).is("input")){var s=$k10(t.target),r=+$k10(this).attr("data-label-id"),e=$k10(this).attr("data-label-name"),h=$k10(this).attr("data-label-code"),u=$k10(this).attr("data-label-isext");u=u?u.toLowerCase()==="true":!1;s.prop("checked")?(i.selectedLabels.indexOf(r)===-1&&(i.selectedLabels.push(new w(r,u,e,h)),o(),k10.labelFilter.publish("sendStatLabels",{id:r,name:e}),$k10(this).addClass(n.labelsFilterLabelChecked)),typeof k10.settings.showFilterAlert!="undefined"&&k10.settings.showFilterAlert==!0&&(k10.settings.IsMobile==!0||k10.tools.isMobile()==!0?$k10("."+n.alert+"."+n.alertLabelsMobile+"."+n.alertFree).first().removeClass(n.alertFree).stop(!0,!0).show(400,function(){typeof k10.settings.showFilterAlertDrawn!="undefined"&&k10.settings.showFilterAlertDrawn==!0&&$k10(this).find("."+n.alertIconTrigger).first().addClass(n.alertIconDrawn)}).delay(1e3).fadeOut(3e3,function(){$k10(this).addClass(n.alertFree);typeof k10.settings.showFilterAlertDrawn!="undefined"&&k10.settings.showFilterAlertDrawn==!0&&$k10(this).find("."+n.alertIconTrigger).first().removeClass(n.alertIconDrawn)}):$k10("."+n.alert+"."+n.alertLabelsDesktop+"."+n.alertFree).first().removeClass(n.alertFree).stop(!0,!0).show(400,function(){typeof k10.settings.showFilterAlertDrawn!="undefined"&&k10.settings.showFilterAlertDrawn==!0&&$k10(this).find("."+n.alertIconTrigger).first().addClass(n.alertIconDrawn)}).delay(1e3).fadeOut(3e3,function(){$k10(this).addClass(n.alertFree);typeof k10.settings.showFilterAlertDrawn!="undefined"&&k10.settings.showFilterAlertDrawn==!0&&$k10(this).find("."+n.alertIconTrigger).first().removeClass(n.alertIconDrawn)}))):(b(r),o(),$k10(this).removeClass(n.labelsFilterLabelChecked));k10.settings.useLocalStorage?window.localStorage.setItem("labelFilter",JSON.stringify(i)):k10.settings.useSessionStorage&&window.sessionStorage.setItem("labelFilter",JSON.stringify(i));setTimeout(function(){k10.labelFilter.publish("labelsFilterChanged")},0)}},u=function(n){f.log("clear label filter");k10.labelFilter.publish("labelsFilter.clearing");i.selectedLabels=[];o();k10.settings.useLocalStorage?window.localStorage.removeItem("labelFilter"):k10.settings.useSessionStorage&&window.sessionStorage.removeItem("labelFilter");n&&(typeof n.stopSpinner=="undefined"||n.stopSpinner===!0)&&k10.labelFilter.publish("labelsFilterChanged")},e=function(i){var r=$k10(i.target).hasClass(n.labelsFilterClear)||$k10(i.target).hasClass(n.labelsFilterClearIcon);r||(t.$labelFilter.toggleClass(n.labelsFilterOpen),t.$labelFilter.find("."+n.labelsFilterName).toggleClass(n.labelsFilterNameOpened),t.$labelFilter.find("."+n.labelsFilterOptions).toggleClass(n.labelsFilterOptionsOpened),t.$labelFilter.find("."+n.labelsFilterIcon).toggleClass(n.labelsFilterIconOpened),t.$labelFilter.hasClass(n.labelsFilterOpen)&&k10.labelFilter.publish("openFilter",k10.ui.initScroll),k10.labelFilter.publish("labelFilter.toggled",k10.ui.initScroll))},r=function(){var i,r;t.$labelFilter2.toggleClass(n.labelsFilterOpen2);t.$labelFilter2.find("."+n.labelsFilterName2).toggleClass(n.labelsFilterNameOpened2);i=t.$labelFilter2.find("."+n.labelsFilterOptions2);i.length?t.$labelFilter2.find("."+n.labelsFilterOptions2).toggleClass(n.labelsFilterOptionsOpened2):t.$labelFilter2.closest("."+n.toolbar).find("."+n.labelsFilterOptions2).toggleClass(n.labelsFilterOptionsOpened2);t.$labelFilter2.find("."+n.labelsFilterIcon2).toggleClass(n.labelsFilterIconOpened2);k10.labelFilter.publish("labelFilter.toggled",k10.ui.initScroll);r=t.$labelFilter2.hasClass(n.labelsFilterOpen2);k10.labelFilter.publish("labelFilterToggled",{isOpened:r})},k=function(){t.$labelFilter2.removeClass(n.labelsFilterOpen2);t.$labelFilter2.find("."+n.labelsFilterName2).removeClass(n.labelsFilterNameOpened2);var i=t.$labelFilter2.find("."+n.labelsFilterOptions2);i.length?t.$labelFilter2.find("."+n.labelsFilterOptions2).removeClass(n.labelsFilterOptionsOpened2):t.$labelFilter2.closest("."+n.toolbar).find("."+n.labelsFilterOptions2).removeClass(n.labelsFilterOptionsOpened2);t.$labelFilter2.find("."+n.labelsFilterIcon2).removeClass(n.labelsFilterIconOpened2)},h=function(){t.$rightColumn.toggleClass(n.labelsFilterOptionsColumnHidden);t.$leftColumn.toggleClass(n.labelsFilterOptionsColumnMoreOpen);t.$filterOptions.toggleClass(n.labelsFilterOptionsMoreOpen);$k10("."+n.labelsFilterMore).toggleClass(n.labelsFilterMoreOpen);var i=$k10("."+n.labelsFilterMore);$k10(this).hasClass(n.labelsFilterMore+"_open")?typeof i.data("textCollapse")!="undefined"?i.html(i.data("textCollapse")):i.html("Less Options"):typeof i.data("textExpand")!="undefined"?i.html(i.data("textExpand")):i.html("More Options");k10.labelFilter.publish("labelsFilterOptionsClick")},c=function(){t.$labelFilter.find("."+n.labelsFilterSuitableFor).toggleClass(n.labelsFilterSuitableFor+"_open");t.$leftColumn.toggleClass(n.labelsFilterOptionsColumnHidden)},l=function(){t.$labelFilter.find("."+n.labelsFilterDoesNotContain).toggleClass(n.labelsFilterDoesNotContain+"_open");t.$rightColumn.toggleClass(n.labelsFilterOptionsColumnHidden)},a=function(i){var r=$k10(i.target),u=r.closest("."+n.labelsFilterOptions).length,f=r.closest("."+n.labelsFilterPanel).length,o=r.closest("."+n.labelsFilterBody).length;u||f||o||t.$labelFilter.hasClass(n.labelsFilterOpen)&&e(i)},d=function(i){var u=$k10(i.target),f=u.closest("."+n.labelsFilterOptions2).length,e=u.closest("."+n.labelsFilterPanel2).length,o=u.closest("."+n.labelsFilterBody2).length,s=u.closest("."+n.disclaimer).length,h=u.closest("."+n.toolbarFiltersDone).length,c=u.closest("."+n.labelsFilterMore2).length,l=u.closest("."+n.contentWrapperOverlay).length;(f||e||o||s||c||l)&&!h||t.$labelFilter2.hasClass(n.labelsFilterOpen2)&&(r(i),$k10("."+n.labelsFilterPanelToggle2).length&&$k10("."+n.labelsFilterPanelToggle2+" input").prop("checked",!1).trigger("change"))},g=function(){if(k10.settings.handleOutsideClicksForFilters)t.$allMenus.on("click",a);if(k10.settings.handleOutsideClicksForFilters2)t.$allMenus.on("click",d);if(!k10.settings.globalSpinner)t.$allMenus.on("click","."+n.toolbarFiltersClear,u);t.$labelFilter.on("click","."+n.labelsFilterMore,h);t.$labelFilter.on("click","."+n.labelsFilterSuitableFor,c);t.$labelFilter.on("click","."+n.labelsFilterDoesNotContain,l);t.$labelFilter.on("click","."+n.labelsFilterLabelWrapper,s);t.$labelFilter.on("click","."+n.labelsFilterClear,u);t.$labelFilter.on("click","."+n.labelsFilterPanel,e);t.$labelFilter.on("click","."+n.labelsFilterLess,e);t.$labelFilter2.on("click","."+n.labelsFilterLabelWrapper2,s);t.$labelFilter2.on("click","."+n.labelsFilterReset2,u);t.$labelFilter2.on("click","."+n.labelsFilterClose2,r);if($k10("."+n.labelsFilterPanelToggle2).length)t.$labelFilter2.on("change","."+n.labelsFilterPanelToggle2,r);else t.$labelFilter2.on("click","."+n.labelsFilterPanel2,r);if(k10.settings.includeMayContain)t.$mayContain.on("change",y)},nt=function(){k10.settings.handleOutsideClicksForFilters&&t.$allMenus.off("click",a);k10.settings.globalSpinner||t.$allMenus.off("click","."+n.toolbarFiltersClear,u);t.$labelFilter.off("click","."+n.labelsFilterMore,h);t.$labelFilter.off("click","."+n.labelsFilterSuitableFor,c);t.$labelFilter.off("click","."+n.labelsFilterDoesNotContain,l);t.$labelFilter.off("click","."+n.labelsFilterPanel,e);t.$labelFilter.off("click","."+n.labelsFilterClear,u);t.$labelFilter.off("click","."+n.labelsFilterLabelWrapper,s);t.$labelFilter.off("click","."+n.labelsFilterLess,e);t.$labelFilter2.off("click","."+n.labelsFilterReset2,u);t.$labelFilter2.off("click","."+n.labelsFilterLabelWrapper2,s);t.$labelFilter2.off("click","."+n.labelsFilterClose2,r);$k10("."+n.labelsFilterPanelToggle2).length?t.$labelFilter2.off("change","."+n.labelsFilterPanelToggle2,r):t.$labelFilter2.off("click","."+n.labelsFilterPanel2,r);k10.settings.includeMayContain&&t.$mayContain.off("change",y)},v=function(t,i){var s=t.length>0,u=!0,e,o,f,r;if(s&&(u=t.prop("checked"),e=$k10("."+n.toggleInputMain+"[name='"+n.filterMay+"']"),e.length>1))for(o=0;o<e.length;o++)f=$k10(e[o]),u&&f.prop("checked")===!1?f.prop("checked",!0):u||f.prop("checked")!==!0||f.prop("checked",!1);r="."+n.recipe+"."+n.recipeMenuItem;k10.settings.handleMayLabelsInByo===!0&&(r=r+",."+n.recipe+"."+n.recipeByo,r=r+",."+n.recipe+"."+n.recipeSubByo,r=r+", ."+n.byoItem);$k10(r).each(function(){u?$k10(this).attr("data-labels",$k10(this).attr("data-all-labels")):$k10(this).attr("data-labels",$k10(this).attr("data-no-may-labels"))});$k10("."+n.recipeCard+" ."+n.recipeByoRecipe).each(function(){u?$k10(this).attr("data-labels",$k10(this).attr("data-all-labels")):$k10(this).attr("data-labels",$k10(this).attr("data-no-may-labels"))});$k10("."+n.labelInfoPdf).attr("includeMayValue",u).removeAttr("href");i&&p();k10.labelFilter.publish("labelsFilterChanged")},y=function(){v($k10(this),!1)},tt=function(){if(k10.settings.hasMayContain&&!k10.settings.includeMayContain){var t="."+n.recipe+"."+n.recipeMenuItem;k10.settings.handleMayLabelsInByo===!0&&(t=t+",."+n.recipe+"."+n.recipeByo,t=t+",."+n.recipe+"."+n.recipeSubByo,t=t+", ."+n.byoItem);$k10(t).each(function(){$k10(this).attr("data-labels",$k10(this).attr("data-all-labels"))})}},p=function(){var i,r;f.log("init");t.$allMenus=$k10("."+n.menus);t.$labelFilter=$k10("."+n.labelsFilter);t.$filterOptions=$k10("."+n.labelsFilterOptions);t.$leftColumn=$k10("."+n.labelsFilterOptionsColumnLeft);t.$rightColumn=$k10("."+n.labelsFilterOptionsColumnRight);t.$labelFilter2=$k10("."+n.labelsFilter2);t.$filterOptions2=$k10("."+n.labelsFilterOptions2);t.$mayContain=$k10("."+n.toggleInputMain+"[name='"+n.filterMay+"']").first();nt();g();i=k10.settings.useLocalStorage?window.localStorage.getItem("labelFilter"):k10.settings.useSessionStorage?window.sessionStorage.getItem("labelFilter"):null;i!==null&&typeof i!="undefined"&&(r=JSON.parse(i),k10.labelFilter.model.selectedLabels=r.selectedLabels,k10.labelFilter.publish("labelsFilterChanged"));o()},it=function(){f.log("menuHasBeenChanged");var t=$k10("."+n.menus).first().find("."+n.filterMayToggle).find("."+n.toggleInputMain+"[name='"+n.filterMay+"']").first();v(t,!0)};return{init:p,model:i,menuHasBeenChanged:it,clearFilter:u,toggleLabelsFilter2:r,close:k}}();k10=k10||{};k10.menuSelector=function(){var i=k10.tools.Debugger(!1,"menu-selector"),n={$allMenus:"",$menuSelector:"",$menuSelectorOptions:"",$menuSelectorBackButton:""},t={selectedMenuIdentifier:"",isFirstMenuSelected:!1},h=function(n){var o;i.log("render new menu");var h=$k10("<div/>",{html:n}),u=h.find(".tk-html-body .k10-menus"),r=t.selectedMenuIdentifier;t.selectedMenuIdentifier=u.attr("data-menu-identifier");f(r);r!==t.selectedMenuIdentifier&&e(u);s(t.selectedMenuIdentifier,r);i.log("menu has been changed - obtained by ajax");k10.menuSelector.publish("menuHasBeenChanged",t.selectedMenuIdentifier);k10.menuSelector.publish("spinnerStop");i.log("Ajax call Succeed!");k10.settings.IsClickedUrl=!0;k10.settings.mealPlanner&&!k10.settings.showBasket&&k10.menuSelector.publish("mpInit");k10.settings.showBasket&&k10.menuSelector.publish("basketInit");k10.settings.customScripts&&k10.customScripts.initCustomScripts();k10.settings.showVideo&&k10.tools.initVideo();k10.settings.ImageLazyLoad==!0&&typeof lozad=="function"&&(o=lozad(".k10-lozad",{loaded:function(n){n.classList.add("k10-lozad_loaded")}}),o.observe());k10.menuSelector.publish("menuUpdate")},c=function(n){var f,t,r,u,e,o;i.log("render new section");f=$k10(n.html);t=$k10('.k10-course[data-guid="'+n.sectionGuid+'"]');t.html(f.html());k10.settings.handleSelectedCourse&&($k10('.k10-course[data-status="loaded"]').addClass("k10-course_hidden"),r=$k10('.k10-course[data-status="loaded"]').find(".k10-recipe__info-img").first(),r.length>0&&t.find(".k10-recipe__info-img").attr("data-disc-count",r.attr("data-disc-count")),t.removeClass("k10-course_hidden"));t.attr("data-status","loaded");u=$k10('.k10-course-selector-item[data-guid="'+n.sectionGuid+'"]');u.attr("data-status","loaded");i.log("section has been rendered - obtained by ajax");i.log("Ajax call Succeed!");k10.settings.IsClickedUrl=!0;k10.settings.ImageLazyLoad==!0&&typeof lozad=="function"&&(e=lozad(".k10-lozad",{loaded:function(n){n.classList.add("k10-lozad_loaded")}}),e.observe());o={sectionGuid:n.sectionGuid,sectionSelector:u,sectionContainer:t};k10.menuSelector.publish("newSectionRendered",o)},l=function(){setTimeout(function(){k10.menuSelector.publish("spinnerStop")},300)},u=function(){var e;i.log("update menu");k10.settings.menuSelectorWithBack||r();var o=t.isFirstMenuSelected===!1&&k10.settings.menuSelectorWithBack,n=t.selectedMenuIdentifier,u=$k10('.k10-menus[data-menu-identifier="'+(o?"0":$k10(this).attr("data-menu-identifier"))+'"]');u.length===0?(k10.menuSelector.publish("spinnerStart"),k10.menuSelector.publish("menuSelected",$k10(this).attr("data-menu-identifier")),t.isFirstMenuSelected===!1&&(t.isFirstMenuSelected=!0)):u.length>=1&&(f(n),t.selectedMenuIdentifier=$k10(this).attr("data-menu-identifier"),s(t.selectedMenuIdentifier,n),i.log("menu has been changed - already exists at the client"),k10.menuSelector.publish("menuHasBeenChanged",t.selectedMenuIdentifier),k10.settings.mealPlanner&&!k10.settings.showBasket&&k10.menuSelector.publish("mpInit"),k10.settings.showBasket&&k10.menuSelector.publish("basketInit"),k10.settings.customScripts&&k10.customScripts.initCustomScripts(),k10.settings.showVideo&&k10.tools.initVideo(),k10.settings.ImageLazyLoad==!0&&typeof lozad=="function"&&(e=lozad(".k10-lozad",{loaded:function(n){n.classList.add("k10-lozad_loaded")}}),e.observe()),k10.menuSelector.publish("menuUpdate"))},f=function(n){k10.menuSelector.publish("colcade.destroy",{menuIdentifier:n})},e=function(n){if(n.find(".k10-popover-wrapper").remove(),n.find(".k10-popover-wrapper2").remove(),n.find(".k10-popover-wrapper3").remove(),n.find(".k10-popover-wrapper4").remove(),n.find(".k10-maintenance").remove(),n.find(".k10-toolbar__calorie-filter").remove(),$k10(".k10-hidden-menus").length===0)throw new Error(".k10-hidden-menus container is missing on the page");$k10(".k10-hidden-menus").append(n)},o=function(){var t=$k10(this).closest(".k10-course.k10-course_collapsible"),n;t.length>0&&(t.toggleClass("k10-course_collapsed"),n=t.find(".k10-l-body"),n.length>0&&(t.hasClass("k10-course_collapsed")?n.css("opacity",0).delay(333).slideUp("slow"):n.slideDown("slow",function(){n.css("opacity",1)})))},s=function(n,t){var nt,i,v,tt,it,r,y,p,w,b,u,f,e,s,k,h,c,rt,d,l,g,a,ut;if(k10.settings.MenuGuid=n,k10.settings.hideMenuEmptyElements==!0&&($k10(".k10-menu__empty").show(),k10.settings.isMenuEmpty=$k10(".k10-hidden-menus .k10-menus[data-menu-identifier='"+n+"']").attr("data-menu-isempty")=="true"),k10.settings.handleSelectedCourse&&(nt=$k10(".k10-menus[data-menu-identifier='"+n+"'] .k10-course").first().attr("data-menu-section-identifier"),k10.settings.showAllCourse?$k10(".k10-course[data-menu-identifier='"+n+"']").removeClass("k10-course_hidden"):($k10(".k10-course[data-menu-identifier='"+n+"']:not(.k10-course_level2)").addClass("k10-course_hidden"),$k10(".k10-course[data-menu-identifier='"+n+"'][data-menu-section-identifier='"+nt+"']").removeClass("k10-course_hidden")),setTimeout(function(){k10.menuSelector.publish("colcade.reInitWithHiddenItems")},500)),k10.settings.tableLayout?($k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-all-courses_desktop').first().html($k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-all-courses_desktop').html()),$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-all-courses_mobile').first().html($k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-all-courses_mobile').html())):$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-all-courses').first().html($k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-all-courses').html()),$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-dietary').first().html($k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-dietary').html()),$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-menu-selector__name').length>0&&$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-menu-selector__name').first().html($k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-menu-selector__name').html()),$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-menu-section-selector').length>0&&(i=$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-menu-section-selector').first(),i.html($k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-menu-section-selector').html()),i.find(".k10-menu-section-selector__options-li:not(.k10-menu-section-selector__options-li_l2)").removeClass("k10-menu-section-selector__options-li_current-menu-section"),v=i.find(".k10-menu-section-selector__options-li").first(),v.addClass("k10-menu-section-selector__options-li_current-menu-section"),tt=i.find(".k10-menu-section-selector__options-li_l2[data-parent-menu-section-identifier='"+v.attr("data-menu-section-identifier")+"']").first(),tt.addClass("k10-menu-section-selector__options-li_current-menu-section"),it=$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-course_first-level').addClass("k10-course_hidden"),it.first().removeClass("k10-course_hidden")),$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-recipe-cards').length>0&&($k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-recipe-card').addClass("k10-recipe-card_hidden"),$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-recipe-cards').first().html($k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-recipe-cards').html())),r=$k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-toolbar__menu-pdf, .k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-sidebar__menu-pdf'),r.length>0&&$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-toolbar__menu-pdf, .k10-menus[data-menu-identifier="'+t+'"] .k10-sidebar__menu-pdf').first().html(r.html()).attr("class",r.attr("class")),y=$k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-toolbar__menu-name'),y.length>0&&$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-toolbar__menu-name').first().html(y.html()),k10.settings.labelsTags&&(p=$k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-labels-filter__menu-name'),p.length>0&&$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-labels-filter__menu-name').first().html(p.html())),w=$k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-toolbar__menu-selector'),w.length>0&&$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-toolbar__menu-selector').first().attr("class",w.attr("class")),b=$k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-toolbar__label-filters2'),b.length>0&&$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-toolbar__label-filters2').first().attr("class",b.attr("class")),u=$k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-toolbar__menu-desc:not(.k10-toolbar__menu-desc_mobile)'),u.length>0&&$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-toolbar__menu-desc:not(.k10-toolbar__menu-desc_mobile)').first().html(u.html()).attr("class",u.attr("class")),f=$k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-toolbar__menu-subheadings'),f.length>0&&$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-toolbar__menu-subheadings').first().html(f.html()).attr("class",f.attr("class")),e=$k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-toolbar__menu-subheading1'),e.length>0&&$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-toolbar__menu-subheading1').first().html(e.html()).attr("class",e.attr("class")),s=$k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-toolbar__menu-subheading2'),s.length>0&&$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-toolbar__menu-subheading2').first().html(s.html()).attr("class",s.attr("class")),k=$k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-toolbar__menu-image'),k.length>0&&$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-toolbar__menu-image').first().attr("style",k.attr("style")),h=$k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-toolbar__menu-image-wrapper'),h.length>0&&$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-toolbar__menu-image-wrapper').first().html(h.html()).attr("class",h.attr("class")),c=$k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-toolbar__functional, .k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-sidebar__functional'),c.length>0&&$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-toolbar__functional, .k10-menus[data-menu-identifier="'+t+'"] .k10-sidebar__functional').first().html(c.html()).attr("class",c.attr("class")),rt=$k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-toolbar__content-mobile'),rt.length>0&&(d=$k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-toolbar__content-mobile .k10-toolbar__menu-name'),d.length>0&&$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-toolbar__content-mobile .k10-toolbar__menu-name').first().html(d.html()),l=$k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-toolbar__content-mobile .k10-toolbar__menu-desc'),l.length>0&&$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-toolbar__content-mobile .k10-toolbar__menu-desc').first().html(l.html()).attr("class",l.attr("class")),g=$k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-toolbar__content-mobile .k10-toolbar__menu-image'),g.length>0&&$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-toolbar__content-mobile .k10-toolbar__menu-image').first().attr("style",g.attr("style"))),$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-toolbar__social-media').length>0&&$k10('.k10-menus[data-menu-identifier="'+t+'"] .k10-toolbar__social-media').first().html($k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"] .k10-toolbar__social-media').html()),$k10('.k10-menus[data-menu-identifier="'+t+'"]').first().attr("data-menu-identifier",n).attr("data-file-name",$k10('.k10-hidden-menus .k10-menus[data-menu-identifier="'+n+'"]').attr("data-file-name")),$k10('.k10-menu-selector__options-li[data-menu-identifier="'+t+'"]').removeClass("k10-menu-selector__options-li_current-menu"),$k10('.k10-menu-selector__options-li[data-menu-identifier="'+n+'"]').addClass("k10-menu-selector__options-li_current-menu"),$k10(".k10-menu-selector__option-name").length>0&&typeof k10.settings.bindMenuSelectorEvents!="undefined"&&k10.settings.bindMenuSelectorEvents===!0){a=window.getComputedStyle($k10(".k10-menu-selector__option-name_active")[0],":after").getPropertyValue("content").replace(/(\")/gi,"");ut=$k10(".k10-menus[data-menu-identifier='"+n+"']");a!=="none"&&a!==""&&ut.attr("class","k10-menus k10-menus_"+a);$k10(".k10-menus[data-menu-identifier='"+n+"'] .k10-course__name").off("click",o);$k10(".k10-menus[data-menu-identifier='"+n+"'] .k10-course__name").on("click",o)}k10.settings.mealPlanner&&!k10.settings.showBasket&&k10.menuSelector.publish("mpInit");k10.settings.showBasket&&k10.menuSelector.publish("basketInit")},r=function(){var t=!0;typeof k10.settings.menuCount!="undefined"&&k10.settings.menuCount==1&&(t=!1);t==!0&&(n.$menuSelector.toggleClass("k10-menu-selector_open"),n.$menuSelector.find(".k10-menu-selector__name").toggleClass("k10-menu-selector__name_opened"),n.$menuSelector.find(".k10-menu-selector__options").toggleClass("k10-menu-selector__options_opened"),k10.menuSelector.publish("toggleMenuSelector"))},a=function(t){var i=$k10(t.target).closest(".k10-menu-selector__options").length,u=$k10(t.target).closest(".k10-menu-selector__panel").length;i||u||n.$menuSelector.hasClass("k10-menu-selector_open")&&r()},v=function(){$k10(this).addClass("k10-toolbar__back-to-menu-selector_hidden");$k10(".k10-all-courses").addClass("k10-all-courses_hidden");$k10(".k10-toolbar__menu-selector").removeClass("k10-toolbar__menu-selector_hidden");$k10(".k10-toolbar__menu-container").addClass("k10-toolbar__menu-container_hidden");$k10(".k10-toolbar__label-filters").addClass("k10-toolbar__label-filters_hidden");k10.settings.courseSelector&&$k10(".k10-toolbar").addClass("k10-toolbar_hidden")},y=function(){n.$allMenus.on("click",a);n.$menuSelectorOptions.on("click",".k10-menu-selector__options-li",u);n.$menuSelectorOptions.on("click",".k10-menu-selector__option-name",u);if(k10.settings.menuSelectorWithBack)n.$menuSelectorBackButton.on("click",v);else n.$menuSelector.on("click",".k10-menu-selector__panel",r)},p=function(){i.log("init");n.$allMenus=$k10(".k10-menus");n.$menuSelector=$k10(".k10-menu-selector");n.$menuSelectorOptions=$k10(".k10-menu-selector__options");n.$menuSelectorBackButton=$k10(".k10-toolbar__back-to-menu-selector");t.selectedMenuIdentifier=n.$allMenus.attr("data-menu-identifier");y();e($k10(".k10-menus").clone());k10.menuSelector.publish("colcade.reInit")};return{init:p,renderNewMenu:h,renderNewSection:c,newSectionRendered:l}}();k10=k10||{};k10.filter=function(){var t=function(n,t){n&&t.fltByLbl&&(t.fltByLbl=!1);n||t.fltByLbl||(t.fltByLbl=!0)},u=function(n,t){n&&t.fltByCal&&(t.fltByCal=!1);n||t.fltByCal||(t.fltByCal=!0)},o=function(n,t){n&&t.fltByCat&&(t.fltByCat=!1);n||t.fltByCat||(t.fltByCat=!0)},f=function(n,t){n&&t.fltByFp&&(t.fltByFp=!1);n||t.fltByFp||(t.fltByFp=!0)},s=function(n,t){n&&t.fltBySec&&(t.fltBySec=!1);n||t.fltBySec||(t.fltBySec=!0)},h=function(n,t){n&&t.fltBySearch&&(t.fltBySearch=!1);n||t.fltBySearch||(t.fltBySearch=!0)},n=function(n,t){if(n.isVisible=!n.fltByLbl&&!n.fltByCal&&!n.fltByCat&&!n.fltByFp&&!n.fltBySec&&!n.fltBySearch,n.fltByMay=!1,typeof n.mayLabelsIds!="undefined"){var i=n.mayLabelsIds.filter(function(n){return t.allergenFor.indexOf(n)!==-1});n.fltByMay=i.length>0}},i=function(n,t){var i=!0;if(typeof t.allergenFor=="undefined"&&typeof t.suitableFor=="undefined")return i;var r=n.filter(function(n){return t.suitableFor.indexOf(n)!==-1}),u=r.length>0,f=n.filter(function(n){return t.allergenFor.indexOf(n)!==-1}).length>0;return(t.suitableFor.length&&!u||t.allergenFor.length&&f)&&(i=!1),t.suitableFor.length!==r.length&&u&&i&&(i=!1),i},r=function(n,t){function e(n){var i=parseFloat(typeof n=="undefined"?NaN:n.toString().replace(/,/g,""));return isNaN(i)?k10.settings.hideEmptyCalRecipes?!1||k10.calorieFilter.model.maxMinCalorieValue[0]===t[0]&&k10.calorieFilter.model.maxMinCalorieValue[1]===t[1]:!0:k10.calorieFilter.model.maxMinCalorieValue[1]===t[1]?i>=t[0]:i>=t[0]&&i<=t[1]}var u=!0,o=n.calories!=null?n.calories.toString().indexOf("|")!==-1:!1,f,i,r;if(o){for(f=n.calories.toString().split("|"),i=0,r=0;r<f.length;r++)i=e(f[r])?i+1:i;u=i>0}else u=e(n.calories);return u},c=function(n,t,i){var s=!0,e,f,l,h,o,c,r,u;if(t.length===0)s=!0;else{if(e=0,i==="OrOr"){for(r=0;r<t.length;r++)for(u=0;u<n.categoriesIds.length;u++)t[r].id===n.categoriesIds[u]&&e++;s=e>0}if(i==="OrAnd"){for(f=[],l=function(n){this.id=n;this.childs=[]},r=0;r<t.length;r++){for(h=!1,u=0;u<f.length;u++)if(f[u].id===t[r].parentId){h=!0;break}h===!1&&f.push(new l(t[r].parentId))}for(r=0;r<t.length;r++)for(u=0;u<f.length;u++)if(f[u].id===t[r].parentId){f[u].childs.push(t[r].id);break}for(o=0;o<f.length;o++){for(c=0,r=0;r<f[o].childs.length;r++)for(u=0;u<n.categoriesIds.length;u++)f[o].childs[r]===n.categoriesIds[u]&&c++;e=e+(c>0?1:0)}s=e===f.length}}return s},e=function(n,t){var i=!0,r;return y.log("_shouldRecipeBeShownByFoodPrintGrades",n),t.length===0?i=!0:(r=t.filter(function(t){return n.fpGradeName.indexOf(t)!==-1}).length,i=r>0),i},l=function(n,t){var r=!0,u,i;if(t.length===0)r=!0;else{for(u=!1,i=0;i<t.length;i++)t[i].id===n.sectionId&&(u=!0);r=u}return r},a=function(n,t){var r=!0,u,f,i;if(t.length===0)r=!0;else if(n.searchName.indexOf(";*;")!==-1){for(r=!1,u=n.searchName.split(";*;"),i=0;i<u.length;i++)if(u[i].indexOf(t)!==-1){r=!0;break}}else if(t.indexOf(";")!==-1)for(f=t.split(";"),i=0;i<f.length;i++)r=r&&n.searchName.indexOf(f[i])!==-1;else r=n.searchName.indexOf(t)!==-1;return r},v=function(t,i,r){var o,u;if(t.recipeSizes.length>0)for(o=0;o<t.recipeSizes.length;o++)u=t.recipeSizes[o],u.isVisible=!0,f(e(u,r),u),n(u,i)},p=function(f,e){var v=k10.calorieFilter.model.selectedCalorieValue,y=k10.categoryFilter.model.selectedCategories,p=k10.sectionFilter.model.selectedSections,w=k10.search.model.searchName;$k10.each(f,function(f,b){b.isInfoRecipe==!0?(b.isVisible=!0,b.fltByMay=!1):(t(i(b.labelsIds,e),b),u(r(b,v),b),o(c(b,y,k10.settings.сategoryFilterLogic?k10.settings.сategoryFilterLogic:"OrAnd"),b),s(l(b,p),b),h(a(b,w),b),n(b,e))})},w=function(p,w){var ut,b,ft,et,g,k,rt,ot,nt,tt,d;y.log("k10.filter.staticWithByoA1");var st=k10.calorieFilter.model.selectedCalorieValue,ht=k10.categoryFilter.model.selectedCategories,ct=k10.sectionFilter.model.selectedSections,it=k10.foodPrintFilter.getSelectedGrades(),lt=k10.search.model.searchName;for(ut=0;ut<p.length;ut++)if(b=p[ut],b.isVisible=!0,b.isInfoRecipe)b.isVisible=!0,b.fltByMay=!1;else if(b.isByo==!0){if(b.coreItemIsFiltered=!1,b.inclusiveOptionsItemIsFiltered=!1,b.dietaryOptionItemIsVisible=!1,b.allModifierChoicesFiltered=!1,b.allRootItemsFiltered=!1,ft=0,b.rootByoItems.length>0){for(et=0,d=0;d<b.rootByoItems.length;d++)g=b.rootByoItems[d],g.isInfoRecipe?(g.isVisible=!0,g.fltByMay=!1):(t(i(g.labelsIds,w),g),f(e(g,it),g),v(g,w,it),n(g,w),g.isVisible==!1?g.isCore==!0&&(b.coreItemIsFiltered=!0):et++);et==0&&(b.allRootItemsFiltered=!0)}else b.allRootItemsFiltered=!1;for(d=0;d<b.sections.length;d++)if(k=b.sections[d],rt=0,k.allItemsIsFiltered=!1,k.isVisible=!0,k.rootByoItems.length>0){for(ot=0,tt=0;tt<k.rootByoItems.length;tt++)nt=k.rootByoItems[tt],nt.isInfoRecipe?(nt.isVisible=!0,nt.fltByMay=!1):(ot++,t(i(nt.labelsIds,w),nt),f(e(nt,it),nt),v(nt,w,it),n(nt,w),nt.isVisible==!1?nt.isCore==!0&&(b.coreItemIsFiltered=!0):rt++);if(rt==0)for(k.allItemsIsFiltered=!0,k.isVisible=!1,ft++,tt=0;tt<k.rootByoItems.length;tt++)k.rootByoItems[tt].isVisible=!1;k.byoType=="inclusiveoptions"&&ot!=rt&&(b.inclusiveOptionsItemIsFiltered=!0);k.byoType=="modifierchoices"&&rt==0&&(b.allModifierChoicesFiltered=!0);k.byoType=="dietaryoptions"&&rt>0&&(b.dietaryOptionItemIsVisible=!0)}else k.isVisible=!1,ft++;if(b.coreItemIsFiltered==!0&&(b.isVisible=!1),b.isVisible==!0&&b.inclusiveOptionsItemIsFiltered==!0&&(b.isVisible=!1),b.isVisible==!0&&b.allModifierChoicesFiltered==!0&&(b.isVisible=!1),b.isVisible==!0&&b.dietaryOptionItemIsVisible==!0&&(b.allRootItemsFiltered=!1,b.rootByoItems.length>0))for(d=0;d<b.rootByoItems.length;d++)b.rootByoItems[d].isVisible=!0;b.isVisible==!0&&b.allRootItemsFiltered==!0&&(b.isVisible=!1);b.isVisible==!0&&b.sections.length==ft&&b.rootByoItems.length==0&&(b.isVisible=!1)}else t(i(b.labelsIds,w),b),u(r(b,st),b),o(c(b,ht,"OrAnd"),b),f(e(b,it),b),s(l(b,ct),b),h(a(b,lt),b),v(b,w,it),n(b,w)},b=function(v,p){var tt,w,it,ft,b,g,d,et,ot,k,nt;y.log("k10.filter.staticWithByoA2");var rt=k10.calorieFilter.model.selectedCalorieValue,st=k10.categoryFilter.model.selectedCategories,ht=k10.sectionFilter.model.selectedSections,ut=k10.foodPrintFilter.getSelectedGrades(),ct=k10.search.model.searchName;for(tt=0;tt<v.length;tt++)if(w=v[tt],w.isVisible=!0,w.isInfoRecipe)w.isVisible=!0,w.fltByMay=!1;else if(w.isByo==!0){if(w.coreItemIsFiltered=!1,w.inclusiveOptionsItemIsFiltered=!1,w.dietaryOptionItemIsVisible=!1,w.allModifierChoicesFiltered=!1,w.allRootItemsFiltered=!1,it=0,w.rootByoItems.length>0){for(ft=0,g=0;g<w.rootByoItems.length;g++)b=w.rootByoItems[g],b.isInfoRecipe?(b.isVisible=!0,b.fltByMay=!1):(t(i(b.labelsIds,p),b),f(e(b,ut),b),u(r(b,rt),b),n(b,p),b.isVisible==!1?b.isCore==!0&&(w.coreItemIsFiltered=!0):ft++);ft==0&&(w.allRootItemsFiltered=!0)}else w.allRootItemsFiltered=!1;for(g=0;g<w.sections.length;g++)if(d=w.sections[g],et=0,d.allItemsIsFiltered=!1,d.isVisible=!0,d.rootByoItems.length>0){for(ot=0,nt=0;nt<d.rootByoItems.length;nt++)k=d.rootByoItems[nt],k.isInfoRecipe?(k.isVisible=!0,k.fltByMay=!1):(ot++,t(i(k.labelsIds,p),k),f(e(k,ut),k),u(r(k,rt),k),n(k,p),k.isVisible==!1?k.isCore==!0&&(w.coreItemIsFiltered=!0):et++);if(et==0)for(d.allItemsIsFiltered=!0,d.isVisible=!1,it++,nt=0;nt<d.rootByoItems.length;nt++)d.rootByoItems[nt].isVisible=!1}else d.isVisible=!1,it++;w.coreItemIsFiltered==!0&&(w.isVisible=!1);w.isVisible==!0&&w.allRootItemsFiltered==!0&&(w.isVisible=!1);w.isVisible==!0&&w.sections.length==it&&w.rootByoItems.length==0&&(w.isVisible=!1)}else t(i(w.labelsIds,p),w),u(r(w,rt),w),o(c(w,st,"OrAnd"),w),f(e(w,ut),w),s(l(w,ht),w),h(a(w,ct),w),n(w,p)},k=function(f,e){k10.settings.filterFuncName="k10.filter.simpleWithByo";var v=k10.calorieFilter.model.selectedCalorieValue,y=k10.categoryFilter.model.selectedCategories,p=k10.sectionFilter.model.selectedSections,w=k10.search.model.searchName;$k10.each(f,function(f,b){var k,d;b.isInfoRecipe?(b.isVisible=!0,b.fltByMay=!1):b.isRecipe?(t(i(b.labelsIds,e),b),u(r(b,v),b),b.isByoRecipe||(o(c(b,y,"OrAnd"),b),s(l(b,p),b),h(a(b,w),b)),n(b,e)):b.isByo&&(b.coreRecipes.length===0&&b.optionRecipes.length===0||(k=!1,$k10.each(b.coreRecipes,function(n,t){if(i(t.labelsIds,e)===!1)return k=!0,!0}),k===!1&&b.coreRecipes.length===0&&(d=0,$k10.each(b.optionRecipes,function(n,t){i(t.labelsIds,e)===!1&&d++}),k=d===b.optionRecipes.length&&d>0),t(!k,b),k10.settings.showCalorieFilter&&!k&&($k10.each(b.coreRecipes,function(n,t){if(r(t,v)===!1)return k=!0,!0}),k===!1&&b.coreRecipes.length===0&&(d=0,$k10.each(b.optionRecipes,function(n,t){r(t,v)===!1&&d++}),k=d===b.optionRecipes.length&&d>0),u(!k,b)),o(c(b,y,"OrAnd"),b),s(l(b,p),b),h(a(b,w),b),n(b,e)))})},d=function(r,u){$k10.each(r,function(r,f){var e;if(f.isInfoRecipe==!0&&f.isByoRecipe==!1)f.isVisible=!0,f.fltByMay=!1;else{if(e=i(f.labelsIds,u),f.isByoRecipe)if(e){var o=!1,s=0,c=0,h=0;$k10.each(f.subByos,function(r,f){var e=0,l;f.choiceRecipes.length>0&&c++;$k10.each(f.coreRecipes,function(n,t){i(t.labelsIds,u)===!1&&(o=!0)});$k10.each(f.choiceRecipes,function(n,t){i(t.labelsIds,u)===!1&&e++});l=f.choiceRecipes.length>0&&f.choiceRecipes.length===e;o===!1&&l===!1?($k10.each(f.coreRecipes,function(r,f){t(i(f.labelsIds,u),f);n(f,u)}),$k10.each(f.choiceRecipes,function(r,f){t(i(f.labelsIds,u),f);n(f,u)}),$k10.each(f.optionRecipes,function(r,f){t(i(f.labelsIds,u),f);n(f,u)})):($k10.each(f.coreRecipes,function(i,r){t(!1,r);n(r,u)}),$k10.each(f.choiceRecipes,function(i,r){t(!1,r);n(r,u)}),$k10.each(f.optionRecipes,function(i,r){t(!1,r);n(r,u)}),f.isVisible=!1,h++);f.isVisible===!1&&s++});f.subByos.length>0&&h!==0&&h==c&&($k10.each(f.subByos,function(i,r){$k10.each(r.coreRecipes,function(i,r){t(!1,r);n(r,u)});$k10.each(r.choiceRecipes,function(i,r){t(!1,r);n(r,u)});$k10.each(r.optionRecipes,function(i,r){t(!1,r);n(r,u)});r.isVisible=!1}),s=f.subByos.length);e=!(s===f.subByos.length&&f.subByos.length>0||o)}else $k10.each(f.subByos,function(i,r){$k10.each(r.coreRecipes,function(i,r){t(!1,r);n(r,u)});$k10.each(r.choiceRecipes,function(i,r){t(!1,r);n(r,u)});$k10.each(r.optionRecipes,function(i,r){t(!1,r);n(r,u)});r.isVisible=!1});t(e,f);n(f,u)}})},y=k10.tools.Debugger(!0,"filter");return{simple:p,fullers:d,simpleWithByo:k,staticWithByoA1:w,staticWithByoA2:b}}();k10=k10||{};k10.settings=k10.settings||{};k10.settings.HideZeroPrice=!1;k10.settings.showPrice=!1;k10.settings.showCurSymb=!1;k10.settings.ExpandDietaryFilter=!1;k10.settings.ShowNutrients=!1;k10.settings.ShowNutrientsPer100g=!1;k10.settings.ShowPrimaryNutrients=!1;k10.settings.ShowTrafficLight=!1;k10.settings.ShowFoodPrint=!1;k10.settings.IsEnergyPrimaryNutrient=!1;k10.settings.EnergyNutrientsPrefix="";k10.settings.EnergyNutrientsPostfix="";k10.settings.byoNewStructure=!1;k10.settings.modalByoFun=!1;k10.settings.handleMayLabelsInByo=!1;k10.settings.byoFilterIdentifiers=!1;k10.settings.CurrencySymbol="";k10.settings.HideEmptySections=!1;k10.settings.MenuIsActive=!1;k10.settings.OrganisationGuid="";k10.settings.BaseMenuUrl="";k10.settings.SkinImagePath="";k10.settings.MenuGuid="";k10.settings.ZooMenuGuid="";k10.settings.StatFileName="";k10.settings.SiteCode="";k10.settings.UnitCode="";k10.settings.SectionView="";k10.settings.SectionLazyLoad=!1;k10.settings.ImageLazyLoad=!1;k10.settings.popoverDisableOnHiddenItems=!1;k10.settings.popoverInit=function(){};k10.settings.Placement="top";k10.settings.IsClickedUrl=!1;k10.settings.menuSelector=!1;k10.settings.menuSelectorWithBack=!1;k10.settings.showLabelFilter=!0;k10.settings.calcFooter=!1;k10.settings.initScrollFilter=!1;k10.settings.recipeInfo=!1;k10.settings.modalFunc=!1;k10.settings.course=!1;k10.settings.showVideo=!1;k10.settings.BaseImageUrl="";k10.settings.showCalorieFilter=!1;k10.settings.showSectionFilter=!1;k10.settings.showCategoryFilter=!1;k10.settings.handleOutsideClicksForFilters=!0;k10.settings.showSearch=!1;k10.settings.hideSectionsOnFilter=!1;k10.settings.recipesPerPage=14;k10.settings.mealPlanner=!1;k10.settings.showSectionsInMealPlan=!1;k10.settings.maxMealPlanItems=20;k10.settings.showBasket=!1;k10.settings.mealPlannerShowTotalAsSeparateTable=!1;k10.settings.mealPlannerAllowMultipleEntries=!1;k10.settings.hasMayContain=!1;k10.settings.includeMayContain=!1;k10.settings.grid=!1;k10.settings.colcadeAnimate=!1;k10.settings.showSupplier=!1;k10.settings.oneServiceUnitId=-1;k10.settings.sectionFilter=!1;k10.settings.courseSelector=!1;k10.settings.pdfAdviceByTmpl=!0;k10.settings.hideFilteredRecipe=!1;k10.settings.menuCount=0;k10.settings.showFilterAlert=!1;k10.settings.showFilterAlertDrawn=!1;k10.settings.hideMenuEmptyElements=!1;k10.settings.isMenuEmpty=!1;k10.settings.filterFunc=null;k10.settings.filterFuncName="";k10.settings.filterRecipesFunc=null;k10.settings.filterRecipesSeparated=!1;k10=k10||{};k10.popover=function(){function g(){(k10.settings.popoverPrimaryLabel==!0||k10.settings.iconLabels==!0)&&a(k10.settings.popoverInit)}var t={},i,n=k10.className,r={mp:["k10-meal-planner__menu-item-remove-btn","k10-meal-planner__grand-total-info-icon","k10-meal-planner__menu-item-info","k10-meal-planner__menu-item-calorie-icon","k10-meal-planner__menu-item-dsPercentage-icon"],basket:["k10-basket__menu-item-remove-btn","k10-basket__grand-total-info-icon","k10-basket__menu-item-info","k10-basket__menu-item-calorie-icon","k10-basket__menu-item-dsPercentage-icon"]},v=function(){$k10(this).popover("destroy")},o=function(t){var r=t.closest("."+n.byoItem),i;r.length==0&&(r=t.closest("."+n.recipe));i=r.find("."+n.byoItemPopoverTooltip);i.length==0&&(i=r.find("."+n.recipePopoverTooltip));i.length>0?i.parent().find(".popover.in").popover("hide"):t.popover("hide")},u=function(i){var r,u;t.log("_hideOtherPopovers '"+i.data.type+"'");r=$k10(i.target).closest("."+n.byoItemPopoverTooltip);r=r.length==0?$k10(i.target).closest("."+n.recipePopoverTooltip):r;r=r.length==0?$k10(i.target).closest("."+n.popoverLabel):r;r.length>0?(u=$k10(".popover.in[id!='"+r.attr("aria-describedby")+"']"),u.length&&u.each(function(){var n=$k10(this);o(n)})):$k10(".popover.in").popover("hide");$k10(".k10-popover-wrapper > .popover, .k10-popover-wrapper3 > .popover").popover("hide")},s=function(){t.log("_hideCurrentPopover");var n=$k10(this),i=n.closest(".popover");o(i)},h=function(n){$k10(n.target).data("bs.popover").inState={click:!1,hover:!1,focus:!1}},c=function(t){var i=$k10(t.target),s=i.hasClass(n.popoverClose),f;s&&i.closest(".popover").popover("hide");var h=i.hasClass(n.recipePopoverTooltip),c=i.hasClass(n.byoItemPopoverTooltip),l=i.hasClass(n.recipeInfoImg),a=i.hasClass(n.byoItemInfoImg),v=i.hasClass(n.byoItemPrimaryLabelImg),e=i.hasClass(n.recipePrimaryLabelImg),y=i.hasClass(n.filterMayInfoIcon),p=i.closest(".popover").length==0,o=i.attr("class"),w=r.mp.indexOf(o)>-1,b=r.basket.indexOf(o)>-1;h||c||l||a||v||e||y||w||b||!p?e&&(f=$k10("."+n.popoverClose),f.length>0&&f.closest(".popover").popover("hide")):(t.data={type:"outside click",target:t.target},u(t))},l=function(t){return k10.settings.popoverDisableOnHiddenItems==!0&&$k10(t.target).closest("."+n.byoItem).hasClass(n.byoItemHidden)==!0?!1:k10.settings.popoverDisableOnHiddenItems==!0&&$k10(t.target).closest("."+n.recipe).hasClass(n.recipeHidden)==!0?!1:window.innerWidth<1140&&($k10(t.target).hasClass(n.recipeInfoImg)||$k10(t.target).hasClass(n.byoItemInfoImg)||$k10(t.target).hasClass(n.recipeAddCalories)||$k10(t.target).hasClass(n.recipeNutrientsButton))?!1:!0},f=function(){$k10("body").on("hidden.bs.popover",h);$k10("."+n.recipePopoverTooltip).on("click",{type:"tooltip click"},u);$k10("."+n.byoItemPopoverTooltip).on("click",{type:"tooltip click"},u);$k10("."+n.menus).on("click","."+n.popoverClose,s);$k10("body").on("show.bs.popover",l);$k10("body").on("click",c)},e=function(){$k10("body").off("hidden.bs.popover",h);$k10("."+n.recipePopoverTooltip).off("click",{type:"tooltip click"},u);$k10("."+n.byoItemPopoverTooltip).off("click",{type:"tooltip click"},u);$k10("."+n.menus).off("click","."+n.popoverClose,s);$k10("body").off("show.bs.popover",l);$k10("body").off("click",c)},y=function(){e();f();var i="."+n.recipePopoverTooltip+",."+n.byoItemPopoverTooltip;$k10(i).each(function(){var t=$k10(this),r="auto",u=t.attr("data-k10-nutrients-recipe-size-id"),f=t.attr("data-k10-popover-guid"),e=t.attr("data-k10-trigger"),i=t.closest("."+n.byoItem);if(i.length==0&&(i=t.closest("."+n.recipe)),t.popover({html:!0,content:i.find("."+n.popover+(typeof u=="undefined"?"":"[data-k10-nutrients-recipe-size-id='"+u+"']")+(typeof f=="undefined"?"":"[data-k10-popover-guid='"+f+"']")).outerHtml(),placement:typeof r=="undefined"?"auto":r,trigger:typeof e=="undefined"?"click":e}),k10.settings.handlePopoversOnScroll&&$k10(".k10-menus").width()>$k10(window).width())t.on("shown.bs.popover",function(){var l=$k10(this),t=$k10("#"+l.attr("aria-describedby")),o=$k10(document).find("."+n.recipePopoverTooltip+"[aria-describedby='"+l.attr("aria-describedby")+"']"),u=o.offset().top,i=o.offset().left,h=o.outerHeight(),s=o.outerWidth(),c="top",f=t.outerHeight(),r=t.outerWidth(),e=11,a=$k10(window).width();c=(i+4<r/2||i-r/2<0&&u-f<20)&&e+r<a-(i+s)?"right":i+r/2>a-4?"left":u-f<20?"bottom":"top";t.removeClass("top right left bottom");t.addClass(c);switch(c){case"left":t.offset({top:u-f/2+h/2,left:i-e-r});t.find(".arrow").css("left","");break;case"right":t.offset({top:u-f/2+h/2,left:i+s+e});t.find(".arrow").css("left","");break;case"top":i-r/2>0?t.offset({top:u-f-e+1,left:i-r/2+s/2}):t.offset({top:u-f-e,left:0});t.find(".arrow").css("top","");t.find(".arrow").css("left","50%");break;case"bottom":t.offset({top:u+h+e,left:i-r/2+s/2});t.find(".arrow").css("top","");t.find(".arrow").css("left","50%")}t.css("opacity","1")})});$k10("body").on("shown.bs.popover","."+n.recipePopoverTooltip,function(){t.log("span: shown.bs.popover");var i=$k10(".popover.in, .k10-popover").find("."+n.popoverLabel);i.length&&i.popover()});$k10("body").on("shown.bs.popover","."+n.byoItemPopoverTooltip,function(){t.log("span: shown.bs.popover");var i=$k10(".popover.in, .k10-popover").find("."+n.popoverLabel);i.length&&i.popover()});$k10("."+n.recipeInfoImg).popover();$k10("."+n.byoItemInfoImg).popover();typeof $k10("."+n.filterMayInfoIcon)!="undefined"&&typeof $k10("."+n.filterMayInfoIcon).attr("data-tk-popover")!="undefined"&&$k10("."+n.filterMayInfoIcon).popover();typeof $k10("."+n.recipeAddCalories)!="undefined"&&typeof $k10("."+n.recipeAddCalories).attr("data-tk-popover")!="undefined"&&$k10("."+n.recipeAddCalories).popover();typeof $k10("."+n.recipeNutrientsButton)!="undefined"&&typeof $k10("."+n.recipeNutrientsButton).attr("data-tk-popover")!="undefined"&&$k10("."+n.recipeNutrientsButton).popover();$k10("."+n.recipePrimaryLabelImg).each(function(){var n=$k10(this);n.popover()});$k10("."+n.popoverLabel).popover();k10.settings.mealPlanner&&!k10.settings.showBasket&&$k10.each(r.mp,function(n){$k10("."+r.mp[n]).each(function(){var n=$k10(this);n.popover({html:!0})})});k10.settings.showBasket&&$k10.each(r.basket,function(n){$k10("."+r.basket[n]).each(function(){var n=$k10(this);n.popover({html:!0})})})},p=function(){$k10("."+n.recipeInfoImg).popover();$k10("."+n.byoItemInfoImg).popover();typeof $k10("."+n.filterMayInfoIcon)!="undefined"&&typeof $k10("."+n.filterMayInfoIcon).attr("data-tk-popover")!="undefined"&&$k10("."+n.filterMayInfoIcon).popover();e();f();var t="."+n.recipePopoverTooltip+",."+n.byoItemPopoverTooltip;$k10(t).each(function(){var t=$k10(this),i=t.closest("."+n.byoItem);i.length==0&&(i=t.closest("."+n.recipe));t.popover({html:!0,content:i.find("."+n.popover).outerHtml(),placement:k10.settings.Placement,container:t});t.on("shown.bs.popover",function(){var s=$k10(this),t=$k10("#"+s.attr("aria-describedby")),f=s.find("."+n.byoItemInfoImg),a;f.length==0&&(f=s.find("."+n.recipeInfoImg));var u=f.offset().top,i=f.offset().left,l=f.outerHeight(),h=f.outerWidth(),c=s.attr("data-k10-placement"),e=t.outerHeight(),r=t.outerWidth(),o=11;t.removeClass("top right left bottom");c==="smart"&&(a=$k10(window).width(),c=(i+4<r/2||i-r/2<0&&u-e<20)&&o+r<a-(i+h)?"right":i+r/2>a-4?"left":u-e<20?"bottom":"top");t.addClass(c);switch(c){case"left":t.offset({top:u-e/2+l/2,left:i-o-r});t.find(".arrow").css("left","");break;case"right":t.offset({top:u-e/2+l/2,left:i+h+o});t.find(".arrow").css("left","");break;case"top":i-r/2>0?t.offset({top:u-e-o+1,left:i-r/2+h/2}):t.offset({top:u-e-o,left:0});t.find(".arrow").css("top","");break;case"bottom":t.offset({top:u+l+o,left:i-r/2+h/2});t.find(".arrow").css("top","")}t.css("opacity","1");$k10("."+n.popoverLabelWrapper).on("mouseenter",function(){$k10(this).find("."+n.popoverLabel).popover("show")}).on("mouseleave",function(){$k10(this).find("."+n.popoverLabel).popover("hide")})})})},w=function(){$k10(".k10-labels__label").popover();typeof $k10("."+n.filterMayInfoIcon)!="undefined"&&typeof $k10("."+n.filterMayInfoIcon).attr("data-tk-popover")!="undefined"&&$k10("."+n.filterMayInfoIcon).popover();e();f()},b=function(){t.log("init popover by function '"+i.name+"' after menu has been changed");i()},k=function(){t.log("init popover by function '"+i.name+"' after meal planner has been changed");i()},d=function(){t.log("init popover by function '"+i.name+"' after basket has been changed");i()},a=function(n){t=k10.tools.Debugger(!1,"popover");i=n;t.log("init popover by function '"+i.name+"'");i()};return{init:a,destroy:v,initPopoversWithHtmlAndText:p,initPopoversWithHtml:y,initSimplePopover:w,menuHasBeenChanged:b,mpHasBeenChanged:k,basketHasBeenChanged:d,onByoUpdateLabels:g}}();k10=k10||{};k10.app=function(){function n(){var n=document.createElement("div");n.className="k10-menu-is-loaded";document.querySelector(".k10-menus").appendChild(n)}var i=k10.tools.Debugger(!0,"app"),t=function(){if(k10.bus.installTo(k10.service),k10.service.subscribe("menuSelected",k10.service.menuSelected),k10.service.subscribe("sectionSelected",k10.service.sectionSelected),k10.service.subscribe("sendStatLabels",k10.service.sendStatLabels),k10.service.subscribe("sendStatFiles",k10.service.sendStatFiles),k10.service.init(),k10.bus.installTo(k10.ui),k10.ui.subscribe("menuHasBeenChanged",k10.ui.menuHasBeenChanged),k10.settings.filterRecipesFunc&&(k10.ui.subscribe("labelsFilterChanged",k10.settings.filterRecipesFunc),k10.ui.subscribe("calorieFilterChanged",k10.settings.filterRecipesFunc),k10.ui.subscribe("categoryFilterChanged",k10.settings.filterRecipesFunc),k10.ui.subscribe("foodPrintFilterChanged",k10.settings.filterRecipesFunc),k10.ui.subscribe("sectionFilterChanged",k10.settings.filterRecipesFunc),k10.ui.subscribe("searchInputChanged",k10.settings.filterRecipesFunc)),k10.ui.init(k10.settings.filterFunc),k10.settings.colcade&&(k10.bus.installTo(k10.colcade),k10.colcade.subscribe("colcade.init",k10.colcade.init),k10.colcade.subscribe("colcade.destroy",k10.colcade.destroy),k10.colcade.subscribe("colcade.reInit",k10.colcade.reInit),k10.colcade.subscribe("colcade.reInitWithHiddenItems",k10.colcade.reInitWithHiddenItems),k10.settings.paging?(k10.colcade.subscribe("goToPage",k10.colcade.init),k10.colcade.subscribe("recalcPaging",k10.colcade.init)):k10.colcade.reInit()),k10.settings.grid&&(k10.bus.installTo(k10.grid),k10.grid.subscribe("filterRecipesSimpleByo",k10.grid.sortRecipesInCourse)),k10.settings.paging&&(k10.bus.installTo(k10.paging),k10.paging.initPaging(),k10.ui.subscribe("labelsFilterChanged",k10.paging.recalcPaging),k10.ui.subscribe("foodPrintFilterChanged",k10.paging.recalcPaging),k10.ui.subscribe("calorieFilterChanged",k10.paging.recalcPaging),k10.ui.subscribe("categoryFilterChanged",k10.paging.recalcPaging),k10.ui.subscribe("sectionFilterChanged",k10.paging.recalcPaging),k10.ui.subscribe("searchInputChanged",k10.paging.recalcPaging)),k10.settings.showStatusArea&&(k10.bus.installTo(k10.statusArea),k10.statusArea.subscribe("filterRecipesSimple",k10.statusArea.update),k10.statusArea.subscribe("calorieFilterChanged",k10.statusArea.update),k10.statusArea.init()),k10.labelFilter&&(k10.bus.installTo(k10.labelFilter),k10.labelFilter.subscribe("menuHasBeenChanged",k10.labelFilter.menuHasBeenChanged),k10.labelFilter.subscribe("customScripts.clearFilter",k10.labelFilter.clearFilter),k10.labelFilter.subscribe("customScripts.toggleFilter",k10.labelFilter.toggleLabelsFilter2),k10.labelFilter.subscribe("customScripts.closeLabelFilter",k10.labelFilter.close),k10.labelFilter.init()),k10.settings.showSectionFilter&&(k10.bus.installTo(k10.sectionFilter),k10.sectionFilter.subscribe("menuHasBeenChanged",k10.sectionFilter.menuHasBeenChanged),k10.sectionFilter.init()),k10.settings.showCategoryFilter&&(k10.bus.installTo(k10.categoryFilter),k10.categoryFilter.subscribe("menuHasBeenChanged",k10.categoryFilter.menuHasBeenChanged),k10.categoryFilter.subscribe("customScripts.clearFilter",k10.categoryFilter.clearFilter),k10.categoryFilter.init()),k10.settings.ShowFoodPrint&&(k10.bus.installTo(k10.foodPrintFilter),k10.foodPrintFilter.subscribe("menuHasBeenChanged",k10.foodPrintFilter.menuHasBeenChanged),k10.foodPrintFilter.subscribe("customScripts.closeFoodPrintFilter",k10.foodPrintFilter.close),k10.foodPrintFilter.init()),k10.settings.showSearch&&(k10.bus.installTo(k10.search),k10.search.subscribe("menuHasBeenChanged",k10.search.menuHasBeenChanged),k10.search.subscribe("customScripts.clearFilter",k10.search.clearFilter),k10.search.init()),k10.labelInfo&&(k10.bus.installTo(k10.labelInfo),k10.labelInfo.subscribe("labelsFilterChanged",k10.labelInfo.rememberSelectedValues),k10.labelInfo.subscribe("foodPrintFilterChanged",k10.labelInfo.rememberSelectedValues),k10.labelInfo.subscribe("calorieFilterChanged",k10.labelInfo.rememberSelectedValues),k10.labelInfo.subscribe("pdfRequested",k10.labelInfo.pdfRequested),k10.labelInfo.subscribe("menuUpdate",k10.labelInfo.menuUpdate),k10.labelInfo.init()),k10.spinner&&(k10.bus.installTo(k10.spinner),k10.spinner.subscribe("spinnerStart",k10.spinner.start),k10.spinner.subscribe("spinnerStop",k10.spinner.stop)),k10.settings.menuSelector&&(k10.bus.installTo(k10.menuSelector),k10.menuSelector.subscribe("renderNewMenu",k10.menuSelector.renderNewMenu),k10.menuSelector.subscribe("renderNewSection",k10.menuSelector.renderNewSection),k10.menuSelector.subscribe("newSectionRendered",k10.menuSelector.newSectionRendered),k10.menuSelector.init()),k10.settings.socialMedia&&(k10.bus.installTo(k10.socialMedia),k10.socialMedia.init(),k10.settings.menuSelector&&k10.menuSelector.subscribe("menuUpdate",k10.socialMedia.update)),k10.dietaryAdvice&&(k10.bus.installTo(k10.dietaryAdvice),k10.dietaryAdvice.subscribe("labelsFilterChanged",k10.dietaryAdvice.rememberSelectedLabels),k10.dietaryAdvice.init(k10.settings.filterFunc,k10.recipe.Recipe)),k10.settings.initScrollFilter&&k10.ui.subscribe("openFilter",k10.ui.initScroll),k10.settings.recipeInfo&&k10.bus.installTo(k10.recipe),k10.settings.modalFunc&&(k10.bus.installTo(k10.modal),k10.settings.modalFunc(),k10.ui.subscribe("menuHasBeenChanged",k10.settings.modalFunc)),(k10.settings.roundingRules||k10.settings.byoFunc)&&k10.roundingRules.init(),k10.byoToggle&&(k10.bus.installTo(k10.byoToggle),k10.byoToggle.subscribe("customScript.hideByoIfAllOptionsFilteredOut",k10.byoToggle.hideByoIfAllOptionsFilteredOut)),k10.settings.byoFunc&&(k10.bus.installTo(k10.byo),k10.bus.installTo(k10.byoModal),k10.byo.init(k10.settings.byoFuncOnPageLoad?k10.settings.byoFuncOnPageLoad:k10.settings.recalcByoFunc),k10.settings.modalFunc&&$k10(".k10-modal-perfect_byo").length>0&&k10.modal.subscribe("openModal",k10.settings.byoFunc),k10.settings.byoFunc&&k10.byoModal.subscribe("byo.modalOpened",k10.settings.byoFunc),k10.settings.byoFuncOnPageLoad&&k10.byoModal.subscribe("menuHasBeenChanged",k10.byoModal.onPageLoad),k10.ui.subscribe("labelsFilterChanged",k10.settings.byoFuncOnFilterChanged?k10.settings.byoFuncOnFilterChanged:k10.settings.recalcByoFunc),k10.ui.subscribe("foodPrintFilterChanged",k10.settings.byoFuncOnFilterChanged?k10.settings.byoFuncOnFilterChanged:k10.settings.recalcByoFunc)),k10.settings.course&&(k10.bus.installTo(k10.course),k10.course.initMultiLevel(),k10.ui.subscribe("menuHasBeenChanged",k10.course.initMultiLevel)),k10.settings.mealPlanner&&!k10.settings.showBasket&&(k10.bus.installTo(k10.mealPlanner),k10.ui.subscribe("mpHasBeenChanged",k10.ui.mpHasBeenChanged),k10.ui.subscribe("menuHasBeenChanged",k10.mealPlanner.menuHasBeenChanged),k10.settings.menuSelector&&k10.menuSelector.subscribe("mpInit",k10.mealPlanner.init),k10.settings.byoFunc&&k10.byo.subscribe("byoHasBeenUpdated",k10.mealPlanner.changeByoValues),k10.mealPlanner.init()),k10.settings.showBasket&&(k10.bus.installTo(k10.basket),k10.ui.subscribe("basketHasBeenChanged",k10.ui.basketHasBeenChanged),k10.settings.menuSelector&&k10.menuSelector.subscribe("basketInit",k10.basket.init),k10.settings.byoFunc&&k10.byo.subscribe("byoHasBeenUpdated",k10.basket.changeByoValues),k10.basket.init()),k10.settings.popoverInit&&(k10.bus.installTo(k10.popover),k10.popover.init(k10.settings.popoverInit),k10.popover.subscribe("menuHasBeenChanged",k10.popover.menuHasBeenChanged),k10.popover.subscribe("byoModal.updateLabels",k10.popover.onByoUpdateLabels),k10.settings.mealPlanner&&!k10.settings.showBasket&&k10.popover.subscribe("mpHasBeenChanged",k10.popover.mpHasBeenChanged),k10.settings.showBasket&&k10.popover.subscribe("basketHasBeenChanged",k10.popover.basketHasBeenChanged)),k10.settings.showVideo&&k10.tools.initVideo(),k10.settings.showImageWithGallery&&k10.tools.initImageWithGallery(),k10.settings.customScripts&&(k10.bus.installTo(k10.customScripts),k10.customScripts.initCustomScripts(),k10.customScripts.onAppLoad&&k10.customScripts.onAppLoad(),k10.customScripts.toggleMenuSelector&&k10.menuSelector.subscribe("toggleMenuSelector",k10.customScripts.toggleMenuSelector),k10.customScripts.menuHasBeenChanged&&k10.menuSelector.subscribe("menuHasBeenChanged",k10.customScripts.menuHasBeenChanged)),k10.settings.initScrollHeader){setTimeout(function(){k10.settings.initScrollHeaderFunc()},0);$k10(window).on("scroll resize",k10.settings.initScrollHeaderFunc);k10.labelFilter.subscribe("labelsFilterOptionsClick",k10.settings.initScrollHeaderFunc)}k10.settings.disclaimerModal&&(k10.bus.installTo(k10.modal),k10.modal.initModalDisclaimer());k10.settings.disclaimerInlineModal&&(k10.bus.installTo(k10.modal),k10.modal.initModalInlineDisclaimer());k10.settings.showSupplier&&(k10.bus.installTo(k10.supplier),k10.supplier.init(),k10.supplier.subscribe("showSupplier",k10.ui.showSupplier));k10.settings.recalcFixedHeader&&(k10.settings.showLabelFilter&&k10.ui.subscribe("labelsFilterChanged",function(){k10.tools.recalcFixedHeader(100)}),k10.settings.showCalorieFilter&&k10.ui.subscribe("calorieFilterChanged",function(){k10.tools.recalcFixedHeader(100)}));k10.settings.IsPartnerReferrer&&(k10.bus.installTo(k10.partner),k10.partner.subscribe("labelsFilterChanged",k10.partner.onFilterChanged),k10.partner.onDomReady());setTimeout(function(){k10.settings.colcade&&k10.settings.paging&&k10.colcade.init()},300);k10.settings.showCalorieFilter&&(k10.bus.installTo(k10.calorieFilter),k10.calorieFilter.subscribe("menuHasBeenChanged",k10.calorieFilter.menuHasBeenChanged),k10.calorieFilter.subscribe("customScripts.clearFilter",k10.calorieFilter.resetFilter),k10.calorieFilter.subscribe("calorieFilterReset",k10.calorieFilter.resetFilter),k10.calorieFilter.init());setTimeout(function(){n()},1e3);k10.settings.pageRefresh&&!k10.settings.isLandingMode&&k10.tools.showRefreshPagePopup()};return{init:t}}();$k10.fn.extend({outerHtml:function(){var n,t,i;return this.length===0?!1:(n=this[0],t=n.tagName.toLowerCase(),n.outerHTML)?n.outerHTML:(i=$k10.map(n.attributes,function(n){return n.name+'="'+n.value+'"'}),"<"+t+(i.length>0?" "+i.join(" "):"")+">"+n.innerHTML+"<\/"+t+">")}});k10=k10||{};k10.recipe=function(){var t={$recipes:""},n={},i=function(){this.domElem=null;this.isVisible=!0;this.labelsIds=[];this.isByoRecipe=!1;this.isInfoRecipe=!1;this.subByos=[];this.calories=null;this.fltByLbl=!1;this.fltByCal=!1;this.fltByCat=!1;this.fltByFp=!1;this.fltBySec=!1;this.sectionId=null;this.categoriesIds=[]},r=function(){this.domElem=null;this.isVisible=!0;this.labelsIds=[];this.calories=null;this.fltByLbl=!1;this.fltByCal=!1;this.fltByCat=!1;this.fltByFp=!1;this.fltBySec=!1;this.sectionId=null;this.categoriesIds=[]},u=function(){this.name="";this.domElem=null;this.isVisible=!0;this.isByo=!0;this.isSubByo=!1;this.isByoRecipe=!1;this.isInfoRecipe=!1;this.isCore=!1;this.isSelected=!1;this.calories;this.searchName="";this.isTableLayout=!1;this.byoType="";this.coreItemIsFiltered=!1;this.inclusiveOptionsItemIsFiltered=!1;this.dietaryOptionItemIsVisible=!1;this.allModifierChoicesFiltered=!1;this.allRootItemsFiltered=!1;this.allItemsIsFiltered=!1;this.recipeSizes=[];this.rootByoItems=[];this.sections=[];this.coreRecipes=[];this.choiceRecipes=[];this.optionRecipes=[]},f=function(){this.domElem=null;this.isVisible=!0;this.fpGradeName=""},e=function(){this.name="";this.domElem=null;this.isVisible=!0;this.isRecipe=!0;this.isInfoRecipe=!1;this.isByoRecipe=!1;this.labelsIds=[];this.calories=null;this.fltByLbl=!1;this.fltByCal=!1;this.fltByCat=!1;this.fltByFp=!1;this.fltBySec=!1;this.sectionId=null;this.categoriesIds=[];this.searchName="";this.fltBySearch=!1;this.mayLabelsIds=[];this.fltByMay=!1;this.recipeSizes=[]},o=function(){n=k10.tools.Debugger(!0,"initRecipeInfo");t.$recipes=$k10(".k10-recipe");n.log("init Recipe Info")};return{Model:i,SubRecipeModel:r,Byo:u,Recipe:e,RecipeSize:f}}();_createClass=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}();k10=k10||{};k10.ui=function(){var n=k10.className,v=function(){function i(){_classCallCheck(this,i);this.filterRecipes=this.filterRecipes.bind(this);this.getStaticRecipes=this.getStaticRecipes.bind(this)}return _createClass(i,[{key:"getStaticRecipes",value:function(){function e(t){var i=new k10.recipe.Byo;return i.domElem=t,i.isSubByo=!1,i.name=t.find("."+n.byoName).text().trim(),i.calories=t.attr("data-calories"),i.searchName=t.attr("data-search-name"),i.byoType=t.attr("data-byo-type"),i.isVisible=!t.hasClass(n.byoHidden),i.rootByoItems=[],t.find("."+n.byoSection+"."+n.byoSectionRoot+" ."+n.byoItem).each(function(n,t){var r=u($k10(t));i.rootByoItems.push(r)}),i.sections=[],t.find("."+n.byoSubTwo+" ."+n.byo+"."+n.byoSubL1).each(function(n,t){var r=o($k10(t));i.sections.push(r)}),i}function o(t){var i=new k10.recipe.Byo;return i.domElem=t,i.isSubByo=!0,i.name=t.find("."+n.byoSectionName).text().trim(),i.byoType=t.attr("data-byo-type"),i.isVisible=!t.hasClass(n.byoHidden),i.rootByoItems=[],t.find("."+n.byoSection+"."+n.byoSectionSubL1+" ."+n.byoItem).each(function(n,t){var r=u($k10(t));i.rootByoItems.push(r)}),i.sections=[],i}function u(t){var u=t,r=new k10.recipe.Recipe;return r.domElem=u,r.name=u.find("."+n.byoItemName).text().trim(),r.labelsIds=i(u,"data-labels"),r.mayLabelsIds=i(u,"data-may-labels"),r.calories=u.attr("data-calories"),r.sectionId=+u.attr("data-section-id"),r.categoriesIds=i(u,"data-categories"),r.fpGradeName=u.attr("data-fp-grade"),r.pricing=h(u,"data-text-pricing"),r.isCore=u.hasClass(n.byoItemCore),r.isSelected=u.hasClass(n.byoItemSelected),r.isVisible=!u.hasClass(n.byoItemHidden),r.isInfoRecipe=u.hasClass(n.recipeInfo),u.find("."+n.recipeSizeFilter).each(function(n,t){var i=f($k10(t));r.recipeSizes.push(i)}),r.isRecipe=!0,r.isByoRecipe=!0,r.isByo=!1,r.isSubByo=!1,r}function s(t){var r=new k10.recipe.Recipe;return r.domElem=t,r.labelsIds=i(t,"data-labels"),r.mayLabelsIds=i(t,"data-may-labels"),r.isVisible=!t.hasClass(n.recipeHidden),r.name=t[0].innerText,r.calories=t.attr("data-calories"),r.sectionId=+t.attr("data-section-id"),r.searchName=t.attr("data-search-name"),r.categoriesIds=i(t,"data-categories"),r.fpGradeName=t.attr("data-fp-grade"),r.isInfoRecipe=t.hasClass(n.recipeInfo),t.find("."+n.recipeSizeFilter).each(function(n,t){var i=f($k10(t));r.recipeSizes.push(i)}),r.isRecipe=!0,r.isByoRecipe=!1,r.isByo=!1,r.isSubByo=!1,r}function f(t){var i=new k10.recipe.RecipeSize;return i.domElem=t,i.isVisible=!t.hasClass(n.recipeSizeHidden),i.fpGradeName=t.attr("data-fp-grade"),i}function i(n,i){var r=[],u=n.attr(i);try{r=u?JSON.parse("["+u+"]"):[];r==null&&(r=[])}catch(f){t.errorLog("ui: getAttr -> "+i+" : "+u+" ;"," JSON Error: "+f.message)}return r}function h(n,t){var i=n.attr(t);return i}t.log("byo.getStaticRecipes");var r=[];return $k10(".k10-menus").first().find("."+n.recipe+"."+n.recipeNotByo).each(function(n,t){var i=s($k10(t));r.push(i)}),$k10(".k10-menus").first().find("."+n.recipe+"."+n.recipeByo+"."+n.byo).each(function(n,t){var i=e($k10(t));r.push(i)}),r}},{key:"filterRecipes",value:function(){var y,h,c,i,o,l,e,s,a,r,v;for(t.log("byo.filterRecipes"),y=f(k10.labelFilter.model.selectedLabels),h=this.getStaticRecipes(),u(h,y),c=0;c<h.length;c++){if(i=h[c],i.isVisible==!0?this.showRecipe(i):this.hideRecipe(i),i.isByo==!0){for(e=0;e<i.rootByoItems.length;e++)if(o=i.rootByoItems[e],o.isVisible==!0?this.showRecipe(o):this.hideRecipe(o),o.recipeSizes.length>0)for(r=o.recipeSizes.length-1;r>-1;r--)l=o.recipeSizes[r],l.isVisible==!0?this.showRecipeSize(l):this.hideRecipeSize(l);for(e=0;e<i.sections.length;e++)for(s=i.sections[e],s.isVisible==!1?s.domElem.addClass(n.byoSubHidden):s.domElem.removeClass(n.byoSubHidden),r=0;r<s.rootByoItems.length;r++)a=s.rootByoItems[r],a.isVisible==!0?this.showRecipe(a):this.hideRecipe(a)}if(i.recipeSizes.length>0)for(r=i.recipeSizes.length-1;r>-1;r--)v=i.recipeSizes[r],v.isVisible==!0?this.showRecipeSize(v):this.hideRecipeSize(v)}k10.settings.hideFilteredRecipe?k10.ui.publish("colcade.reInitWithHiddenItems"):k10.ui.publish("colcade.reInit");k10.ui.publish("filterRecipesSimpleByo")}},{key:"hideRecipe",value:function(t){t.isByoRecipe?t.domElem.addClass(n.byoItemHidden):t.domElem.addClass(n.recipeHidden)}},{key:"showRecipe",value:function(t){t.isByoRecipe?t.domElem.removeClass(n.byoItemHidden):t.domElem.removeClass(n.recipeHidden)}},{key:"hideSection",value:function(t){t.isSubByo?t.domElem.addClass(n.byoSubHidden):t.domElem.addClass(n.courseHidden)}},{key:"showSection",value:function(t){t.isSubByo?t.domElem.removeClass(n.byoSubHidden):t.domElem.removeClass(n.courseHidden)}},{key:"hideRecipeSize",value:function(t){t.domElem.addClass(n.recipeSizeHidden)}},{key:"showRecipeSize",value:function(t){t.domElem.removeClass(n.recipeSizeHidden)}}]),i}(),y=function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"addNewRow",value:function(n,t,i,r,u,f){n.find("."+f+"__menu-item-name[colspan='2'] > span").html(t.name);n.find("."+f+"__menu-item-name[colspan='4'] > span").html(t.name);t.kCal==="-"?(n.find("."+f+"__menu-item-calorie > span").hide(),n.find("."+f+"__menu-item-calorie > img").show()):(n.find("."+f+"__menu-item-calorie > img").hide(),n.find("."+f+"__menu-item-calorie > span").show().html(t.kCal));r&&(t.gda==="-"?(n.find("."+f+"__menu-item-dsPercentage > span").hide(),n.find("."+f+"__menu-item-dsPercentage > img").show()):(n.find("."+f+"__menu-item-dsPercentage > img").hide(),n.find("."+f+"__menu-item-dsPercentage > span").show().html(t.gda+"%")));var e=t.kCal==="-"?"No value available":"KCal "+t.kCal+(r?"&nbsp;&nbsp;&nbsp;"+t.gda+"% of your daily consumption":"");n.find("."+f+"__menu-item-name[colspan='4'] > img").attr("title",e);n.find("."+f+"__menu-item-price").html(k10.settings.CurrencySymbol+t.price);u?n.find("."+f+"__menu-item-remove-btn").attr("style","display: none;"):n.find("."+f+"__menu-item-remove-btn").attr("style","").attr("data-index",i)}},{key:"getMealPlannerFromLocalStorage",value:function(){var n=[],i;try{n=JSON.parse(window.localStorage.getItem("mealPlanner")||"[]");n==null?n=[]:n.length>0&&n[0].items.length>0&&(i=n[0].items[0].recipe,(typeof i.byoDetails=="undefined"||i.byoDetails===null)&&(window.localStorage.removeItem("mealPlanner"),window.localStorage.removeItem("mealPlannerTotal"),n=[]))}catch(r){t.errorLog("ui: mpHasBeenChanged-1","JSON Error: "+r.message);n=[]}return n}},{key:"getTotalFromLocalStorage",value:function(){var n=[];try{n=JSON.parse(window.localStorage.getItem("mealPlannerTotal")||"[]");n==null&&(n=[])}catch(i){t.errorLog("ui: mpHasBeenChanged-2","JSON Error: "+i.message);n=[]}return n}},{key:"updateTotal",value:function(n,t,i){return $k10(".k10-meal-planner__counter").text(t.count+" "+(t.count===1?"item":"items")),$k10(".k10-meal-planner__counter2").text(t.count),$k10(".k10-meal-planner__counter2").attr("data-count",t.count),n.find(".k10-meal-planner__menu-item-calorie > span.k10-meal-planner__menu-item-calorie-value").html(t.kCal+(t.isAllKCal?"":"<sup>*<\/sup>")),i&&n.find(".k10-meal-planner__menu-item-dsPercentage > span").html(t.gda+"%"+(t.isAllGda?"":"<sup>*<\/sup>")),n.find(".k10-meal-planner__menu-item-price > span").html(k10.settings.CurrencySymbol+t.price),n}},{key:"addEmptyStub",value:function(n,t){t[0].innerHTML=n.data("mpEmptyMsg");n.addClass("k10-meal-planner__dish-list_empty");$k10(".k10-meal-planner__counter").text("0 items");$k10(".k10-meal-planner__counter2").text("0");$k10(".k10-meal-planner__counter2").attr("data-count","0")}},{key:"getByoHtmlStr",value:function(n,t,i,r,u){var l="",e=$k10.isArray(n.byoDetails)?n.byoDetails:JSON.parse(n.byoDetails).data,h,a,f,c,v,s,o,y;if(e.length>0){for(h="",a=$k10(".k10-menus").first(),f=0;f<e.length;f++){for(c="",v=typeof e[f].name!="undefined"&&e[f].name!=="",s=0;s<e[f].items.length;s++)this.addNewRow(r,e[f].items[s],u,t,!0,"k10-meal-planner"),c+=r.html();o=a.find(".k10-meal-planner__section-tmpl").clone();o.find(".k10-meal-planner__content").html(c);k10.settings.showSectionsInMealPlan&&o.find(".k10-meal-planner__header").html(e[f].name);y=t?"6":i?"5":"4";h+='<tr class="k10-meal-planner__line-items '+(v?"k10-meal-planner__line-items_sub-byo":"k10-meal-planner__line-items_byo-root")+'">'+('<td class="k10-meal-planner__line-item" colspan="'+y+'">'+o[0].innerHTML+'<\/td>"')+('<td class="k10-meal-planner__line-item_mobile" colspan="7">'+o[0].innerHTML+"<\/td>")+"<\/tr>"}l+=h}return l}},{key:"disableCheckboxInByo",value:function(n,t){var i,r;typeof $k10(".k10-recipe__add-calories").attr("data-is-added")!="undefined"&&(i=$k10(".k10-recipe__add-calories[data-section-id='"+n+"'][data-recipe-id='"+t+"']"),i.attr("data-is-added","true"),r=i.closest(".k10-recipe__byo_inline"),r.length>0&&r.find(".k10-recipe__byo-recipe_checkbox").addClass("k10-recipe__byo-recipe_checkbox_disabled"))}},{key:"addSectionName",value:function(n,t,i){return n.length>0&&(k10.settings.showSectionsInMealPlan&&n.find(".k10-meal-planner__header").first().html(t),i+=n[0].innerHTML),i}},{key:"addTotalToFooter",value:function(n,t){if(k10.settings.mealPlannerShowTotalAsSeparateTable){var i=$k10("<div>",{"class":"k10-meal-planner__footer k10-w-meal-planner__hilight-border"}),r=$k10("<table>",{"class":"k10-meal-planner__footer-table"});r.append(t);i.append(r);n.first().append(i)}}},{key:"update",value:function(){var r=this,n=$k10(".k10-menus").first().find(".k10-meal-planner"),t=this.getMealPlannerFromLocalStorage(),h=n.find(".k10-meal-planner__content > tbody"),c=n.find(".k10-meal-planner__dish-list"),u=n.find(".k10-meal-planner__dish-list-container"),l=n.find(".k10-meal-planner__section-tmpl").clone();if($k10(".k10-recipe__byo-recipe_checkbox").removeClass("k10-recipe__byo-recipe_checkbox_disabled"),t.length>0){var a=this.getTotalFromLocalStorage(),v=n.find(".k10-meal-planner__header-tmpl").clone(),f=n.find(".k10-meal-planner__item-tmpl > tbody").clone(),i=n.find(".k10-meal-planner__total-tmpl > tbody").clone(),e="",o=0,s=i.find(".k10-meal-planner__menu-item-dsPercentage.k10-meal-planner__totals").length>0,y=i.find(".k10-meal-planner__menu-item-calorie.k10-meal-planner__totals").length>0;i=this.updateTotal(i,a,s);$k10.each(t,function(n){var c=t[n].items,u="";$k10.each(c,function(i){var e=c[i].recipe;r.disableCheckboxInByo(t[n].id,e.id);r.addNewRow(f,e,o,s,!1,"k10-meal-planner");u+=f.html();u+=r.getByoHtmlStr(e,s,y,f,o);o++});n===t.length-1&&k10.settings.mealPlannerShowTotalAsSeparateTable===!1&&(u+=i.html());h.html(u);l.find(".k10-meal-planner__content").html(h.html());e=r.addSectionName(l,t[n].name,e)});u[0].innerHTML=v.html()+e;r.addTotalToFooter(u,i);c.removeClass("k10-meal-planner__dish-list_empty")}else this.addEmptyStub(c,u)}}]),n}(),u,t=k10.tools.Debugger(!0,"ui"),p=new v,s=new y,lt=function(n,t){var i=!0,r=!!n.filter(function(n){return t.suitableFor.indexOf(n)!==-1}).length,u=!!n.filter(function(n){return t.allergenFor.indexOf(n)!==-1}).length;return(t.suitableFor.length&&!r||t.allergenFor.length&&u)&&(i=!1),i},f=function(n){var t=[],i=[];return n.map(function(n){n.isExt===!0?i.push(n.id):t.push(n.id)}),{suitableFor:t,allergenFor:i}},i=function(n){n.addClass("k10-recipe_hidden");n.removeClass("k10-recipe_may");n.parent().hasClass("k10-recipe__byo_inline")&&n.parent().addClass("k10-recipe__byo_inline_hidden")},e=function(n,t){n.removeClass("k10-recipe_hidden");t?n.addClass("k10-recipe_may"):n.removeClass("k10-recipe_may");n.parent().hasClass("k10-recipe__byo_inline")&&n.parent().removeClass("k10-recipe__byo_inline_hidden")},w=function(){t.log("_getRecipesFullers");var n=[];return $k10(".k10-recipe").not(".k10-recipe_sub-byo").each(function(){var r=$k10(this),i=new k10.recipe.Model,u;if(i.domElem=r,i.isInfoRecipe=r.hasClass("k10-recipe_info-recipe"),i.isByoRecipe=r.hasClass("k10-recipe_byo"),i.isVisible=!r.hasClass("k10-recipe_hidden"),i.isInfoRecipe==!0)i.isVisible=!0;else{try{i.labelsIds=r.attr("data-labels")?JSON.parse("["+r.attr("data-labels")+"]"):[];i.labelsIds==null&&(i.labelsIds=[]);i.mayLabelsIds=r.attr("data-may-labels")?JSON.parse("["+r.attr("data-may-labels")+"]"):[];i.mayLabelsIds==null&&(i.mayLabelsIds=[])}catch(f){t.errorLog("ui: _getRecipesFullers-1","JSON Error: "+f.message);i.labelsIds=[]}i.isByoRecipe==!0&&(u=r.nextUntil(".k10-course, .k10-recipe, .k10-recipe_byo"),u.each(function(){var r=$k10(this),n=new k10.recipe.Byo,u;n.domElem=r;n.isSubByo=!0;u=r.find(".k10-recipe_sub-byo");u.each(function(){var u=$k10(this),i=new k10.recipe.SubRecipeModel;i.domElem=u;try{i.labelsIds=u.attr("data-labels")?JSON.parse("["+u.attr("data-labels")+"]"):[];i.labelsIds==null&&(i.labelsIds=[]);i.mayLabelsIds=u.attr("data-may-labels")?JSON.parse("["+u.attr("data-may-labels")+"]"):[];i.mayLabelsIds==null&&(i.mayLabelsIds=[])}catch(f){t.errorLog("ui: _getRecipesFullers-2","JSON Error: "+f.message);i.labelsIds=[]}i.isVisible=!u.hasClass("k10-recipe_hidden");i.isInfoRecipe=u.hasClass("k10-recipe_info-recipe");r.hasClass("k10-byo_core")?n.coreRecipes.push(i):r.hasClass("k10-byo_choice")?n.choiceRecipes.push(i):r.hasClass("k10-byo_option")&&n.optionRecipes.push(i)});i.subByos.push(n)}))}n.push(i)}),n},b=function(){t.log("_getRecipesByo");var n=[],i=$k10(".k10-menus").first();return i.find(".k10-byo,.k10-recipe,.k10-sub-byo").each(function(){var r=$k10(this),u,f,h,c;if(r.hasClass("k10-byo")||r.hasClass("k10-sub-byo")){f=new k10.recipe.Byo;f.isSubByo=r.hasClass("k10-sub-byo");f.domElem=r;f.name=r[0].innerText;f.calories=r.attr("data-calories");f.isVisible=!r.hasClass("k10-recipe_hidden");f.searchName=r.attr("data-search-name");var o=r.hasClass("k10-recipe_tr")&&(!f.isSubByo&&typeof r.attr("data-byo-id")!="undefined"||f.isSubByo&&typeof r.attr("data-sub-byo-id")!="undefined"),e=r.closest(".k10-recipe__byo_inline").length===0?r:r.closest(".k10-recipe__byo_inline"),s=f.isSubByo?o?e.nextAll(".k10-recipe_sub-byo[data-sub-byo-id='"+r.attr("data-sub-byo-id")+"']"):e.find(".k10-recipe_sub-byo"):o?e.nextAll(".k10-recipe_byo[data-byo-id='"+r.attr("data-byo-id")+"']"):e.find(".k10-recipe_byo");f.isTableLayout=o;k10.settings.hasRecipeCard&&(h=i.find(".k10-recipe-card[data-menu-section-identifier='"+r.attr("data-menu-section-identifier")+"'][data-recipe-identifier='"+r.attr("data-recipe-identifier")+"']"),s=f.isSubByo?h.find(".k10-recipe_sub-byo"):h.find(".k10-recipe_byo"));k10.settings.byoFilterIdentifiers==!0&&(c=r.attr("data-identifier"),c&&(s=i.find(".k10-recipe[data-parent-identifier='"+c+"']")));s.each(function(){var i=$k10(this),n=new k10.recipe.Recipe;n.isByoRecipe=!0;n.domElem=i;try{n.labelsIds=i.attr("data-labels")?JSON.parse("["+i.attr("data-labels")+"]"):[];n.labelsIds==null&&(n.labelsIds=[]);n.mayLabelsIds=i.attr("data-may-labels")?JSON.parse("["+i.attr("data-may-labels")+"]"):[];n.mayLabelsIds==null&&(n.mayLabelsIds=[])}catch(u){t.errorLog("ui: _getRecipesByo-3","JSON Error: "+u.message);n.labelsIds=[]}n.calories=k10.settings.showCalorieFilter?i.attr("data-calories"):r.attr("data-calories");n.sectionId=+r.attr("data-section-id");n.searchName=f.searchName;try{n.categoriesIds=r.attr("data-categories")?JSON.parse("["+r.attr("data-categories")+"]"):[];n.categoriesIds==null&&(n.categoriesIds=[])}catch(u){t.errorLog("ui: _getRecipesByo-4","JSON Error: "+u.message);n.categoriesIds=[]}n.fpGradeName=r.attr("data-fp-grade");n.isVisible=!i.hasClass("k10-recipe_hidden");i.hasClass("k10-byo_core")?f.coreRecipes.push(n):i.hasClass("k10-byo_option")&&f.optionRecipes.push(n);i.hasClass("k10-byo_choice")&&f.choiceRecipes.push(n)});n.push(f)}else{u=new k10.recipe.Recipe;u.domElem=r;try{u.labelsIds=r.attr("data-labels")?JSON.parse("["+r.attr("data-labels")+"]"):[];u.labelsIds==null&&(u.labelsIds=[]);u.mayLabelsIds=r.attr("data-may-labels")?JSON.parse("["+r.attr("data-may-labels")+"]"):[];u.mayLabelsIds==null&&(u.mayLabelsIds=[])}catch(l){t.errorLog("ui: _getRecipesByo-1","JSON Error: "+l.message);u.labelsIds=[]}u.isVisible=!r.hasClass("k10-recipe_hidden");u.name=r[0].innerText;u.calories=r.attr("data-calories");u.sectionId=+r.attr("data-section-id");u.searchName=r.attr("data-search-name");try{u.categoriesIds=r.attr("data-categories")?JSON.parse("["+r.attr("data-categories")+"]"):[];u.categoriesIds==null&&(u.categoriesIds=[])}catch(l){t.errorLog("ui: _getRecipesByo-2","JSON Error: "+l.message);u.categoriesIds=[]}u.fpGradeName=r.attr("data-fp-grade");u.isInfoRecipe=r.hasClass("k10-recipe_info-recipe");u.isByoRecipe=r.hasClass("k10-recipe__byo-recipe");n.push(u)}}),n},k=function(){t.log("_getRecipes");var n=[];return $k10(".k10-menus").first().find(".k10-recipe").each(function(){var r=$k10(this),i=new k10.recipe.Recipe;i.domElem=r;try{i.labelsIds=r.attr("data-labels")?JSON.parse("["+r.attr("data-labels")+"]"):[];i.labelsIds==null&&(i.labelsIds=[]);i.mayLabelsIds=r.attr("data-may-labels")?JSON.parse("["+r.attr("data-may-labels")+"]"):[];i.mayLabelsIds==null&&(i.mayLabelsIds=[])}catch(u){t.errorLog("ui: _getRecipes-1","JSON Error: "+u.message);i.labelsIds=[]}i.isVisible=!r.hasClass("k10-recipe_hidden");i.name=r[0].innerText;i.calories=r.attr("data-calories");i.sectionId=+r.attr("data-section-id");i.searchName=r.attr("data-search-name");try{i.categoriesIds=r.attr("data-categories")?JSON.parse("["+r.attr("data-categories")+"]"):[];i.categoriesIds==null&&(i.categoriesIds=[])}catch(u){t.errorLog("ui: _getRecipes-2","JSON Error: "+u.message);i.categoriesIds=[]}i.fpGradeName=r.attr("data-fp-grade");i.isInfoRecipe=r.hasClass("k10-recipe_info-recipe");i.isByoRecipe=!1;n.push(i)}),n},r=function(n){n.isVisible?e(n.domElem,n.fltByMay):i(n.domElem)},d=function(n){$k10.each(n,function(n,t){r(t);t.isByoRecipe&&(t.expandCollapseElem!==null&&typeof t.expandCollapseElem!="undefined"&&k10.tools.expandCollapse(t.expandCollapseElem,!0),$k10.each(t.coreSubRecipes,function(n,t){r(t)}),$k10.each(t.choiceSubRecipes,function(n,t){r(t)}),$k10.each(t.optionSubRecipes,function(n,t){r(t)}))})},h=function(n){var t=n.filter(function(n){return n.isVisible===!0}).length===0;$k10.each(n,function(n,r){var u=r.domElem.closest(".k10-byo"),s,o,h,f,c;if(t&&!u.hasClass("k10-recipe_hidden")?i(u):!t&&u.hasClass("k10-recipe_hidden")&&e(u,r.fltByMay),u.hasClass("k10-byo_core")&&u.hasClass("k10-recipe_hidden"))for(s=$k10.merge(u.prevUntil(".k10-recipe"),u.nextUntil(".k10-recipe, .k10-course")),o=0;o<s.length;o++)$k10(s[o]).addClass("k10-recipe_hidden"),h=$k10(s[o]).find(".k10-byo__name-icon"),h.length>0&&!h.hasClass(".k10-byo__name-icon_collapse")&&k10.tools.expandCollapse(h,!0);f=r.domElem;r.isVisible||f.hasClass("k10-recipe_hidden")?r.isVisible&&f.hasClass("k10-recipe_hidden")&&e(f,r.fltByMay):i(f);r.isVisible||(c=f.closest(".k10-byo").find(".k10-byo__name-icon"),c.length>0&&!c.hasClass(".k10-byo__name-icon_collapse")&&k10.tools.expandCollapse(c,!0))})},g=function(n){var t=$k10.grep(n,function(n){return n.isByoRecipe===!0});$k10.each(t,function(n,t){$k10.each(t.subByos,function(n,t){h(t.coreRecipes);h(t.choiceRecipes);h(t.optionRecipes)})})},nt=function(){t.log("filterRecipesFullers");var n=f(k10.labelFilter.model.selectedLabels),i=w();u(i,n);d(i);g(i);$k10("#k10-view-menu-options").length>0&&$k10("#k10-view-menu-options").prop("checked")===!1&&(n.suitableFor.length>0||n.allergenFor.length>0?$k10("#k10-view-menu-options").prop("checked",!0).trigger("change"):$k10(".k10-byo:not(.k10-byo_hidden)").addClass("k10-byo_hidden"));k10.settings.initScrollHeader&&k10.labelFilter.publish("labelsFilterOptionsClick");k10.tools.markFirstNotHiddenRecipe();k10.tools.handleTableRows();k10.labelFilter.publish("ui.filterRecipesFullers")},tt=function(){var p,n,o,s,c,h,y,v;if(t.log("filterRecipesSimpleByo"),p=f(k10.labelFilter.model.selectedLabels),n=b(),u(n,p),$k10.each(n,function(t,u){var o,f;r(u);o=k10.settings.filterFuncName!=="k10.filter.simpleWithByo";k10.settings.filterFuncName=="k10.filter.simpleWithByo"&&k10.settings.filterRecipesSeparated==!0&&(o=!0);o==!0&&(u.isByo&&!u.isSubByo?(f=u.domElem,f.hasClass("k10-recipe_tr")&&typeof f.attr("data-byo-id")!="undefined"?u.isVisible?$k10(".k10-recipe_tr[data-byo-id='"+f.attr("data-byo-id")+"']").removeClass("k10-recipe_hidden-byo"):$k10(".k10-recipe_tr[data-byo-id='"+f.attr("data-byo-id")+"']").addClass("k10-recipe_hidden-byo"):(k10.settings.showCalorieFilter&&(u.isVisible?f.removeClass("k10-recipe_hidden-byo"):f.addClass("k10-recipe_hidden-byo")),typeof n[t+1]!="undefined"&&n[t+1].isSubByo&&(n[t+1].isVisible?e(f,u.fltByMay):i(f)))):u.isByo&&u.isSubByo&&(f=u.domElem,f.hasClass("k10-recipe_tr")&&typeof f.attr("data-byo-id")!="undefined"&&typeof f.attr("data-sub-byo-id")!="undefined"?u.isVisible?$k10(".k10-recipe_tr[data-byo-id='"+f.attr("data-byo-id")+"'][data-sub-byo-id='"+f.attr("data-sub-byo-id")+"']").removeClass("k10-recipe_hidden-sub-byo"):$k10(".k10-recipe_tr[data-byo-id='"+f.attr("data-byo-id")+"'][data-sub-byo-id='"+f.attr("data-sub-byo-id")+"']").addClass("k10-recipe_hidden-sub-byo"):k10.settings.showCalorieFilter&&(u.isVisible?f.removeClass("k10-recipe_hidden-sub-byo"):f.addClass("k10-recipe_hidden-sub-byo"))))}),k10.settings.byoFilterIdentifiers==!0)for(o=0;o<n.length;o++)if(n[o].isByo&&n[o].isVisible==!1&&(s=$k10(n[o].domElem).attr("data-identifier"),s))for(c=$k10(".k10-sub-byo[data-parent-identifier='"+s+"']"),h=0;h<c.length;h++)for(s=$k10(c[h]).attr("data-identifier"),i($k10(c[h])),y=$k10(".k10-recipe[data-parent-identifier='"+s+"']"),v=0;v<y.length;v++)i($k10(y[v]));rt();k10.settings.hideFilteredRecipe?k10.ui.publish("colcade.reInitWithHiddenItems"):k10.ui.publish("colcade.reInit");l();a(k10.labelFilter.model.selectedLabels);k10.settings.initScrollHeader&&k10.labelFilter.publish("labelsFilterOptionsClick");k10.tools.markFirstNotHiddenRecipe();k10.tools.handleTableRows();k10.labelFilter.publish("ui.filterRecipesSimpleByo")},it=function(){t.log("filterRecipesSimple");var i=f(k10.labelFilter.model.selectedLabels),n=k();u(n,i);$k10.each(n,function(n,t){r(t)});k10.settings.hideFilteredRecipe?k10.ui.publish("colcade.reInitWithHiddenItems"):k10.ui.publish("colcade.reInit");l();a(k10.labelFilter.model.selectedLabels);k10.ui.publish("filterRecipesSimple");k10.settings.initScrollHeader&&k10.labelFilter.publish("labelsFilterOptionsClick");k10.tools.markFirstNotHiddenRecipe();k10.tools.handleTableRows()},l=function(){k10.settings.hideSectionsOnFilter&&$k10(".k10-all-courses").each(function(){var n=$k10(this).find(".k10-recipe:not(.k10-recipe_hidden)");$k10(this).find(".k10-recipe__no-items").each(function(){n.length===0?$k10(this).removeClass("k10-recipe__no-items_hidden"):$k10(this).addClass("k10-recipe__no-items_hidden")});$k10(this).find(".k10-course").each(function(){n.length===0?$k10(this).addClass("k10-course_hidden"):$k10(this).removeClass("k10-course_hidden")})})},a=function(n){var r,u,f,t,i;if(k10.settings.labelsTags){for($k10(".k10-labels-filter__tag").off("click",o),r=$k10(".k10-labels-filter__tags-content"),r.find(".k10-labels-filter__tag").remove(),t=0,i="";t<n.length;t++)i+='<div class="k10-labels-filter__tag" data-label-id="'+n[t].id+'">'+n[t].name+"<\/div>";r.prepend(i);$k10(".k10-labels-filter__tag").on("click",o)}else if(k10.settings.labelsTagGroups)if($k10(".k10-labels-filter__tag").off("click",o),r=$k10(".k10-labels-filter__tags-content"),r.find(".k10-labels-filter__tag-container").remove(),n.length>0){for($k10(".k10-labels-filter__tags").removeClass("k10-labels-filter__tags_hidden"),u=$k10.grep(n,function(n){return n.isExt===!1}),f=$k10.grep(n,function(n){return n.isExt===!0}),t=0,i="";t<f.length;t++)t===0&&(i+='<div class="k10-labels-filter__tag-container"><div class="k10-labels-filter__tag-title k10-labels-filter__tag-title_contains">'+r.attr("data-contains-title")+':<\/div><div class="k10-labels-filter__tag-wrapper">'),i+='<div class="k10-labels-filter__tag" data-label-id="'+f[t].id+'">'+f[t].name+'<span class="k10-labels-filter__tag-remove-icon" data-label-id="'+f[t].id+'"><\/span><\/div>',t===f.length-1&&(i+="<\/div><\/div>");for(r.prepend(i),t=0,i="";t<u.length;t++)t===0&&(i+='<div class="k10-labels-filter__tag-container"><div class="k10-labels-filter__tag-title k10-labels-filter__tag-title_suitable">'+r.attr("data-suitable-title")+':<\/div><div class="k10-labels-filter__tag-wrapper">'),i+='<div class="k10-labels-filter__tag" data-label-id="'+u[t].id+'">'+u[t].name+'<span class="k10-labels-filter__tag-remove-icon" data-label-id="'+u[t].id+'"><\/span><\/div>',t===u.length-1&&(i+="<\/div><\/div>");r.prepend(i);$k10(".k10-labels-filter__tag").on("click",o);$k10(".k10-labels-filter__recipe-counter").html($k10(".k10-labels-filter__recipe-counter").attr("data-counter-text").replace("{0}","<b>"+$k10(".k10-all-courses_desktop .k10-recipe_desktop:not(.k10-recipe-card,.k10-recipe_hidden)").length+"<\/b>"))}else $k10(".k10-labels-filter__tags").addClass("k10-labels-filter__tags_hidden")},o=function(n){var t=$k10(n.target),i=t.attr("data-label-id");$k10('.k10-labels-filter__label-wrapper[data-label-id="'+i+'"] .k10-labels-filter__label-chkbox, .k10-labels-filter2__label-wrapper[data-label-id="'+i+'"] .k10-labels-filter2__label-chkbox').first().click();t.remove();n.stopPropagation()},rt=function(){var n=!1,r=!1,t,i;$k10(".k10-labels-filter__panel, .k10-labels-filter2__panel, .k10-section-filter__panel, .k10-category-filter__panel").each(function(){var t=$k10(this),i=t.next().find("input[type='checkbox']:checked");n=i.length>0?!0:!1;!t.hasClass("k10-toolbar-filter_selected")&&n?t.addClass("k10-toolbar-filter_selected"):t.hasClass("k10-toolbar-filter_selected")&&!n&&t.removeClass("k10-toolbar-filter_selected");r=r||n});t=$k10(".k10-toolbar__title");t.length>0&&(!t.hasClass("k10-toolbar-filter_selected")&&r?t.addClass("k10-toolbar-filter_selected"):t.hasClass("k10-toolbar-filter_selected")&&!r&&t.removeClass("k10-toolbar-filter_selected"));i=$k10(".k10-calorie-filter__panel");i.length>0&&k10.settings.showCalorieFilter&&(n=k10.calorieFilter.model.selectedCalorieValue[0]!==k10.calorieFilter.model.maxMinCalorieValue[0]||k10.calorieFilter.model.selectedCalorieValue[1]!==k10.calorieFilter.model.maxMinCalorieValue[1],!i.hasClass("k10-toolbar-filter_selected")&&n?i.addClass("k10-toolbar-filter_selected"):i.hasClass("k10-toolbar-filter_selected")&&!n&&i.removeClass("k10-toolbar-filter_selected"))},c=function(){if(k10.settings.calcFooter){var n=$k10(".k10-footer").height(),t=$k10(".k10-toolbar").height(),i=$k10(".k10-menus").height();$k10(".k10-all-courses").css({minHeight:i-n-t-5})}},ut=function(){t.log("menuHasBeenChanged");c();k10.settings.menuSelectorWithBack&&(k10.settings.courseSelector?$k10(".k10-toolbar").removeClass("k10-toolbar_hidden"):($k10(".k10-toolbar__back-to-menu-selector").removeClass("k10-toolbar__back-to-menu-selector_hidden"),$k10(".k10-toolbar__menu-container").removeClass("k10-toolbar__menu-container_hidden"),$k10(".k10-toolbar__label-filters").removeClass("k10-toolbar__label-filters_hidden")),$k10(".k10-all-courses").removeClass("k10-all-courses_hidden"),$k10(".k10-toolbar__menu-selector").addClass("k10-toolbar__menu-selector_hidden"))},ft=function(){if($k10("#k10-scroll").length>0)try{var n=new PerfectScrollbar("#k10-scroll");t.log("init k10-scroll")}catch(i){t.log("init k10-scroll fail");setTimeout(function(){try{var n=new PerfectScrollbar("#k10-scroll");t.log("init k10-scroll")}catch(i){t.log("init k10-scroll fail")}},200)}},et=function(){s.update()},ot=function(){var n=[],h,i;try{n=JSON.parse(window.localStorage.getItem("basket")||"[]");n==null?n=[]:n.length>0&&n[0].items.length>0&&(h=n[0].items[0].recipe,(typeof h.byoDetails=="undefined"||h.byoDetails===null)&&(window.localStorage.removeItem("basket"),window.localStorage.removeItem("basketTotal"),n=[]))}catch(l){t.errorLog("ui: basketHasBeenChanged-1","JSON Error: "+l.message);n=[]}var a=$k10(".k10-basket__content > tbody"),u=$k10(".k10-basket__dish-list"),v=$k10(".k10-basket__dish-list-container"),f=$k10(".k10-basket__section-tmpl").clone();if($k10(".k10-recipe__byo-recipe_checkbox").removeClass("k10-recipe__byo-recipe_checkbox_disabled"),n.length>0){i=[];try{i=JSON.parse(window.localStorage.getItem("basketTotal")||"[]");i==null&&(i=[])}catch(l){t.errorLog("ui: basketHasBeenChanged-2","JSON Error: "+l.message);i=[]}var p=$k10(".k10-basket__controls-tmpl").clone(),w=$k10(".k10-basket__header-tmpl").clone(),e=$k10(".k10-basket__item-tmpl > tbody").clone(),r=$k10(".k10-basket__total-tmpl > tbody").clone(),b=$k10(".k10-basket__submit-button-tmpl").clone(),y="",c=0,o=r.find(".k10-basket__menu-item-dsPercentage.k10-basket__totals").length>0,k=r.find(".k10-basket__menu-item-calorie.k10-basket__totals").length>0;$k10(".k10-basket__counter").text(i.count+" "+(i.count===1?"item":"items"));r.find(".k10-basket__menu-item-calorie > span.k10-basket__menu-item-calorie-value").html(i.kCal+(i.isAllKCal?"":"<sup>*<\/sup>"));o&&r.find(".k10-basket__menu-item-dsPercentage > span").html(i.gda+"%"+(i.isAllGda?"":"<sup>*<\/sup>"));r.find(".k10-basket__menu-item-price > span").html(k10.settings.CurrencySymbol+i.price);$k10.each(n,function(t){var u=n[t].items,i="";$k10.each(u,function(r){var l=u[r].recipe,y,p,f,w,h,b,v,a;if(typeof $k10(".k10-recipe__add-calories").attr("data-is-added")!="undefined"&&(y=$k10(".k10-recipe__add-calories[data-section-id='"+n[t].id+"'][data-recipe-id='"+l.id+"']"),y.attr("data-is-added","true"),p=y.closest(".k10-recipe__byo_inline"),p.length>0&&p.find(".k10-recipe__byo-recipe_checkbox").addClass("k10-recipe__byo-recipe_checkbox_disabled")),s.addNewRow(e,l,c,o,!1,"k10-basket"),i+=e.html(),f=$k10.isArray(l.byoDetails)?l.byoDetails:JSON.parse(l.byoDetails).data,f.length>0){for(w="",h=0;h<f.length;h++){for(b="",v=0;v<f[h].items.length;v++)s.addNewRow(e,f[h].items[v],c,o,!0,"k10-basket"),b+=e.html();a=$k10(".k10-basket__section-tmpl").clone();a.find(".k10-basket__content").html(b);k10.settings.showSectionsInMealPlan&&a.find(".k10-basket__header").html(f[h].name);w+='<tr class="k10-basket__line-items"><td class="k10-basket__line-item" colspan="'+(o?"6":k?"5":"4")+'">'+a[0].innerHTML+'<\/td><td class="k10-basket__line-item_mobile" colspan="6">'+a[0].innerHTML+"<\/td><\/tr>"}i+=w}c++});a.html(i+(t===n.length-1?r.html():""));f.find(".k10-basket__content").html(a.html());f.length>0&&(k10.settings.showSectionsInMealPlan&&f.find(".k10-basket__header").first().html(n[t].name),y+=f[0].innerHTML)});v[0].innerHTML=p.html()+w.html()+y+b.html();u.removeClass("k10-basket__dish-list_empty");k10.basket.initSelect2()}else v[0].innerHTML=k10.basket.model.paymentLink!==null?"<span onclick='k10.basket.showPaymentDialog();' style='cursor:pointer; text-decoration:underline;'>"+u.data("basketPaymentLinkMsg")+"<\/span> "+u.data("basketPaymentMsg"):u.data("basketEmptyMsg"),u.addClass("k10-basket__dish-list_empty"),$k10(".k10-basket__counter").text("0 items"),k10.basket.model.paymentLink!==null&&(window.location=k10.basket.model.paymentLink)},st=function(){var r=k10.supplier.model.currentSupplier,n=$k10(".k10-supplier"),t,i;n.length>0&&(n.find(".k10-supplier__back-to-menu-item").attr("data-recipe-id",k10.supplier.model.currentRecipe.id).attr("data-section-id",k10.supplier.model.currentRecipe.sectionId),n.find(".k10-supplier__menu-item-name").html(k10.supplier.model.currentRecipe.name),n.find(".k10-supplier__name").html(r.nm),n.find(".k10-supplier__desc").html(r.ds),t=n.find(".k10-supplier__country-flag"),t.length>0&&t.find("img").attr("src",k10.settings.BaseMenusUrl+t.attr("data-image-path")+k10.supplier.model.mapData.short_name+".png").attr("alt",k10.supplier.model.mapData.short_name),n.find(".k10-supplier__country-name").html(k10.supplier.model.mapData.long_name),i=$k10(".k10-recipe-card[data-section-id='"+k10.supplier.model.currentRecipe.sectionId+"'][data-recipe-id='"+k10.supplier.model.currentRecipe.id+"']"),i.length>0&&($k10(i[0]).addClass("k10-recipe-card_hidden"),$k10(n[0]).removeClass("k10-supplier_hidden"),$k10("html, body").scrollTop(0)))},ht=function(n){u=n;t=k10.tools.Debugger(!0,"ui");c();$k10(window).resize(function(){c()})};return{filterRecipesFullers:nt,filterRecipesSimpleByo:tt,filterRecipesSimple:it,init:ht,menuHasBeenChanged:ut,initScroll:ft,mpHasBeenChanged:et,basketHasBeenChanged:ot,showSupplier:st,filterRecipesAndByo:p.filterRecipes}}();k10=k10||{};k10.modal=function(){var n={$allMenus:"",$modal:"",$modals:"",$elems:"",slider:"",classModal:"",classElem:"",classClickElem:"",funcClickFromModal:"",funcScroll:"",scrollTop:0},t={},r=function(i){if(i!==undefined&&i.target!=undefined){n.$modal=n.$allMenus.find("."+n.classModal+"_opened").first();var r=$k10(i.target).first(),u=r.closest("."+n.classModal+"__container").length>0,f=n.$allMenus.find("."+n.classModal+"_opened").length>0;f&&!u?w():u&&n.funcClickFromModal(r);i.stopPropagation()}t.log("handleOutsideClicks")},v=function(i){if(i.hasClass("k10-modal-perfect__collapse-title")){i.toggleClass("k10-modal-perfect__collapse-title_open");var r=i.attr("data-collapsed-id");n.$modal.find("#"+r).toggleClass("k10-modal-perfect__collapse-box_hidden");t.log("click "+r)}},u=function(i){var r=$k10(i.target),s,h,f;if(typeof r.attr("href")=="undefined"||typeof r.attr("href")!="undefined"&&r.attr("href")==="#disclaimer"){if(s=n.$allMenus.find("."+n.classModal+"_opened").length>0,!s){if(y(),i!==undefined&&i.target!=undefined){if(h=$k10(i.target).closest("."+n.classElem).attr("data-modal-identifier"),n.$modal=$k10("."+n.classModal+"[data-modal-identifier="+h+"]").first(),n.$modal.addClass(n.classModal+"_opened"),f=n.$modal.find("."+n.classModal+"__container"),f.length>0){var c=n.$modal.find("."+n.classModal+"__header"),l=n.$modal.find("."+n.classModal+"__close"),e=0,o=0;c.length>0&&(e=c.first().outerHeight());l.length>0&&(o=l.first().outerHeight());f.attr("style","max-height:"+(e>0||o>0?n.$modal.outerHeight()-e-o+"px":"70vh"))}n.funcScroll(i);$k10(".k10-modal-perfect_byo").length>0&&(k10.modal.publish("openModal",k10.settings.byoFunc),k10.modal.publish("byoRootItemAutoCheck",r));k()}n.$elems.off("click","."+n.classClickElem,u)}i!==undefined&&i.stopPropagation();t.log("openModal")}},y=function(){n.scrollTop=window.pageYOffset;$k10("html").addClass(n.classModal+"__overflow");window.addEventListener("touchmove",h,{passive:!1})},p=function(){$k10("html").removeClass(n.classModal+"__overflow");window.scrollTo(0,n.scrollTop);window.removeEventListener("touchmove",h,{passive:!1})},h=function(t){var i=$k10(t.target),r;t.stopPropagation();r=i.closest("."+n.classModal+"_opened");(r.length==0||i.hasClass(n.classModal+"_opened"))&&t.preventDefault()},w=function(i){n.$modal=$k10("."+n.classModal+"_opened").first();d();n.$modal.removeClass(n.classModal+"_opened");p();i!==undefined&&i.stopPropagation();n.$elems.on("click","."+n.classClickElem,u);t.log("closeModal")},e=function(){var i,r;if(n.$modal.hasClass(n.classModal+"_opened")){if($k10(window).width()>767&&n.$modal.find(".k10-modal-perfect__scroll-info").length>0){i=n.$modal.find(".k10-modal-perfect__scroll-info").attr("id");try{r=new PerfectScrollbar("#"+i);t.log("init scroll-info "+i)}catch(e){t.log("init scroll-info "+i+" fail");setTimeout(function(){try{var n=new PerfectScrollbar("#"+i);t.log("init scroll-info "+i)}catch(r){t.log("init scroll-info "+i+" fail")}},200)}}}else if(n.$modal.find(".k10-modal-perfect__scroll").length>0){i=n.$modal.find(".k10-modal-perfect__scroll").attr("id");try{r=new PerfectScrollbar("#"+i);t.log("init scroll "+i)}catch(e){t.log("init scroll "+i+" fail");setTimeout(function(){try{var n=new PerfectScrollbar("#"+i);t.log("init scroll-info "+i)}catch(r){t.log("init scroll-info "+i+" fail")}},200)}}t.log("init scroll ")},b=function(){var i,r;if(n.$modal.hasClass(n.classModal+"_opened")&&n.$modal.find(".k10-modal-perfect__scroll").length>0){i=n.$modal.find(".k10-modal-perfect__scroll").attr("id");try{r=new PerfectScrollbar("#"+i);t.log("init scroll "+i)}catch(e){t.log("init scroll "+i+" fail");setTimeout(function(){try{var n=new PerfectScrollbar("#"+i);t.log("init scroll-info "+i)}catch(r){t.log("init scroll-info "+i+" fail")}},200)}}},k=function(){if(k10.settings.modalSlider){n.slider={$slider:n.$modal.find(".k10-slider"),$wrapper:n.$modal.find(".k10-slider__wrapper"),$next:n.$modal.find(".k10-slider__next"),$prev:n.$modal.find(".k10-slider__prev"),$dots:n.$modal.find(".k10-slider__dot"),slideCurrent:0,slideCount:n.$modal.find(".k10-slider__wrapper .k10-slide").length-1,slideInterval:3e3,slideId:0,translateWidth:0};n.slider.$next.on("click",o);n.slider.$prev.on("click",a);n.slider.$dots.on("click",l);$k10(window).on("resize",c);k10.settings.activeSlider?f(k10.settings.activeSlider,!1,!0):f(0,!1)}},c=function(){f(n.slider.slideCurrent,!1)},d=function(){k10.settings.modalSlider&&n.slider&&(n.slider.slideCurrent=0,n.slider.$next.off("click",o),n.slider.$prev.off("click",a),n.slider.$dots.off("click",l),$k10(window).off("resize",c))},l=function(){f(parseInt($k10(this).attr("data-slide-index"),10))},f=function(t,i,r){n.slider.slideId=t;n.slider.slideId==n.slider.slideCurrent&&i!=!1?o():n.slider.slideId!=n.slider.slideCurrent&&(n.slider.slideCurrent=n.slider.slideId,s(r))},o=function(){n.slider.slideCurrent==n.slider.slideCount||n.slider.slideCurrent<0||n.slider.slideCurrent>n.slider.slideCount?n.slider.slideCurrent=0:n.slider.slideCurrent++;s()},a=function(){n.slider.slideCurrent==0||n.slider.slideCurrent<0||n.slider.slideCurrent>n.slider.slideCount?n.slider.slideCurrent=n.slider.slideCount:n.slider.slideCurrent--;s()},s=function(t){var f,i,e,r;let u=100*n.slider.$slider.width()/n.slider.$wrapper.width();n.slider.translateWidth=u*(n.slider.slideCurrent+1)-u;f=n.slider.$wrapper.css("transition");t&&n.slider.$wrapper.css("transition","none");n.slider.$wrapper.css({transform:"translate(-"+n.slider.translateWidth+"%, 0)","-webkit-transform":"translate(-"+n.slider.translateWidth+"%, 0)","-ms-transform":"translate(-"+n.slider.translateWidth+"%, 0)"});n.slider.$slider.attr("data-slide-index",n.slider.slideCurrent);n.slider.$dots.removeClass("k10-slider__dot_active");n.slider.$slider.find(".k10-slider__dot[data-slide-index="+n.slider.slideCurrent+"]").addClass("k10-slider__dot_active");n.slider.$wrapper.find(".k10-slide").removeClass("k10-slide_active");i=n.slider.$slider.find(".k10-slide[data-slide-index="+n.slider.slideCurrent+"]");i.addClass("k10-slide_active");k10.settings.modalAdaptiveHeight==!0&&(e=n.slider.$wrapper.height(),r=i.height(),e<r&&n.slider.$wrapper.css({height:r}));setTimeout(function(){t&&n.slider.$wrapper.css("transition",f)},0)},g=function(){n.$modals.on("click",r);n.$modals.on("click","."+n.classModal+"__container",r);n.$elems.on("click","."+n.classClickElem,u)},nt=function(){n.$modals.off("click",r);n.$modals.off("click","."+n.classModal+"__container",r);n.$elems.off("click","."+n.classClickElem,u)},i=function(){n.$allMenus=$k10(".k10-menus");n.classModal="k10-modal-perfect";n.$elems=$k10("."+n.classElem);n.$modals=$k10("."+n.classModal);n.funcClickFromModal=v;nt();g()},tt=function(){t=k10.tools.Debugger(!0,"modal Perfect");n.classElem="k10-recipe";n.classClickElem="k10-recipe__details";n.funcScroll=e;i();t.log("init modal Perfect")},it=function(){t=k10.tools.Debugger(!0,"modal Perfect");n.classElem="k10-recipe";n.classClickElem="k10-recipe__show-modal";n.funcScroll=e;i();t.log("init modal Perfect")},rt=function(){t=k10.tools.Debugger(!0,"modal Customise");n.classElem="k10-recipe";n.classClickElem="k10-recipe__customise-button";n.funcScroll=e;i();t.log("init modal Perfect")},ut=function(){t=k10.tools.Debugger(!0,"modal Perfect Disclaimer");n.classElem="k10-toolbar";n.classClickElem="k10-toolbar__disclaimer";n.funcScroll=b;i();t.log("init modal Perfect Disclaimer")},ft=function(){t=k10.tools.Debugger(!0,"modal Perfect Inline Disclaimer");n.classElem="k10-toolbar";n.classClickElem="k10-toolbar__inline-disclaimer a";n.funcScroll=function(){};i();t.log("init modal Perfect inline Disclaimer")};return{initPerfect:tt,initShowModal:it,initCustomise:rt,initModalDisclaimer:ut,initModalInlineDisclaimer:ft}}();"use strict";var _slicedToArray=function(){function n(n,t){var r=[],u=!0,f=!1,e=undefined,i,o;try{for(i=n[Symbol.iterator]();!(u=(o=i.next()).done);u=!0)if(r.push(o.value),t&&r.length===t)break}catch(s){f=!0;e=s}finally{try{!u&&i["return"]&&i["return"]()}finally{if(f)throw e;}}return r}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return n(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),_get=function(n,t,i){var e=!0,r,f,o;n:while(e){var u=n,s=t,h=i;if(e=!1,u===null&&(u=Function.prototype),r=Object.getOwnPropertyDescriptor(u,s),r===undefined){if(f=Object.getPrototypeOf(u),f===null)return undefined;n=f;t=s;i=h;e=!0;r=f=undefined;continue n}else return"value"in r?r.value:(o=r.get,o===undefined)?undefined:o.call(h)}},_createClass=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}();k10=k10||{};k10.byo=function(){var n={$menus:"",$modal:"",classModal:"",recalcFunc:"",byo:null,$recipe:"",$recipeCard:"",byos:[],primarylablesClass:""},t,o=k10.className,ut=function(){function n(){_classCallCheck(this,n);this.wrapperClassName="k10-recipe__total-may-labels";this.titleClassName="k10-recipe__total-may-title";this.bodyClassName="k10-recipe__total-may-body";this.pageLabelsWrapperClassName="k10-recipe__may-contain-label-wrapper";this.pageLabelsBodyClassName="k10-recipe__may-contain-label-body"}return _createClass(n,[{key:"showLabels",value:function(n,t,i){var r=_slicedToArray(n,3),c=r[0],l=r[1],o=r[2],u=o.join(i),f=t.find("."+this.pageLabelsWrapperClassName),s=t.find("."+this.pageLabelsBodyClassName),h=t.find("."+this.bodyClassName),e=t.find("."+this.wrapperClassName);h.text(u);s.text(u);u===""?(e.addClass("k10-hidden"),f.addClass("k10-hidden")):(e.removeClass("k10-hidden"),f.removeClass("k10-hidden"))}},{key:"isPresentOnPage",value:function(){return $k10("."+this.wrapperClassName).length}}]),n}(),h=new ut,ft=function(){function n(t,i){if(_classCallCheck(this,n),i!=undefined)if(this.$byo=i.find(".k10-recipe__byo"),i.hasClass("k10-recipe__byo_inline"))this.$recipe=i.find(".k10-recipe_byo:not(.k10-recipe__byo-item)");else if(i.closest(".k10-recipe_byo").length>0)this.$recipe=i.closest(".k10-recipe_byo");else{var r=i.closest(".k10-recipe-card.k10-recipe-card_byo");r.length>0&&(this.$recipeCard=r,this.$recipe=t.find(".k10-recipe.k10-recipe_byo[data-menu-section-identifier='"+r.attr("data-menu-section-identifier")+"'][data-recipe-identifier='"+r.attr("data-recipe-identifier")+"']"))}else this.$byo=t.find(".k10-recipe__byo"),this.$recipe=t.find(".k10-recipe_byo")}return _createClass(n,null,[{key:"recalcByo",value:function(n,i,r,u,f){for(var o,c,l,v="",s=0,h=[],a=[],e=0;e<n.length;e++)n[e].price!=""&&(s+=parseFloat(n[e].price)),u=this.recalcNutrients(n[e].ntrs,u),v+=n[e].name+" ",(k10.settings.showBasket||k10.settings.mealPlanner)&&(o=0,c=n[e].ntrs.map(function(n){return n.Id}).indexOf("2"),c>=0&&n[e].ntrs[c].Val!=""&&(o+=parseFloat(n[e].ntrs[c].Val.replace(",",""))),l=h.map(function(n){return n.id}).indexOf(n[e].subByoId),l===-1&&(h.push({id:n[e].subByoId,name:n[e].subByoName,items:[]}),l=h.length-1),h[l].items.push({id:n[e].id,name:n[e].name,kCal:o,desc:n[e].desc,parentId:f,price:(n[e].price==="-"||n[e].price===""?0:parseFloat(n[e].price.toString().replace(/,/g,""))).toFixed(2),gda:o==="-"||o===""||o===0?"-":Math.ceil(parseFloat(o.toString().replace(/,/g,""))*100/(k10.settings.showBasket?k10.basket.getDailyGda():k10.mealPlanner.getDailyGda()))}));return a=this.recalcLabels(n,r!=""),t.log("k10Byo - recalcByo totalPrice:"+s),{totalPrice:s,totalPriceCurrency:s<0?"-"+i+(s*-1).toFixed(2):i+s.toFixed(2),totalNutrients:u,totalLabels:a,mayContain:r,byoDetails:h}}},{key:"recalcNutrients",value:function(n,t){var i,r;if(t.length==0&&n.length>0)for(i=0;i<n.length;i++)t.push({Id:n[i].Id,Val:0,Name:n[i].Name+" ("+n[i].Uom+")",Uom:n[i].Uom});for(i=0;i<n.length;i++)r=t.map(function(n){return n.Id}).indexOf(n[i].Id),r>=0&&n[i].Val!=""&&(t[r].Val+=parseFloat(n[i].Val.replace(",","")));return t}},{key:"recalcLabels",value:function(n,t){for(var a,l,s,r,i,e,c,u,h,f=[],o=0;o<n.length;o++)for(r=n[o].lbls,i=0;i<r.length;i++)if(e=f.map(function(n){return n.Id}).indexOf(r[i].Id),e<0){for(a=r[i].Id,l=!0,u=0;u<n.length;u++)e=n[u].lbls.map(function(n){return n.Id}).indexOf(a),e<0&&(l=!1);r[i].IsExtended=="True"&&(t==!1||r[i].Value!="maybe")?f.push(r[i]):n[o].lbls[i].IsExtended=="False"&&l==!0&&f.push(r[i])}else if(r[i].Childs.length>0)for(s=r[i].Childs,u=0;u<s.length;u++)h=f[e].Childs.map(function(n){return n.Id}).indexOf(s[u].Id),h<0&&f[e].Childs.push(s[u]);if(t==!0)for(o=0;o<n.length;o++)for(r=n[o].lbls,i=0;i<r.length;i++)if(e=f.map(function(n){return n.Id}).indexOf(r[i].Id),e<0)r[i].IsExtended=="True"&&r[i].Value=="maybe"&&f.push(r[i]);else if(r[i].Childs.length>0)for(c=r[i].Childs,u=0;u<c.length;u++)h=f[e].Childs.map(function(n){return n.Id}).indexOf(c[u].Id),h<0&&f[e].Childs.push(c[u]);return f.sort(function(n,t){return parseInt(n.Order,10)==parseInt(t.Order,10)?0:parseInt(n.Order,10)<parseInt(t.Order,10)?-1:1})}},{key:"getLabelsDescription",value:function(n,t,i){var r,o,s,u;typeof t=="undefined"&&(t=", ");var f=[],h=[],e=[];for(r=0;r<n.length;r++)if(n[r].IsExtended==="False")h.push(n[r].Description);else if(n[r].Value!=="no")if(n[r].Childs.length===0)i&&n[r].Value==="maybe"?e.push(n[r].Description):f.push(n[r].Description);else{for(o=[],s=[],u=0;u<n[r].Childs.length;u++)i&&n[r].Childs[u].Value==="maybe"?s.push(n[r].Childs[u].Description):o.push(n[r].Childs[u].Description);o.length>0&&f.push(n[r].Description+this.getChildsYes(n[r],i));s.length>0&&e.push(n[r].Description+this.getChildsMay(n[r],i))}return[h,f,e]}},{key:"getLabelsImages",value:function(n,t){for(var o,s,r,u=[],h=[],f=[],i=0;i<n.length;i++)if(n[i].IsExtended==="False")h.push({desc:n[i].Description,img:e(n[i])});else if(n[i].Value!=="no")if(n[i].Childs.length===0)t&&n[i].Value==="maybe"?f.push({desc:n[i].Description,img:e(n[i])}):u.push({desc:n[i].Description,img:e(n[i])});else{for(o=[],s=[],r=0;r<n[i].Childs.length;r++)t&&n[i].Childs[r].Value==="maybe"?s.push(n[i].Childs[r].Description):o.push(n[i].Childs[r].Description);o.length>0&&u.push({desc:n[i].Description+this.getChildsYes(n[i],t),img:e(n[i])});s.length>0&&f.push({desc:n[i].Description+this.getChildsMay(n[i],t),img:e(n[i])})}return[h,u,f]}},{key:"getChildsMay",value:function(n,t){if(t){var i=n.Childs.filter(function(n){return n.Value==="maybe"}).map(function(n){return n.Description});if(i.length>0)return" ("+i.join(", ")+")"}return""}},{key:"getChildsYes",value:function(n,t){var i=t?n.Childs.filter(function(n){return n.Value!=="maybe"}).map(function(n){return n.Description}):n.Childs.map(function(n){return n.Description});return i.length>0?" ("+i.join(", ")+")":""}},{key:"getChilds",value:function(n,t,i){for(var u=[],f=[],r=0;r<n.Childs.length;r++)i&&n.Childs[r].Value=="maybe"?f.push(n.Childs[r].Description):u.push(n.Childs[r].Description);return u.length>0?" ("+u.join(", ")+")":f.length>0?" ("+f.join(", ")+")":""}}]),n}(),s=function(n){function t(n,i){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n,i);this.separatorParent=" / ";this.$subbyos=this.$byo.find(".k10-sub-byo,.k10-sub-byo__root")}return _inherits(t,n),_createClass(t,null,[{key:"getSubByo",value:function(n){return $k10(n).closest(".k10-sub-byo,.k10-sub-byo__root").first()}},{key:"oneMaxClick",value:function(n){var r=this.getMax(n),t=this.getSubByo(n),u=t.find(".k10-byo_core"),i;r-u.length==1&&(i=$k10(n).hasClass("k10-recipe__byo-recipe")?$k10(n).attr("data-id"):$k10(n).closest(".k10-recipe__byo-recipe").attr("data-id"),this.cleanCheckedAllRecipeInByo(t,i))}},{key:"grabValuesRecipes",value:function(n){for(var i,f,r=[],u=n.find(".k10-recipe__byo-recipe").filter(function(n,t){var i=$k10(t).find(".k10-recipe__byo-recipe_checkbox-input").length==0,r=$k10(t).find(".k10-recipe__byo-recipe_checkbox-input").prop("checked")&&!$k10(t).hasClass("k10-recipe_hidden");if(i||r)return!0}),t=0;t<u.length;t++){i=$k10(u[t]).attr("data-recipe");try{i&&(f=JSON.parse(i),r.push(f))}catch(e){k10.byo._debug.errorLog("byo","JSON Error: "+e.message)}}return r}},{key:"grabValuesNutrients",value:function(n){for(var r=[],i=n.find(".k10-recipe__nutrient-value, .k10-recipe-card__nutrient-value"),t=0;t<i.length;t++){var u=$k10(i[t]).attr("data-nutr-id"),f=$k10(i[t]).attr("data-nutr-name"),e=$k10(i[t]).attr("data-nutr-uom");r.push({Id:u,Val:0,Name:f,Uom:e})}return r}},{key:"checkError",value:function(n){for(var t=0;t<n.length;t++){var r=this.getMaxByo(n[t]),u=this.getMinByo(n[t]),i=this.countCheckedRecipes($k10(n[t]));if(i>r||i<u)return!0}return!1}},{key:"countCheckedRecipes",value:function(n){for(var i=0,r=$k10(n).find(".k10-recipe__byo-recipe"),t=0;t<r.length;t++)this.hasChecked(r[t])&&i++;return i}},{key:"updateMessageError",value:function(n){var t=this.getSubByo(n);this.updateMessageErrorSubByo(t)}},{key:"updateMessageErrorSubByo",value:function(n){var t=this.getMaxByo(n),i=this.getMinByo(n),r=this.countCheckedRecipes(n),u=$k10(n).find(".k10-byo__message_max").first(),f=$k10(n).find(".k10-byo__message_min").first();t!=0&&r>t?$k10(u).addClass("k10-byo__message_show"):$k10(u).removeClass("k10-byo__message_show");i!=0&&r<i?$k10(f).addClass("k10-byo__message_show"):$k10(f).removeClass("k10-byo__message_show")}},{key:"updateMessageErrorSubByoAll",value:function(n){for(var t=0;t<n.length;t++)this.updateMessageErrorSubByo(n[t])}},{key:"cleanCheckedAllRecipeInByo",value:function(n,t){for(var u,r=$k10(n).find(".k10-recipe__byo-recipe"),i=0;i<r.length;i++)u=$k10(r[i]).attr("data-id"),!this.hasChecked(r[i])||$k10(r[i]).hasClass("k10-recipe_hidden")||u==t||$k10(r[i]).hasClass("k10-byo_core")||this.checked(r[i])}},{key:"getMax",value:function(n){return this.getMaxByo(this.getSubByo(n))}},{key:"getMin",value:function(n){return this.getMinByo(this.getSubByo(n))}},{key:"getMaxByo",value:function(n){return parseInt($k10(n).attr("data-selectableitemmax"),10)}},{key:"getMinByo",value:function(n){return parseInt($k10(n).attr("data-selectableitemmin"),10)}},{key:"checked",value:function(n){var i=$k10(n).find(".k10-recipe__byo-recipe_checkbox-input"),t=$k10(n).closest(".k10-recipe__byo-recipe");t.hasClass("k10-recipe_hidden")||(t.hasClass("k10-recipe__byo-recipe_selected")&&i.prop("checked")===!0?t.removeClass("k10-recipe__byo-recipe_selected"):t.hasClass("k10-recipe__byo-recipe_selected")||i.prop("checked")!==!1||t.addClass("k10-recipe__byo-recipe_selected"),i.prop("checked",!i.prop("checked")))}},{key:"hasChecked",value:function(n){var i=$k10(n).find(".k10-recipe__byo-recipe_checkbox-input"),t=$k10(n).closest(".k10-recipe__byo-recipe");return(t.hasClass("k10-recipe__byo-recipe_selected")&&i.prop("checked")===!1?t.removeClass("k10-recipe__byo-recipe_selected"):t.hasClass("k10-recipe__byo-recipe_selected")||i.prop("checked")!==!0||t.addClass("k10-recipe__byo-recipe_selected"),!t.hasClass("k10-recipe_hidden")&&i.prop("checked")===!0||t.hasClass("k10-byo_core"))?!0:!1}},{key:"toggleMPbutton",value:function(n,t){var i=$k10(t).find(".k10-recipe__add-calories");n==!0?i.addClass("k10-recipe__add-calories_hide"):i.removeClass("k10-recipe__add-calories_hide")}}]),t}(ft),r=function(n){function i(n,r){_classCallCheck(this,i);_get(Object.getPrototypeOf(i.prototype),"constructor",this).call(this,n,r);this.$modal=r;this.separatorParent=" / ";t.log("init ByoModalPerfect")}return _inherits(i,n),_createClass(i,null,[{key:"updateValues",value:function(n,t){function lt(n,t){var r=_slicedToArray(n,3),u=r[0],f=r[1],e=r[2],i="";return i=u.length>0?k10.settings.suitableForTitle+" ":"",i+=u.length>0?u.join(t):"",i+=i!==""?s:"",i+=f.length>0?k10.settings.isDiateryInfoSample2?k10.settings.containsTitle+" ":"":"",i+=f.length>0?f.join(t):"",i+=i!==""?s:"",i+=e.length?k10.settings.mayContainTitle:"",i+=e.length?k10.settings.isDiateryInfoSample2?" ":": ":"",i+e.join(t)}var b,l,c,a,r,v,y,s,nt,p,ot,st,ht,u,w,rt,f,ut,i;for(k10.settings.HideZeroPrice&&n.totalPrice==0?(n.totalPriceCurrency=k10.settings.SubsNullPrice,n.totalPriceCurrency==""&&t.$recipe.find(".k10-recipe__price-dash").length>0&&t.$recipe.find(".k10-recipe__price-dash").addClass("k10-recipe__price-dash_hidden")):n.totalPriceCurrency!=""&&t.$recipe.find(".k10-recipe__price-dash").length>0&&t.$recipe.find(".k10-recipe__price-dash").removeClass("k10-recipe__price-dash_hidden"),b=t.$recipe.find(".k10-recipe__price"),l=0;l<b.length;l++)$k10(b[l]).html(k10.settings.showPrice?n.totalPriceCurrency:"");for(c=t.$recipe.find(".k10-recipe__add-calories"),a=0;a<c.length;a++)$k10(c[a]).attr("data-recipe-price",n.totalPrice);for(r=null,v=t.$recipe.find(".k10-recipe__nutrient-value"),f=0;f<v.length;f++){var k=$k10(v[f]).attr("data-nutr-id"),ft=n.totalNutrients.map(function(n){return n.Id}).indexOf(k),ct=k10.roundingRules.getValueStr(parseInt(k,10),n.totalNutrients[ft].Val),d=ct.roundedValueStr.split("."),g=d[0].split(/(?=(?:\d{3})+$)/).join(",")+(d[1]?"."+d[1]:"");if(k==2)for(y=0;y<c.length;y++)$k10(c[y]).attr("data-recipe-kcal",g),r=g;$k10(v[f]).html(g+" "+n.totalNutrients[ft].Uom)}for(s=k10.settings.labelsSeparator,nt=[],p=0;p<n.totalLabels.length;p++)nt.push(n.totalLabels[p].Id);if(t.$recipe.attr("data-labels",nt.join(",")),r==null?(r=0,t.$recipe.attr("data-calories","")):t.$recipe.attr("data-calories",r),k10.settings.ShowPrimaryNutrients&&k10.settings.IsEnergyPrimaryNutrient){var tt=t.$recipe.find("."+o.recipeNutrientEnergy),it=t.$recipe.find("."+o.byoNutrientEnergy),et=k10.roundingRules.getValueStr(2,r);tt.length>0&&(r!=0?tt.html(k10.settings.EnergyNutrientsPrefix+r+" "+et.postfix+k10.settings.EnergyNutrientsPostfix):tt.html(""));it.length>0&&(r!=0?it.html(k10.settings.EnergyNutrientsPrefix+r+" "+et.postfix+k10.settings.EnergyNutrientsPostfix):it.html(""))}if(k10.settings.byoUpdateValuesLabelsAllergens||k10.settings.byoUpdateValuesLabelsSuitableFor)u="",k10.settings.byoUpdateValuesLabelsSuitableFor&&(ot=t.$recipe.find(".k10-recipe__labels.k10-recipe__labels_suitableFor"),u=k10.settings.byoUpdateValuesLabelsSuitableFor(this,n),ot.html(u)),k10.settings.byoUpdateValuesLabelsAllergens&&(st=t.$recipe.find(".k10-recipe__labels.k10-recipe__labels_allergens"),u=k10.settings.byoUpdateValuesLabelsAllergens(this,n),st.html(u));else{if(ht=t.$recipe.find(".k10-recipe__labels,.k10-recipe__lables"),u="",k10.settings.updateValuesLabels)u=k10.settings.byoUpdateValuesLabels(this,n);else if(k10.settings.iconLabels==!0){for(i=0;i<n.totalLabels.length;i++)n.totalLabels[i].Value==="maybe"&&n.mayContain&&h.isPresentOnPage()||(u+="<span class='k10-recipe__lable k10-recipe__dietary-icon'>\n                            <img class='k10-popover__label k10-recipe__dietary-icon-img'\n                            data-tk-popover='dietary-popover' data-trigger='hover'  data-placement='auto' data-toggle='popover' data-container='.k10-popover-wrapper2'\n                            data-original-title=\" "+n.totalLabels[i].TooltipDescription+" "+this.getChilds(n.totalLabels[i],n.separatorParent,n.mayContain,s,!1)+'"\n                            src='+e(n.totalLabels[i])+" >\n                            <\/span>");n.mayContain&&(w=this.getLabelsDescription(n.totalLabels,n.separatorParent,n.mayContain,s,!1),h.showLabels(w,t.$recipe,n.separatorParent))}else w=this.getLabelsDescription(n.totalLabels,n.separatorParent,n.mayContain,s,!1),u=lt(w,n.separatorParent);ht.html(u)}for(rt=t.$recipe.find(".k10-recipe__dietary-container"),f=0;f<rt.length;f++){for(ut="",i=0;i<n.totalLabels.length;i++)n.totalLabels[i].IsPrimary=="True"&&(ut+=k10.settings.popoverPrimaryLabel?k10.settings.isDiateryInfoSample2?'<span class="k10-recipe__lable k10-recipe__lable_primary">\n                                        <img class="k10-popover__label k10-recipe__dietary-icon-img" src="'+e(n.totalLabels[i])+'"\n                                        data-tk-popover="dietary-popover" data-trigger="hover" data-placement="auto" data-toggle="popover"\n                                        data-container=".k10-popover-wrapper2" title=""\n                                        data-original-title=" '+n.totalLabels[i].TooltipDescription+"\n                                        "+this.getChilds(n.totalLabels[i],n.separatorParent,n.mayContain,s,!1)+'"><\/span>':'<span class="k10-recipe__lable k10-recipe__lable_primary k10-recipe__dietary-icon k10-recipe__dietary-icon_main">\n                                        <img class="k10-popover__label k10-recipe__dietary-icon-img k10-recipe__primary-label-img" src="'+e(n.totalLabels[i])+'"\n                                        data-tk-popover="dietary-popover" data-trigger="hover" data-placement="auto" data-toggle="popover"\n                                        data-container=".k10-popover-wrapper2" title=""\n                                        data-original-title=" '+n.totalLabels[i].TooltipDescription+"\n                                        "+this.getChilds(n.totalLabels[i],n.separatorParent,n.mayContain,s,!1)+'"><\/span>':"<img class='k10-recipe__icon_img' src=\""+e(n.totalLabels[i])+'" >');$k10(rt[f]).html(ut)}(k10.settings.popoverPrimaryLabel==!0||k10.settings.iconLabels==!0)&&k10.popover.init(k10.settings.popoverInit)}}]),i}(s),u=function(n){function i(n,r){_classCallCheck(this,i);_get(Object.getPrototypeOf(i.prototype),"constructor",this).call(this,n,r);this.$modal=r;this.separatorParent=", ";t.log("constructor ByoModalPerfectByron")}return _inherits(i,n),_createClass(i,null,[{key:"updateValues",value:function(n,t){for(var f,k,h,rt,d,r,g,nt,i,y,tt=t.$recipe.find(".k10-recipe__price"),p=0;p<tt.length;p++)$k10(tt[p]).html(k10.settings.showPrice?n.totalPriceCurrency:"");if(k10.settings.showLabelFilter){var ut=k10.settings.labelsSeparator,w=[],a=[],b=[];for(i=0;i<n.totalLabels.length;i++)if(w.push(n.totalLabels[i].Id),n.totalLabels[i].Value!=="maybe"?a.push(n.totalLabels[i].Id):b.push(n.totalLabels[i].Id),f=n.totalLabels[i].Childs,typeof f!="undefined"&&f.length>0)for(r=0;r<f.length;r++)w.push(f[r].Id),f[r].Value!=="maybe"?a.push(f[r].Id):b.push(f[r].Id);t.$recipe.attr("data-labels",a.join(","));t.$recipe.attr("data-all-labels",w.join(","));t.$recipe.attr("data-no-may-labels",a.join(","));t.$recipe.attr("data-may-labels",b.join(","));var u=this.getLabelsDescription(n.totalLabels,n.separatorParent,n.mayContain,ut),it=n.mayContain&&u[2].length>0,e=t.$byo.find(".k10-recipe__labels_suitable"),o=t.$byo.find(".k10-recipe__labels_contains"),s=t.$byo.find(".k10-recipe__labels_may");for(e.length>0&&(e.html(u[0].length>0?e.attr("data-label-group-name")+" "+u[0].join(n.separatorParent):""),u[1].length>0&&!it?e.addClass("k10-recipe__labels_single"):e.removeClass("k10-recipe__labels_single"),u[0].length===0?e.addClass("k10-recipe__labels_hidden"):e.removeClass("k10-recipe__labels_hidden")),o.length>0&&(o.html(u[1].length>0?o.attr("data-label-group-name")+" "+u[1].join(n.separatorParent):""),u[0].length>0&&!it?o.addClass("k10-recipe__labels_single"):o.removeClass("k10-recipe__labels_single"),u[1].length===0?o.addClass("k10-recipe__labels_hidden"):o.removeClass("k10-recipe__labels_hidden")),s.length>0&&(s.html(u[2].length>0?s.attr("data-label-group-name")+" "+u[2].join(n.separatorParent):""),u[0].length>0&&u[1].length>0?s.addClass("k10-recipe__labels_single"):s.removeClass("k10-recipe__labels_single"),u[2].length===0?s.addClass("k10-recipe__labels_hidden"):s.removeClass("k10-recipe__labels_hidden")),k="",h=$k10.grep(n.totalLabels,function(t){return t.IsPrimary=="True"&&(n.mayContain==!1||t.Value!="maybe")}),r=0;r<h.length;r++)rt=(r==0?"(":"")+h[r].ShortName+(r==h.length-1?")":", "),k+="<span class='k10-popover__label' data-tk-popover='dietary-popover' data-trigger='hover' data-placement='auto'  data-toggle='popover' data-container='.k10-popover-wrapper2' title='"+h[r].TooltipDescriptionWithChilds+"'>"+rt+"<\/span>";d=t.$recipe.find(".k10-recipe__name-wrapper");d.find(".k10-popover__label").remove();h.length>0&&$k10(k).appendTo(d);var l=t.$recipe.find(".k10-popover").first(),ft=l.find(".k10-popover__label-names-wrapper"),v=this.getLabelsImages(n.totalLabels,n.mayContain),c="";for(i=0;i<v.length;i++)if(v[i].length>0){for(c+="<div><b>"+(i==0?l.attr("data-suitable"):i==1?l.attr("data-contains"):l.attr("data-may"))+"<\/b>",r=0;r<v[i].length;r++)g=v[i][r],c+="<span class='k10-popover__label-wrapper'><img class='k10-popover__label' src='"+g.img+"' data-tk-popover='dietary-popover' data-trigger='hover' data-placement='auto' data-toggle='popover' title='"+g.desc+"'/><\/span>";c+="<\/div>"}for(c.length===0&&(c="<div>"+l.attr("data-empty")+"<\/div>"),ft.html(c),nt=$k10(".k10-recipe__controls"),i=0;i<nt.length;i++)y=$k10(nt[i]),y.find(".k10-recipe__info").remove(),$k10("<span class='k10-recipe__info'><span class='k10-recipe__popover-tooltip' data-tk-popover='dietary-popover' data-k10-toggle='popover'  data-k10-trigger='click' data-k10-placement='smart' data-k10-template='.k10-popover'><span class='k10-recipe__info-img'  data-tk-popover='help-popover' data-toggle='popover' data-trigger='hover' data-placement='top' title='"+y.attr("data-info-title")+"'><\/span><\/span><\/span>").appendTo(y);k10.popover.init(k10.settings.popoverInit)}}}]),i}(s),f=function(n){function i(n,r){_classCallCheck(this,i);_get(Object.getPrototypeOf(i.prototype),"constructor",this).call(this,n,r);this.$modal=r;this.separatorParent=", ";t.log("init ByoRecipeCard")}return _inherits(i,n),_createClass(i,null,[{key:"updateValues",value:function(n,t){var g,nt,f,w,ut,c,ft,at,h,s,yt,p,i,d,u;if(typeof t.$recipe!="undefined"){for(g=$k10.merge(t.$recipe.find(".k10-recipe__price"),t.$recipeCard.find(".k10-recipe-card__price")),i=0;i<g.length;i++)$k10(g[i]).html(k10.settings.showPrice?" - "+n.totalPriceCurrency:"");for(nt=t.$recipeCard.find(".k10-byo__totals_price"),nt.length>0&&$k10(nt[0]).html(k10.settings.showPrice?n.totalPriceCurrency:""),f=null,w=$k10.merge(t.$recipe.find(".k10-recipe__nutrient-value"),t.$recipeCard.find(".k10-recipe-card__nutrient-value")),i=0;i<w.length;i++){var tt=$k10(w[i]).attr("data-nutr-id"),lt=n.totalNutrients.map(function(n){return n.Id}).indexOf(tt),wt=k10.roundingRules.getValueStr(parseInt(tt,10),typeof n.totalNutrients[lt]!="undefined"?n.totalNutrients[lt].Val:0),it=wt.roundedValueStr.split("."),rt=it[0].split(/(?=(?:\d{3})+$)/).join(",")+(it[1]?"."+it[1]:"");$k10(w[i]).html(rt);tt=="2"&&(ut=t.$recipeCard.find(".k10-byo__totals_nutr"),ut.length>0&&$k10(ut[0]).html(rt),f=rt)}var bt=k10.settings.labelsSeparator,b=[],k=[];for(i=0;i<n.totalLabels.length;i++)if(b.push(n.totalLabels[i].Id),n.totalLabels[i].Value!=="maybe"&&k.push(n.totalLabels[i].Id),c=n.totalLabels[i].Childs,typeof c!="undefined"&&c.length>0)for(u=0;u<c.length;u++)b.push(c[u].Id),c[u].Value!=="maybe"&&k.push(c[u].Id);if(ft=$k10(".k10-toggle__input-main[name='k10-filter-may']"),at=ft.length>0?n.mayContain&&ft.prop("checked"):!1,t.$recipe.attr("data-labels",at?b.join(","):k.join(",")),t.$recipe.attr("data-all-labels",b.join(",")),t.$recipe.attr("data-no-may-labels",k.join(",")),f==null?(f=0,t.$recipe.attr("data-calories","")):t.$recipe.attr("data-calories",f),k10.settings.ShowPrimaryNutrients&&k10.settings.IsEnergyPrimaryNutrient){var et=t.$recipe.find("."+o.recipeNutrientEnergy),ot=t.$recipe.find("."+o.byoNutrientEnergy),vt=k10.roundingRules.getValueStr(2,f);et.length>0&&(f!=0?et.html(k10.settings.EnergyNutrientsPrefix+f+" "+vt.postfix+k10.settings.EnergyNutrientsPostfix):et.html(""));ot.length>0&&(f!=0?ot.html(k10.settings.EnergyNutrientsPrefix+f+" "+vt.postfix+k10.settings.EnergyNutrientsPostfix):ot.html(""))}for(h=t.$recipeCard.find(".k10-sub-byo"),s=0;s<h.length;s++)yt=$k10(h[s]).find(".k10-recipe_sub-byo:not(.k10-recipe_hidden)"),yt.length===0?($k10(h[s]).find(".k10-byo__message:not(.k10-byo__message_filtered)").addClass("k10-byo__message_hidden"),$k10(h[s]).find(".k10-byo__message_filtered").addClass("k10-byo__message_show"),$k10(h[s]).find(".k10-recipe__sub-byo_header").addClass("k10-recipe__sub-byo_header_hidden")):($k10(h[s]).find(".k10-byo__message:not(.k10-byo__message_filtered)").removeClass("k10-byo__message_hidden"),$k10(h[s]).find(".k10-byo__message_filtered").removeClass("k10-byo__message_show"),$k10(h[s]).find(".k10-recipe__sub-byo_header").removeClass("k10-recipe__sub-byo_header_hidden"));var r=this.getLabelsDescription(n.totalLabels,n.separatorParent,n.mayContain,bt),pt=n.mayContain&&r[2].length>0,st=t.$recipeCard.find(".k10-recipe-card__image").length>0,l=t.$recipeCard.find(".k10-recipe-card__dietary-container_suitable"),a=t.$recipeCard.find(".k10-recipe-card__dietary-container_contains"),v=t.$recipeCard.find(".k10-recipe-card__dietary-container_may"),ht=t.$recipeCard.find(".k10-recipe-card__image"),ct=t.$recipeCard.find(".k10-recipe-card__desc"),y=ct.length>0;for(l.length>0&&(l.html(r[0].length>0?l.attr("data-label-group-name")+" "+r[0].join(n.separatorParent):""),r[1].length>0&&!pt&&!y&&!st?l.addClass("k10-recipe-card__dietary-container_single"):l.removeClass("k10-recipe-card__dietary-container_single"),r[0].length===0?l.addClass("k10-recipe__dietary-container_hidden"):l.removeClass("k10-recipe__dietary-container_hidden")),a.length>0&&(a.html(r[1].length>0?a.attr("data-label-group-name")+" "+r[1].join(n.separatorParent):""),r[0].length>0&&!pt&&!y&&!st?a.addClass("k10-recipe-card__dietary-container_single"):a.removeClass("k10-recipe-card__dietary-container_single"),r[1].length===0?a.addClass("k10-recipe__dietary-container_hidden"):a.removeClass("k10-recipe__dietary-container_hidden")),v.length>0&&(v.html(r[2].length>0?v.attr("data-label-group-name")+" "+r[2].join(n.separatorParent):""),r[0].length>0&&r[1].length>0&&!y&&!st?v.addClass("k10-recipe-card__dietary-container_single"):v.removeClass("k10-recipe-card__dietary-container_single"),r[2].length===0?v.addClass("k10-recipe__dietary-container_hidden"):v.removeClass("k10-recipe__dietary-container_hidden")),y&&r[0].length==0&&r[1].length==0&&r[2].length==0?ct.addClass("k10-recipe-card__desc_no-names"):ct.removeClass("k10-recipe-card__desc_no-names"),ht.length>0&&(!y&&(r[0].length>0||r[1].length>0||r[2].length>0)?ht.addClass("k10-recipe-card__image_no-desc"):ht.removeClass("k10-recipe-card__image_no-desc")),p=$k10.merge(t.$recipe.find(".k10-recipe__dietary-container_primary"),t.$recipeCard.find(".k10-recipe-card__dietary-container_primary")),i=0;i<p.length;i++){for(d="",u=0;u<n.totalLabels.length;u++)n.totalLabels[u].IsPrimary=="True"&&(n.mayContain==!1||n.totalLabels[u].Value!="maybe")&&(d+="<span class='k10-recipe__label k10-recipe__label_primary'><img class='k10-popover__label"+(n.totalLabels[u].IsCustom==="True"?" k10-recipe__label_custom":"")+"' src='"+e(n.totalLabels[u])+"' data-tk-popover='dietary-popover' data-trigger='hover' data-placement='auto' data-toggle='popover' title='"+n.totalLabels[u].TooltipDescriptionWithChilds+"'><\/span>");$k10(p[i]).html(d);d.length==0?$k10(p[i]).addClass("k10-recipe__dietary-container_hidden"):$k10(p[i]).removeClass("k10-recipe__dietary-container_hidden")}k10.popover.init(k10.settings.popoverInit)}}}]),i}(s),et=function(i){t=k10.tools.Debugger(!0,"byo");t.log("init");i&&(n.recalcFunc=i);n.$menus=$k10(".k10-menus").first();ot()},ot=function(){t.log("onLoad -> fire recalcFunc");$k10(window).ready(n.recalcFunc)},c=function(i,u){t.log("initByoInPerfectModal");k10.byo._debug=k10.tools.Debugger(!0,"byo");u==undefined?(n.classModal="k10-modal-perfect_opened",n.$modal=$k10("."+n.classModal)):(n.classModal="k10-modal-perfect_byo",n.$modal=u);n.byo=new r(n.$menus,n.$modal);n.$recipe=n.byo.$recipe;n.$modal.length>0&&n.classModal=="k10-modal-perfect_opened"&&(ht(),st())},st=function(){n.byo.$byo.on("click",".k10-recipe__byo-recipe",l)},ht=function(){n.byo.$byo.off("click",".k10-recipe__byo-recipe",l)},ct=function(){var u,i;for(t.log("recalcByoInPerfectModal"),n.classModal="k10-modal-perfect_byo",u=n.$menus.find("."+n.classModal),i=0;i<u.length;i++)n.$modal=$k10(u[i]),c(null,$k10(u[i])),a(),r.updateMessageErrorSubByoAll(n.byo.$subbyos),v();k10.byo.publish("byoHasBeenUpdated")},l=function(n){r.oneMaxClick(this);r.checked(this);a(this);lt(n);k10.byo.publish("byoHasBeenUpdated")},a=function(i){t.log("_getValuesInModalPerfect");n.byo.$recipe||(n.byo.$recipe=$k10(i).closest(".k10-recipe_byo"));var f=r.grabValuesRecipes(n.byo.$byo),e=r.grabValuesNutrients(n.byo.$modal),o=k10.settings.CurrencySymbol,s=k10.settings.mayContain,u=r.recalcByo(f,o,s,e,n.byo.$recipe.attr("data-recipe-identifier"));u.separatorParent=n.byo.separatorParent;r.updateValues(u,n.byo);t.log("updateControls")},lt=function(n){r.updateMessageError(n.currentTarget);v()},v=function(){var i=r.checkError(n.byo.$subbyos);r.toggleMPbutton(i,n.byo.$modal);t.log("has error:"+i)},y=function(i,r){t.log("initByoInPerfectModalByron");r==undefined?(n.classModal="k10-modal-perfect_opened",n.$modal=$k10("."+n.classModal)):(n.classModal="k10-modal-perfect_byo",n.$modal=r);n.byo=new u(n.$menus,n.$modal);n.$recipe=n.byo.$recipe;n.$modal.length>0&&n.classModal=="k10-modal-perfect_opened"&&(vt(),at())},at=function(){n.byo.$byo.on("click",".k10-recipe__byo-recipe:not(.k10-recipe_hidden)",p)},vt=function(){n.byo.$byo.off("click",".k10-recipe__byo-recipe:not(.k10-recipe_hidden)",p)},yt=function(){var r,i;for(t.log("recalcByoInPerfectModalByron"),n.classModal="k10-modal-perfect_byo",r=n.$menus.find("."+n.classModal),i=0;i<r.length;i++)n.$modal=$k10(r[i]),y(null,$k10(r[i])),w(),u.updateMessageErrorSubByoAll(n.byo.$subbyos),b();k10.byo.publish("byoHasBeenUpdated")},p=function(n){u.oneMaxClick(this);u.checked(this);w(this);pt(n);k10.byo.publish("byoHasBeenUpdated")},w=function(i){n.byo.$recipe||(n.byo.$recipe=$k10(i).closest(".k10-recipe_byo"));var f=u.grabValuesRecipes(n.byo.$byo),e=u.grabValuesNutrients(n.byo.$modal),o=k10.settings.CurrencySymbol,s=k10.settings.includeMayContain,r=u.recalcByo(f,o,s,e,n.byo.$recipe.attr("data-recipe-identifier"));r.separatorParent=n.byo.separatorParent;u.updateValues(r,n.byo);t.log("updateControls")},pt=function(n){u.updateMessageError(n.currentTarget);b()},b=function(){var i=u.checkError(n.byo.$subbyos);u.toggleMPbutton(i,n.byo.$modal);t.log("has error:"+i)},k=function(i,r){k10.byo._debug=k10.tools.Debugger(!0,"byo");r==undefined?(n.classModal="k10-recipe-card_byo:not(.k10-recipe-card_hidden)",n.$modal=$k10("."+n.classModal)):(n.classModal="k10-recipe-card_byo.k10-recipe-card_hidden",n.$modal=r);n.byo=new f(n.$menus,n.$modal);n.$recipe=n.byo.$recipe;n.$modal.length>0&&n.classModal!="k10-recipe-card_byo.k10-recipe-card_hidden"&&(bt(),wt());t.log("initByoInRecipeCard")},wt=function(){n.byo.$byo.find(".k10-recipe__byo-recipe").on("click",d)},bt=function(){n.byo.$byo.find(".k10-recipe__byo-recipe").off("click",d)},kt=function(){for(var i=n.$menus.find(".k10-recipe-card_byo"),t=0;t<i.length;t++)n.$modal=$k10(i[t]),k(null,$k10(i[t])),g(f),f.updateMessageErrorSubByoAll(n.byo.$subbyos);k10.byo.publish("byoHasBeenUpdated")},d=function(n){f.oneMaxClick(this);f.checked(this);g(f);dt(n);k10.byo.publish("byoHasBeenUpdated")},g=function(){var r=f.grabValuesRecipes(n.byo.$byo),u=f.grabValuesNutrients(n.byo.$modal),e=k10.settings.CurrencySymbol,o=k10.settings.mayContain,i=f.recalcByo(r,e,o,u,n.byo.$recipe.attr("data-recipe-identifier"));i.separatorParent=n.byo.separatorParent;f.updateValues(i,n.byo);t.log("updateControls")},dt=function(n){f.updateMessageError(n.currentTarget)},e=function(n){var t="";return n.IsCustom==="True"&&(t=k10.settings.BaseMenuUrl),t+n.Path},i=function(n){function i(n,t){_classCallCheck(this,i);_get(Object.getPrototypeOf(i.prototype),"constructor",this).call(this,n,t);this.$modal=t;this.separatorParent=", "}return _inherits(i,n),_createClass(i,null,[{key:"updateValues",value:function(n,i){var v,h,u,s,c,b,l,k,a,d,f,rt,ut;for(t.log("inline byo - recalc price"),k10.settings.HideZeroPrice&&n.totalPrice==0&&(n.totalPriceCurrency=k10.settings.SubsNullPrice),v=i.$recipe.find("."+o.byoPrice),h=0;h<v.length;h++)$k10(v[h]).html(k10.settings.showPrice?n.totalPriceCurrency:"");for(u=i.$recipe.find(".k10-byo__add-calories"),s=0;s<u.length;s++)$k10(u[s]).attr("data-recipe-price",n.totalPrice),(k10.settings.showBasket||k10.settings.mealPlanner)&&$k10(u[s]).attr("data-byo-details",JSON.stringify({data:n.byoDetails}));var r=null,g="2",nt=n.totalNutrients.map(function(n){return n.Id}).indexOf(g);if(nt!==-1){var ft=k10.roundingRules.getValueStr(parseInt(g,10),n.totalNutrients[nt].Val),y=ft.roundedValueStr.split("."),tt=y[0].split(/(?=(?:\d{3})+$)/).join(",")+(y[1]?"."+y[1]:"");for(c=0;c<u.length;c++)$k10(u[c]).attr("data-recipe-kcal",tt),r=tt}if(r==null?(r=0,i.$recipe.attr("data-calories","")):i.$recipe.attr("data-calories",r),k10.settings.ShowPrimaryNutrients&&k10.settings.IsEnergyPrimaryNutrient){var p=i.$recipe.find("."+o.recipeNutrientEnergy),w=i.$recipe.find("."+o.byoNutrientEnergy),it=k10.roundingRules.getValueStr(2,r);p.length>0&&(r!=0?p.html(k10.settings.EnergyNutrientsPrefix+r+" "+it.postfix+k10.settings.EnergyNutrientsPostfix):p.html(""));w.length>0&&(r!=0?w.html(k10.settings.EnergyNutrientsPrefix+r+" "+it.postfix+k10.settings.EnergyNutrientsPostfix):w.html(""))}for(b=[],l=0;l<n.totalLabels.length;l++)b.push(n.totalLabels[l].Id);for(i.$recipe.attr("data-labels",b.join(",")),k=i.$recipe.find(".k10-byo__dietary-container"),a=0;a<k.length;a++){for(d="",f=0;f<n.totalLabels.length;f++)n.totalLabels[f].IsPrimary=="True"&&(rt=e(n.totalLabels[f]),ut=n.totalLabels[f].TooltipDescription,d+='\n                            <div class="k10-recipe__popover-tooltip"\n                                data-tk-popover="dietary-popover"\n                                data-toggle="popover"\n                                data-trigger="hover"\n                                data-placement="auto"\n                                title="'+ut+'">\n                                <img class="k10-recipe__icon_img" src="'+rt+'" />\n                            <\/div>\n                        ');$k10(k[a]).html(d)}}}]),i}(s),nt=function(r,u){k10.byo._debug=k10.tools.Debugger(!0,"byo");n.classModal="k10-recipe__byo_inline";n.$modal=typeof u=="undefined"?$k10("."+n.classModal):u;n.byo=new i(n.$menus,n.$modal);n.$recipe=n.byo.$recipe;n.$modal.length>0&&(ti(),ni());t.log("initInlineByo")},gt=function(){for(var r=n.$menus.find(".k10-recipe__byo_inline"),t=0;t<r.length;t++)n.$modal=$k10(r[t]),nt(null,$k10(r[t])),it(i),i.updateMessageErrorSubByoAll(n.byo.$subbyos),rt();k10.byo.publish("byoHasBeenUpdated")},ni=function(){n.byo.$byo.on("click",".k10-recipe__byo-recipe_checkbox",tt)},ti=function(){n.byo.$byo.off("click",".k10-recipe__byo-recipe_checkbox",tt)},tt=function(t){if($k10(t.target).hasClass("k10-recipe__byo-recipe_checkbox_disabled")||$k10(t.target).closest(".k10-recipe__byo-recipe_checkbox").hasClass("k10-recipe__byo-recipe_checkbox_disabled"))return!1;i.oneMaxClick(this);i.checked(this);n.$modal=$k10(this).closest("."+n.classModal);n.byo=new i(n.$menus,n.$modal);n.$recipe=n.byo.$recipe;it(i);ii(t);k10.byo.publish("byoHasBeenUpdated")},ii=function(n){i.updateMessageError(n.currentTarget);rt()},it=function(){var u=i.grabValuesRecipes(n.byo.$byo),f=i.grabValuesNutrients(n.byo.$modal.find(".k10-recipe").first()),e=k10.settings.CurrencySymbol,o=k10.settings.mayContain,r=i.recalcByo(u,e,o,f,n.byo.$recipe.attr("data-recipe-identifier"));r.separatorParent=n.byo.separatorParent;i.updateValues(r,n.byo);t.log("updateControls")},rt=function(){var r=i.checkError(n.byo.$subbyos);i.toggleMPbutton(r,n.byo.$modal.find(".k10-recipe").first());t.log("has error:"+r)};return{init:et,_debug:t,initByoInPerfectModal:c,recalcByoInPerfectModal:ct,initByoInRecipeCard:k,recalcByoInRecipeCard:kt,initInlineByo:nt,recalcInlineByo:gt,initByoInPerfectModalByron:y,recalcByoInPerfectModalByron:yt,model:{labelImages:""}}}();_get=function(n,t,i){var e=!0,r,f,o;n:while(e){var u=n,s=t,h=i;if(e=!1,u===null&&(u=Function.prototype),r=Object.getOwnPropertyDescriptor(u,s),r===undefined){if(f=Object.getPrototypeOf(u),f===null)return undefined;n=f;t=s;i=h;e=!0;r=f=undefined;continue n}else return"value"in r?r.value:(o=r.get,o===undefined)?undefined:o.call(h)}};_createClass=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}();k10=k10||{};k10.byoBase=function(){function f(n){i.log("init");$menu=t(".k10-menus").first();t(window).ready(n)}var n=k10.className,i=k10.tools.Debugger(!0,"byoBase"),t=$k10,r=function(){function i(t){_classCallCheck(this,i);this.$byo=t;this.$mainRecipe=t;this.$subByos=this.$byo.find("."+n.byoSub+", ."+n.byoSubL1+", ."+n.byoSubL2);this.guid=this.$mainRecipe.attr("data-recipe-identifier");this.separatorParent=" / ";this.mayContain=k10.settings.includeMayContain;this.recipes=[];this.nutrients=[];this.totalNutrients=[];this.totalNutrientsPer100g=[];this.totalLabels=[];this.totalPrice=0;this.totalCalories=0;this.byoDetails=[];this.createListOfUnitNutrients()}return _createClass(i,[{key:"recalc",value:function(){this.recalcTotalPrice();this.recalcTotalNutrients();this.recalcTotalNutrientsPer100g();this.recalcTotalLabels();this.recalcTotalCalories();this.recalcByoDetails();this.totalModel={totalPrice:this.totalPrice,totalPriceCurrency:this.totalPrice<0?"-"+k10.settings.CurrencySymbol+(this.totalPrice*-1).toFixed(2):k10.settings.CurrencySymbol+this.totalPrice.toFixed(2),totalNutrients:this.totalNutrients,totalNutrientsPer100g:this.totalNutrientsPer100g,totalLabels:this.totalLabels,byoDetails:this.byoDetails,totalCalories:this.totalCalories}}},{key:"recalcTotalPrice",value:function(){var n=this,i,u,t,r;for(this.totalPrice=0,i=this.recipes,u=function(){var u=i[t];typeof u.rsId!="undefined"&&(r=u.rss.filter(function(n){return n.id===u.rsId}),r.length&&(u.price=r[0].price));u.price!==""&&(u.pricing=="addrsp"&&(n.totalPrice=n.totalPrice+parseFloat(u.price)),u.pricing=="deductrsp"&&(n.totalPrice=n.totalPrice-parseFloat(u.price)))},t=0;t<i.length;t++)u()}},{key:"recalcTotalNutrients",value:function(){var e=this,f,n,r,t,i,u;for(this.totalNutrients=this.nutrients.map(function(n){return{Id:n.Id,Val:0,Name:n.Name,Uom:n.Uom}}),f=this.nutrients.map(function(n){return n.Id}),n=0;n<this.recipes.length;n++)if(typeof this.recipes[n].ntrs!="undefined")for(typeof this.recipes[n].rsId!="undefined"&&(r=this.recipes[n].rss.filter(function(t){return t.id===e.recipes[n].rsId}),r.length&&(this.recipes[n].ntrs=r[0].ntrs)),t=0;t<this.recipes[n].ntrs.length;t++)i=this.recipes[n].ntrs[t],u=f.indexOf(i.Id),u>=0&&i.Val!=""&&(this.totalNutrients[u].Val+=parseFloat(i.Val.replace(",","")))}},{key:"recalcTotalNutrientsPer100g",value:function(){var e=this,f,n,r,t,i,u;for(this.totalNutrientsPer100g=this.nutrients.map(function(n){return{Id:n.Id,ValPer100g:0,Name:n.Name,Uom:n.Uom}}),f=this.nutrients.map(function(n){return n.Id}),n=0;n<this.recipes.length;n++)if(typeof this.recipes[n].ntrs!="undefined")for(typeof this.recipes[n].rsId!="undefined"&&(r=this.recipes[n].rss.filter(function(t){return t.id===e.recipes[n].rsId}),r.length&&(this.recipes[n].ntrs=r[0].ntrs)),t=0;t<this.recipes[n].ntrs.length;t++)i=this.recipes[n].ntrs[t],u=f.indexOf(i.Id),u>=0&&i.ValPer100g!=""&&(this.totalNutrientsPer100g[u].ValPer100g+=parseFloat(i.ValPer100g.replace(",","")))}},{key:"recalcTotalLabels",value:function(){for(var l,h,e,t,n,f,s,i,o,r=[],c=this.mayContain,u=0;u<this.recipes.length;u++)if(typeof this.recipes[u].lbls!="undefined")for(t=this.recipes[u].lbls,n=0;n<t.length;n++)if(f=r.map(function(n){return n.Id}).indexOf(t[n].Id),f<0){for(l=t[n].Id,h=!0,i=0;i<this.recipes.length;i++)typeof this.recipes[i].lbls!="undefined"&&(f=this.recipes[i].lbls.map(function(n){return n.Id}).indexOf(l),f<0&&(h=!1));t[n].IsExtended=="True"&&(c==!1||t[n].Value!="maybe")?r.push(t[n]):this.recipes[u].lbls[n].IsExtended=="False"&&h==!0&&r.push(t[n])}else if(t[n].Childs.length>0)for(e=t[n].Childs,i=0;i<e.length;i++)o=r[f].Childs.map(function(n){return n.Id}).indexOf(e[i].Id),o<0&&r[f].Childs.push(e[i]);if(c==!0)for(u=0;u<this.recipes.length;u++)if(typeof this.recipes[u].lbls!="undefined")for(t=this.recipes[u].lbls,n=0;n<t.length;n++)if(f=r.map(function(n){return n.Id}).indexOf(t[n].Id),f<0)t[n].IsExtended=="True"&&t[n].Value=="maybe"&&r.push(t[n]);else if(t[n].Childs.length>0)for(s=t[n].Childs,i=0;i<s.length;i++)o=r[f].Childs.map(function(n){return n.Id}).indexOf(s[i].Id),o<0&&r[f].Childs.push(s[i]);this.totalLabels=r.sort(function(n,t){return parseInt(n.Order,10)==parseInt(t.Order,10)?0:parseInt(n.Order,10)<parseInt(t.Order,10)?-1:1})}},{key:"recalcTotalCalories",value:function(){var r,t,n,i;for(this.totalCalories=0,r=this.recipes,t=0;t<r.length;t++)n=r[t],typeof n.ntrs!="undefined"&&(i=n.ntrs.map(function(n){return n.Id}).indexOf("2"),i>=0&&n.ntrs[i].Val!=""&&(this.totalCalories+=parseFloat(n.ntrs[i].Val.replace(",",""))))}},{key:"recalcByoDetails",value:function(){function t(n){var i=0,t=n.ntrs.map(function(n){return n.Id}).indexOf("2");return t>=0&&n.ntrs[t].Val!=""&&(i+=parseFloat(n.ntrs[t].Val.replace(",",""))),i}function i(n){var t=0;return n.price!=="-"&&n.price!==""&&(t=parseFloat(n.price.toString().replace(/,/g,""))),t.toFixed(2)}function r(n){var t="-",i,r;return n!=="-"&&n!==""&&n!==0&&(i=parseFloat(n.toString().replace(/,/g,"")),r=k10.settings.showBasket?k10.basket.getDailyGda():k10.mealPlanner.getDailyGda(),t=Math.ceil(i*100/r)),t}var n=this;(k10.settings.showBasket||k10.settings.mealPlanner)&&(this.byoDetails=[],this.recipes.forEach(function(u){var e=t(u),o=i(u),s=r(e),f=n.byoDetails.map(function(n){return n.id}).indexOf(u.subByoId);f===-1&&(n.byoDetails.push({id:u.subByoId,name:u.subByoName,items:[]}),f=n.byoDetails.length-1);n.byoDetails[f].items.push({id:u.id,name:u.name,desc:u.desc,parentId:n.$byo.attr("data-recipe-identifier"),kCal:e,price:o,gda:s})}))}},{key:"getLabelsDescription",value:function(){var t=this.totalLabels,s=this.separatorParent,r=this.mayContain,u=[],h=[],f=[],n,e,o,i;for(typeof s=="undefined"&&(s=", "),n=0;n<t.length;n++)if(t[n].IsExtended==="False")h.push(t[n].Description);else if(t[n].Value!=="no")if(t[n].Childs.length===0)r&&t[n].Value==="maybe"?f.push(t[n].Description):u.push(t[n].Description);else{for(e=[],o=[],i=0;i<t[n].Childs.length;i++)r&&t[n].Childs[i].Value==="maybe"?o.push(t[n].Childs[i].Description):e.push(t[n].Childs[i].Description);e.length>0&&u.push(t[n].Description+this.getYesChildsDescription(t[n],r));o.length>0&&f.push(t[n].Description+this.getMayChildsDescription(t[n],r))}return[h,u,f]}},{key:"getLabelsGroupsWithAllProperties",value:function(){for(var s,h,r,u,i=this.totalLabels,f=this.mayContain,e=[],c=[],o=[],n=0;n<i.length;n++)if(i[n].IsExtended==="False")c.push(i[n]);else if(i[n].Value!=="no")if(i[n].Childs.length===0)f&&i[n].Value==="maybe"?o.push(i[n]):e.push(i[n]);else{for(s=[],h=[],r=0;r<i[n].Childs.length;r++)f&&i[n].Childs[r].Value==="maybe"?h.push(i[n].Childs[r]):s.push(i[n].Childs[r]);s.length>0&&(u=t.extend({},i[n]),u.Childs=this.getYesChilds(i[n],f),e.push(u));h.length>0&&(u=t.extend({},i[n]),u.Childs=this.getMayChilds(i[n],f),o.push(u))}return[c,e,o]}},{key:"getLabelsGroups",value:function(){for(var n,i,r=this.totalLabels,u=[],f=[],e=[],t=0;t<r.length;t++)if(u.push(this.totalLabels[t].Id),r[t].Value!=="maybe"?e.push(r[t].Id):f.push(r[t].Id),n=r[t].Childs,typeof n!="undefined"&&n.length>0)for(i=0;i<n.length;i++)u.push(n[i].Id),n[i].Value!=="maybe"?e.push(n[i].Id):f.push(n[i].Id);return[u,e,f]}},{key:"getMayChilds",value:function(n,t){return t?n.Childs.filter(function(n){return n.Value==="maybe"}):[]}},{key:"getMayChildsDescription",value:function(n,t){if(t){var i=n.Childs.filter(function(n){return n.Value==="maybe"}).map(function(n){return n.Description});if(i.length>0)return" ("+i.join(", ")+")"}return""}},{key:"getYesChilds",value:function(n,t){return t?n.Childs.filter(function(n){return n.Value!=="maybe"}):n.Childs}},{key:"getYesChildsDescription",value:function(n,t){var i=t?n.Childs.filter(function(n){return n.Value!=="maybe"}).map(function(n){return n.Description}):n.Childs.map(function(n){return n.Description});return i.length>0?" ("+i.join(", ")+")":""}}]),i}(),u=function(r){function u(n){_classCallCheck(this,u);_get(Object.getPrototypeOf(u.prototype),"constructor",this).call(this,n)}return _inherits(u,r),_createClass(u,[{key:"grabActiveRecipesInsideByo",value:function(){function f(i,r){var u=t(r),e=u.find("."+n.byoItemCheckboxInput).length===0,f=!1,o=u.hasClass(n.byoItemHidden);return $k10(u.find("."+n.byoItemCheckboxInput)).each(function(){f=f||t(this).prop("checked")}),e||f&&!o}function e(n,r){var f=t(r).attr("data-recipe"),u;try{if(f)return u=JSON.parse(f),u.pricing==undefined&&(u.pricing="addrsp"),u}catch(e){i.errorLog("byo","JSON Error: "+e.message)}return{}}var r,u;for(this.recipes=this.$byo.find("."+n.byoItem).filter(f).map(e).get(),r=0;r<this.recipes.length;r++)u=t("[data-recipe-identifier='"+this.recipes[r].id+"'").find("."+n.byoItemSizeCheckboxInput+":checked"),u.length&&(this.recipes[r].rsId=u.attr("data-k10-nutrients-recipe-size-id"))}},{key:"createListOfUnitNutrients",value:function(){i.log("createListOfUnitNutrients");var t=this.$byo.attr("data-nutrients-list"),n=[];t&&(n=JSON.parse(t));this.nutrients=n.map(function(n){var r=n.Description,t=/\((.*?)\)/,u=n.Description.replace(t,"").trim(),i=r.match(t),f=i!==null?i[1]:"";return{Id:n.Id.toString(),Val:0,Name:u,Uom:f}});this.nutrientsPer100g=n.map(function(n){var r=n.Description,t=/\((.*?)\)/,u=n.Description.replace(t,"").trim(),i=r.match(t),f=i!==null?i[1]:"";return{Id:n.Id.toString(),ValPer100g:0,Name:u,Uom:f}})}},{key:"updateMessageErrorAll",value:function(){var n=this;this.$subByos.each(function(i,r){return n.updateMessageErrorSubByo(t(r))})}},{key:"updateMessageErrorSubByo",value:function(t){var i=this.getMaxByo(t),r=this.getMinByo(t),u=this.countCheckedRecipes(t),f=t.find("."+n.byoMessageMax).first(),e=t.find("."+n.byoMessageMin).first();i!=0&&u>i?f.addClass(n.byoMessageShow):f.removeClass(n.byoMessageShow);r!=0&&u<r?e.addClass(n.byoMessageShow):e.removeClass(n.byoMessageShow)}},{key:"countCheckedRecipes",value:function(i){var r=this;return i.find("."+n.byoItem).filter(function(n,i){return r.isRecipeChecked(t(i))}).length}},{key:"isRecipeChecked",value:function(i){var r=i.find("."+n.byoItemCheckboxInput),f=i.closest("."+n.byoItem),e=f.hasClass(n.byoItemHidden),o=f.hasClass(n.byoItemCore)||r.length===0,u=!1;return r.length>1?$k10(r).each(function(){u=u||t(this).prop("checked")}):u=r.prop("checked")===!0,o||u&&!e}},{key:"getMaxByo",value:function(n){return parseInt(n.attr("data-selectableitemmax"),10)}},{key:"getMinByo",value:function(n){var t=parseInt(n.attr("data-selectableitemmin"),10);return isNaN(t)?0:t}},{key:"unselectOthersIfOnlyOneAllowed",value:function(t,i){var f=this.getSelectableItemMax(t),r=this.getParentByo(t),e=r.hasClass(n.byoSub)||r.hasClass(n.byoSubL1)||r.hasClass(n.byoSubL2),o=r.find("."+n.byoItemCore),s=f-o.length==1,u;s&&(u=t.attr("data-recipe-identifier"),this.cleanCheckedAllOtherRecipesInByo(r,u,e));this.handleRecipeSize(i)}},{key:"getSelectableItemMax",value:function(n){var t=this.getParentByo(n);return this.getMaxByo(t)}},{key:"getParentByo",value:function(t){return t.closest("."+n.byo)}},{key:"cleanCheckedAllOtherRecipesInByo",value:function(i,r,u){var f=this,e=u?i.find("."+n.byoItem):i.find("."+n.byoItem).not("."+n.byoItemSub);e.each(function(i,u){var e=t(u),o=e.attr("data-recipe-identifier"),s=f.isRecipeChecked(e),h=e.hasClass(n.byoItemHidden),c=e.hasClass(n.byoItemCore);!s||h||c||o==r||f.toggleRecipeCheck(e)})}},{key:"handleRecipeSize",value:function(i){var r=i.closest("."+n.byoItem);r.hasClass(n.byoItemCore)&&i.prop("checked")===!1?r.find("."+n.byoItemSizeCheckboxInput+":checked").not(i).length===0&&(i.prop("checked",!0),i.trigger("change")):t(r.find("."+n.byoItemSizeCheckboxInput).not(i)).each(function(){t(this).prop("checked",!1);t(this).trigger("change")})}},{key:"toggleRecipeCheck",value:function(t){var i=t.find("."+n.byoItemCheckboxInput);i.prop("checked",!i.prop("checked"))}}]),u}(r);return{k10ByoUi:u,init:f}}();"use strict";var _slicedToArray=function(){function n(n,t){var r=[],u=!0,f=!1,e=undefined,i,o;try{for(i=n[Symbol.iterator]();!(u=(o=i.next()).done);u=!0)if(r.push(o.value),t&&r.length===t)break}catch(s){f=!0;e=s}finally{try{!u&&i["return"]&&i["return"]()}finally{if(f)throw e;}}return r}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return n(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),_createClass=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),_get=function(n,t,i){var e=!0,r,f,o;n:while(e){var u=n,s=t,h=i;if(e=!1,u===null&&(u=Function.prototype),r=Object.getOwnPropertyDescriptor(u,s),r===undefined){if(f=Object.getPrototypeOf(u),f===null)return undefined;n=f;t=s;i=h;e=!0;r=f=undefined;continue n}else return"value"in r?r.value:(o=r.get,o===undefined)?undefined:o.call(h)}};k10=k10||{};k10.byoModal=function(){function h(){function e(){return f.find("."+n.byo).not("."+n.byoSub).not("."+n.byoSubL1).not("."+n.byoSubL2)}f=t(".k10-menus").first();var r=e();r.each(function(r,f){var o=t(f),c=o.attr("data-recipe-identifier"),l=i.map(function(n){return n.guid}),h=l.indexOf(c),e;h>-1&&i.splice(h,1);e=new s(o);e.$modal.on("click","."+n.byoItem,a);u(e);i.push(e)});k10.byo.publish("byoHasBeenUpdated")}function c(){e.log("onFilterChanged");i.forEach(function(n){return u(n)});k10.byo.publish("byoHasBeenUpdated")}function l(u){if(typeof u=="undefined"){var f=t("."+n.modalPerfectOpened),e=f.closest("."+n.recipe);u=e.attr("data-recipe-identifier")}r=typeof u=="undefined"?null:i.filter(function(n){return n.guid===u})[0]}function a(f){function h(t){var u=t.closest("."+n.recipe),f=u.attr("data-recipe-identifier");r=i.filter(function(n){return n.guid===f})[0]}if(f.target.tagName.toLowerCase()==="input"){var e=t(f.target).closest("."+n.byoItem),o=e.hasClass(n.byoItemSub),s=o?r.getParentByo(e):null;h(e);r.unselectOthersIfOnlyOneAllowed(e,t(f.target));u(r);o&&r.updateMessageErrorSubByo(s);k10.byoModal.publish("byoHasBeenUpdated")}}function u(n){n.readPropertiesFromActiveRecipes();n.recalc();n.updateTotalPrice();n.updateTotalZeroPrice();n.updateNutrients();n.updateLabels();n.updateAttributesOnAddToMealPlannerBtn();n.updateMessageErrorAll();n.hideMealPlannerButtonIfError()}var e=k10.tools.Debugger(!0,"byoModal"),t=$k10,i=[],r=null,o=k10.byoBase.k10ByoUi,f=t(".k10-menus").first(),n=k10.className,s=function(r){function u(t){_classCallCheck(this,u);_get(Object.getPrototypeOf(u.prototype),"constructor",this).call(this,t);this.$modal=t.find("."+n.modalPerfectByo)}return _inherits(u,r),_createClass(u,[{key:"readPropertiesFromActiveRecipes",value:function(){this.grabActiveRecipesInsideByo()}},{key:"updateTotalPrice",value:function(){var t=this.totalModel,i=this.$mainRecipe,r,u;k10.settings.showPrice&&(k10.settings.HideZeroPrice&&t.totalPrice==0&&(t.totalPriceCurrency=k10.settings.SubsNullPrice),r=i.find("."+n.recipePrice),u=i.find("."+n.byoPrice),r.html(t.totalPriceCurrency),u.html(t.totalPriceCurrency),i.attr("data-price",t.totalPriceCurrency));k10.byoModal.publish("byoModal.updateTotalPrice",{model:this.totalModel,$recipe:this.$mainRecipe})}},{key:"updateTotalZeroPrice",value:function(){var i=this.totalModel,r=this.$mainRecipe,t=r.find("."+n.recipePriceDash);t.length>0&&(i.totalPrice===0&&k10.settings.HideZeroPrice&&k10.settings.SubsNullPrice===""?t.addClass(n.recipePriceDashHidden):i.totalPriceCurrency!==""&&t.removeClass(n.recipePriceDashHidden))}},{key:"updateNutrients",value:function(){var u=this.totalModel,o=this.$mainRecipe,p=o.find("."+n.byoNutrient),w=o.find("."+n.byoNutrientPer100g),b=u.totalNutrients.map(function(n){return n.Id}),i="",r;if(k10.settings.ShowNutrients||k10.settings.ShowNutrientsPer100g){if(k10.settings.ShowNutrients)for(r=0;r<p.length;r++){var k=t(p[r]),s=k.attr("data-nutr-id"),l=b.indexOf(s),v=k10.roundingRules.getValueStr(parseInt(s,10),u.totalNutrients[l].Val),f=v.roundedValueStr.split("."),a=f[0].split(/(?=(?:\d{3})+$)/).join(",")+(f[1]?"."+f[1]:"");s==="2"&&(i=a);k.find("."+n.byoNutrientValue).html(a+(k10.settings.byoHideUom?"":" "+u.totalNutrients[l].Uom))}if(k10.settings.ShowNutrientsPer100g)for(r=0;r<w.length;r++){var d=t(w[r]),s=d.attr("data-nutr-id"),l=b.indexOf(s),v=k10.roundingRules.getValueStr(parseInt(s,10),u.totalNutrientsPer100g[l].ValPer100g),f=v.roundedValueStr.split("."),a=f[0].split(/(?=(?:\d{3})+$)/).join(",")+(f[1]?"."+f[1]:"");d.find("."+n.byoNutrientValue).html(a+(k10.settings.byoHideUom?"":" "+u.totalNutrientsPer100g[l].Uom))}}else if(k10.settings.ShowPrimaryNutrients&&k10.settings.IsEnergyPrimaryNutrient)for(r=0;r<u.totalNutrients.length;r++){var y=u.totalNutrients[r],v=k10.roundingRules.getValueStr(parseInt(y.Id,10),y.Val),f=v.roundedValueStr.split("."),a=f[0].split(/(?=(?:\d{3})+$)/).join(",")+(f[1]?"."+f[1]:"");y.Id==="2"&&(i=a)}if(o.attr("data-calories",i),k10.settings.ShowPrimaryNutrients&&k10.settings.IsEnergyPrimaryNutrient){var h=o.find("."+n.recipeNutrientEnergy),c=o.find("."+n.byoNutrientEnergy),e=k10.roundingRules.getValueStr(2,i);h.length>0&&(i!=0?u.totalPrice==0&&k10.settings.HideZeroPrice&&k10.settings.SubsNullPrice.length==0?k10.settings.EnergyNutrientsPostfix.length==0&&k10.settings.EnergyNutrientsPrefix.length>0?h.html(i+" "+e.postfix):h.html(k10.settings.EnergyNutrientsPrefix+i+" "+e.postfix+k10.settings.EnergyNutrientsPostfix):h.html(k10.settings.EnergyNutrientsPrefix+i+" "+e.postfix+k10.settings.EnergyNutrientsPostfix):h.html(""));c.length>0&&(i!=0?u.totalPrice==0&&k10.settings.HideZeroPrice&&k10.settings.SubsNullPrice.length==0?k10.settings.EnergyNutrientsPostfix.length==0&&k10.settings.EnergyNutrientsPrefix.length>0?c.html(i+" "+e.postfix):c.html(k10.settings.EnergyNutrientsPrefix+i+" "+e.postfix+k10.settings.EnergyNutrientsPostfix):c.html(k10.settings.EnergyNutrientsPrefix+i+" "+e.postfix+k10.settings.EnergyNutrientsPostfix):c.html(""))}k10.byoModal.publish("byoModal.updateNutrients",{model:this.totalModel,$recipe:this.$mainRecipe})}},{key:"updateLabels",value:function(){function i(n,t){f.attr(n,t.join(","))}var f=this.$mainRecipe,n=this.getLabelsDescription(),t=this.getLabelsGroupsWithAllProperties(),e=this.getLabelsGroups(),r=_slicedToArray(e,2),u=r[0],o=r[1];i("data-labels",u);i("data-all-labels",u);i("data-no-may-labels",o);k10.byoModal.publish("byoModal.updateLabels",{$recipe:this.$mainRecipe,$byo:this.$byo,suitable:{description:n[0],all:t[0]},contains:{description:n[1],all:t[1]},may:{description:n[2],all:t[2]},recipes:this.recipes})}},{key:"updateAttributesOnAddToMealPlannerBtn",value:function(){var t=this.$byo.find("."+n.recipeAddCalories);t.attr("data-recipe-price",this.totalPrice);t.attr("data-recipe-kcal",this.totalCalories);(k10.settings.showBasket||k10.settings.mealPlanner)&&t.attr("data-byo-details",JSON.stringify({data:this.byoDetails}))}},{key:"hideMealPlannerButtonIfError",value:function(){i.forEach(function(t){if(k10.settings.showBasket||k10.settings.mealPlanner){var i=t.$byo.find("."+n.recipeAddCalories),r=t.$byo.find("."+n.byoMessageShow).length>0;r?i.addClass(n.recipeAddCaloriesHidden):i.removeClass(n.recipeAddCaloriesHidden)}})}}]),u}(o);return{onModalOpened:l,onPageLoad:h,onFilterChanged:c}}();_createClass=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}();k10=k10||{};k10.byoToggle=function(){var r=function(){function i(){_classCallCheck(this,i)}return _createClass(i,[{key:"hideByoIfAllOptionsFilteredOut",value:function(){var i=this,r=t("."+n.menus).first().find("."+n.byo);r.each(function(n,r){var u=t(r);i.isEachSubbyoHidden(u)?i.hide(u):i.show(u)})}},{key:"hide",value:function(t){k10.settings.byoNewStructure!=undefined&&k10.settings.byoNewStructure==!0?t.addClass(n.byoSubHidden):t.addClass(n.oldHiddenBySubByo)}},{key:"show",value:function(t){k10.settings.byoNewStructure!=undefined&&k10.settings.byoNewStructure==!0?t.removeClass(n.byoSubHidden):t.removeClass(n.oldHiddenBySubByo)}},{key:"isEachSubbyoHidden",value:function(t){var r=0,i,u;return k10.settings.byoNewStructure!=undefined&&k10.settings.byoNewStructure==!0?(i=t.find("."+n.byoSubL1),u=i.length,i.each(function(t,i){var u=$k10(i),f=u.hasClass(n.byoSubHidden);r+=f?1:0}),u===r):(i=t.find("."+n.oldSubByo),u=i.length,i.each(function(t,i){var u=$k10(i),f=u.hasClass(n.recipeHidden);r+=f?1:0}),u===r)}}]),i}(),u=k10.tools.Debugger(!0,"byoToggle"),t=$k10,n=k10.className,i=new r;return{hideByoIfAllOptionsFilteredOut:i.hideByoIfAllOptionsFilteredOut.bind(i)}}();k10=k10||{};k10.paging=function(){var t={$menus:"",$paging:"",$pagings:""},i={},n={activePage:1,recipesPerPage:14},r=function(r,u){k10.settings.globalSpinner&&k10.paging.publish("spinnerStart");var f=typeof u!="undefined"?u:+$k10(this).attr("data-page");i.log("go to page "+f);k10.settings.colcade&&k10.paging.publish("colcade.destroy");n.activePage=f;k10.settings.pagingFunc();$k10(t.$menus).find(".k10-page_active").removeClass("k10-page_active grid-item");$k10(t.$menus).find(".page"+f).addClass("k10-page_active grid-item");$k10("html, body").animate({scrollTop:$k10(".k10-selected-menu").offset().top},100);k10.settings.useLocalStorage?window.localStorage.setItem("pagingSettings",JSON.stringify(n)):k10.settings.useSessionStorage&&window.sessionStorage.setItem("pagingSettings",JSON.stringify(n));setTimeout(function(){k10.paging.publish("goToPage")},0);k10.settings.globalSpinner&&setTimeout(function(){k10.paging.publish("spinnerStop")},0)},e=function(){var o,t,u,e;i.log("recalc Paging");k10.settings.colcade&&k10.paging.publish("colcade.destroy");$k10(".k10-recipe_menu-item.k10-recipe_hidden").attr("class","k10-recipe k10-recipe_menu-item k10-recipe_hidden grid-item k10-page");o=$k10(".k10-recipe__wrapper");$k10(".k10-all-courses").find(".k10-recipe_menu-item").sort(function(n,t){var i=+$k10(n).attr("data-section-order"),r=+$k10(t).attr("data-section-order"),u=+$k10(n).attr("data-recipe-order"),f=+$k10(t).attr("data-recipe-order");return $k10(n).hasClass("k10-recipe_hidden")&&!$k10(t).hasClass("k10-recipe_hidden")?1:!$k10(n).hasClass("k10-recipe_hidden")&&$k10(t).hasClass("k10-recipe_hidden")?-1:i<r?-1:i>r?1:u<f?-1:u>f?1:0}).appendTo(o);var f=1,s=$k10(".k10-recipe_menu-item:not(.k10-recipe_hidden)"),r=s.length,h=parseInt(r/n.recipesPerPage+(r%n.recipesPerPage>0?1:0),10);if(n.activePage>h&&(n.activePage=1),r>0)for(t=0;t<r;t++)f=parseInt(t/n.recipesPerPage+1,10),u=$k10(s[t]),u.attr("class",""),e="",e=$k10(window).width()>640?(t%n.recipesPerPage>2?" k10-page__line":"")+(t%3==0?" k10-page__first":""):(t%n.recipesPerPage>1?" k10-page__line":"")+(t%2==0?" k10-page__first":""),u.addClass("k10-recipe k10-recipe_menu-item grid-item k10-page page"+f+e),f===n.activePage&&u.addClass("k10-page_active");k10.settings.pagingFunc();k10.settings.useLocalStorage?window.localStorage.setItem("pagingSettings",JSON.stringify(n)):k10.settings.useSessionStorage&&window.sessionStorage.setItem("pagingSettings",JSON.stringify(n));k10.paging.publish("recalcPaging")},s=function(){var e=$k10(".k10-recipe_menu-item:not(.k10-recipe_hidden)").length,s=parseInt(e/n.recipesPerPage+(e%n.recipesPerPage>0?1:0),10),r,i;if(o(e),t.$paging.html(""),s>1){for(r=0;r<s;r++)i=r+1,t.$paging.append('<span class="k10-paging__page k10-paging__page'+i+" "+(i===n.activePage?"k10-paging__page_active":"")+'" data-page="'+i+'">'+i+"<\/span>");t.$pagings=$k10(t.$menus).find(".k10-paging__page");f();u()}},h=function(){var i=$k10(".k10-recipe_menu-item:not(.k10-recipe_hidden)").length,r=parseInt(i/n.recipesPerPage+(i%n.recipesPerPage>0?1:0),10),e=n.activePage-1,s='<span class="k10-paging__page-container">'+(e>0?'<span class="k10-paging__page k10-paging__page_prev" data-page="'+e+'">Prev<\/span>':"&nbsp;")+"<\/span>",h=n.activePage+1,c='<span class="k10-paging__page-container">'+(h<=r&&r>0?'<span class="k10-paging__page k10-paging__page_next" data-page="'+h+'">Next<\/span>':"&nbsp;")+"<\/span>";o(i);t.$paging.html("");$k10(t.$menus).find(".k10-paging_top").append(s+'<span class="k10-paging__text">'+i+" Items<\/span>"+c);$k10(t.$menus).find(".k10-paging_bottom").append(s+'<span class="k10-paging__text">Page: '+n.activePage+" / "+r+"<\/span>"+c);r>0&&(t.$pagings=$k10(t.$menus).find(".k10-paging__page"),f(),u())},o=function(n){var t=$k10(".k10-recipe__no-items");t.length>0&&(n===0&&t.hasClass("k10-recipe__no-items_hidden")?t.removeClass("k10-recipe__no-items_hidden"):n>0&&!t.hasClass("k10-recipe__no-items_hidden")&&t.addClass("k10-recipe__no-items_hidden"))},u=function(){t.$pagings.on("click",r)},f=function(){t.$pagings.off("click",r)},c=function(){var o,s;i=k10.tools.Debugger(!0,"paging");i.log("init");n.recipesPerPage=k10.settings.recipesPerPage;t.$menus=$k10(".k10-menus").first();t.$paging=$k10(t.$menus).find(".k10-paging");o=k10.settings.useLocalStorage?window.localStorage.getItem("pagingSettings"):k10.settings.useSessionStorage?window.sessionStorage.getItem("pagingSettings"):null;o!==null&&typeof o!="undefined"&&(s=JSON.parse(o),k10.paging.model.activePage=s.activePage,r(null,s.activePage));e();t.$pagings=$k10(t.$menus).find(".k10-paging__page");f();u()};return{initPaging:c,recalcPaging:e,pagingWithNumbers:s,pagingWithButtons:h,model:n}}();k10=k10||{};k10.roundingRules=function(){var u,n=[],t=[],r=[],i=function(n,t,i){var r=Math.pow(10,t),n=Math.round(n*r)/r;return i==!0?n.toFixed(t):n.toString()},f=function(n){var i=0,t;if(typeof n=="undefined"||isNaN(n)==!0)return r;for(t=0;t<r.length;t++)r[t].nutrientId==n&&(i=r[t].precision);return i},e=function(r,u){var f,o,s,e;if(typeof u=="undefined"||typeof u!="undefined"&&u==null)return{roundedValue:0,postfix:""};if(f=typeof u=="string"?u.replace(",",""):u,f===""||isNaN(f)===!0)return{roundedValue:0,postfix:""};if(f=Number(f),o=_.find(t,function(n){return n.NutrientId===r}),typeof o=="undefined"||typeof o!="undefined"&&o==null||typeof o!="undefined"&&o.RuleIds.length==0)return{roundedValue:f,postfix:""};for(s=0;s<o.RuleIds.length;s++)if(e=_.find(n,function(n){return n.Id===o.RuleIds[s]}),typeof e!="undefined"&&(typeof e=="undefined"||e!=null))switch(e.Type){case"zero":if(f<=e.Zero)return{roundedValue:0,postfix:""};break;case"express-as":if(f>=e.Min&&f<=e.Max)return{roundedValue:0,postfix:""};break;case"simple":f=f*e.Multiply;break;case"multiply-range":f>=e.Min&&f<=e.Max&&(f=f*e.Multiply);break;case"round-range":f>=e.Min&&f<=e.Max&&(f=Math.round(f/e.Round)*e.Round)}var a=o.RuleIds[o.RuleIds.length-1],h=_.find(n,function(n){return n.Id===a}),c=0,l="";return typeof h!="undefined"&&h!==null&&(c=h.Digits,l=h.Postfix),{roundedValue:Number(i(f,c,!0)),postfix:l}},o=function(r,u){var h,f,o,c,e,l,s;if(typeof u=="undefined"||typeof u!="undefined"&&u==null)return h=_.find(n,function(n){return n.Type==="null"}),typeof h!="undefined"&&h!==null?{roundedValueStr:h.Postfix,postfix:""}:{roundedValueStr:"-",postfix:""};if(f=typeof u=="string"?u.replace(",",""):u,f===""||isNaN(f)===!0)return{roundedValueStr:i(f,0,!0),postfix:""};if(f=Number(f),o=_.find(t,function(n){return n.NutrientId===r}),typeof o=="undefined"||typeof o!="undefined"&&o==null||typeof o!="undefined"&&o.RuleIds.length==0)return{roundedValueStr:i(f,0,!0),postfix:""};for(c=0;c<o.RuleIds.length;c++)if(e=_.find(n,function(n){return n.Id===o.RuleIds[c]}),typeof e!="undefined"&&(typeof e=="undefined"||e!=null))switch(e.Type){case"zero":if(f<=e.Zero)return{roundedValueStr:"0",postfix:e.Postfix};break;case"express-as":if(f>=e.Min&&f<=e.Max)return{roundedValueStr:e.ExpressAs,postfix:""};break;case"simple":f=f*e.Multiply;break;case"multiply-range":f>=e.Min&&f<=e.Max&&(f=f*e.Multiply);break;case"round-range":f>=e.Min&&f<=e.Max&&(f=Math.round(f/e.Round)*e.Round)}return l=o.RuleIds[o.RuleIds.length-1],s=_.find(n,function(n){return n.Id===l}),typeof s=="undefined"||typeof s!="undefined"&&s==null?{roundedValueStr:i(f,0,!0),postfix:""}:{roundedValueStr:i(f,s.Digits,!0),postfix:s.Postfix}},s=function(){return n},h=function(){return t},c=function(){var o,e,i,s,f;if(u=k10.tools.Debugger(!0,"roundingRules"),o=$k10("#roundingRules").val(),typeof o!="undefined"){try{e=JSON.parse(o);e!=null?(n=e.Rules,t=e.RulesMapping):(n=[],t=[])}catch(h){u.errorLog("roundingRules","JSON Error: "+h.message);n=[];t=[]}for(i=0;i<t.length;i++)pObj={nutrientId:t[i].NutrientId,precision:0},s=t[i].RuleIds[t[i].RuleIds.length-1],f=_.find(n,function(n){return n.Id===s}),pObj.precision=typeof f=="undefined"||typeof f!="undefined"&&f==null?0:f.Digits,r.push(pObj)}};return{init:c,getPrecision:f,getValue:e,getValueStr:o,roundToFixedStr:i,getRules:s,getRulesMapping:h}}();k10=k10||{};k10.course=function(){var n={$course:"",$courses:"",courseClass:"",classCollapse:""},t={},i=function(t){n.$course=$k10(t.target).closest("."+n.courseClass).first();n.$course.toggleClass("k10-course_opened");n.$course.find(".k10-l-body").first().toggleClass("k10-l-body_hidden");t.stopPropagation()},r=function(){t.log("init");n.$courses.on("click",">."+n.classCollapse,i)},u=function(){n.$courses.off("click",">."+n.classCollapse,i)},f=function(){t=k10.tools.Debugger(!0,"course collapse one level");n.classCollapse="k10-course__header";n.courseClass="k10-course_level1";n.$courses=$k10(".k10-menus ."+n.courseClass);u();r();t.log("init")},e=function(){t.log("init");n.$courses.on("click","."+n.classCollapse,i)},o=function(){n.$courses.off("click","."+n.classCollapse,i)},s=function(){t=k10.tools.Debugger(!0,"course collapse Multi level");n.classCollapse="k10-course__header";n.courseClass="k10-course";n.$courses=$k10(".k10-menus ."+n.courseClass);o();e();t.log("init")};return{initOneLevel:f,initMultiLevel:s,toggleCourse:i}}();k10=k10||{};k10.service=function(){var n,t=function(){return{"X-TENKITES-API-SessionIdentifier":k10.settings.SessionIdentifierForApi}},u=function(t,i,r){var u=k10.settings.BaseMenusUrl+"/"+k10.settings.UnitOutputCode+"?cl=true&mguid="+t+"&internalrequest=true",f=k10.tools.getQueryStringValue("mldate");f!=null&&f.length>0&&(u=u+"&mldate="+f);k10.settings.SiteCode.length>0&&(u=u+"&sitecode="+k10.settings.SiteCode);k10.settings.IsMobile==!0&&(u=u+"&clmob=true");n.log("_getMenu: "+u);$k10.ajax({url:u,type:"GET",crossDomain:!0,success:function(n,t,r){i(n,t,r)},error:function(n,t,i){r(n,t,i)}})},f=function(t,i,r,u){var f=k10.settings.BaseMenusUrl+"/"+k10.settings.UnitOutputCode+"?cl=true&mguid="+t+"&secsuf="+k10.settings.SectionView+"&secguid="+i+"&internalrequest=true";k10.settings.SiteCode.length>0&&(f=f+"&sitecode="+k10.settings.SiteCode);k10.settings.IsMobile==!0&&(f=f+"&clmob=true");n.log("_getSection: "+f);$k10.ajax({url:f,type:"GET",crossDomain:!0,success:function(n,t,i){r(n,t,i)},error:function(n,t,i){u(n,t,i)}})},e=function(t){var r,u,f;if(n.log("sendStatLabels"),r=i("internalrequest"),u=i("invalidate"),r===null&&u===null)return f=k10.settings.BaseMenusUrl+"/html/statlabels/"+k10.settings.OrganisationGuid+"/"+k10.settings.ZooMenuGuid+"/"+k10.settings.MenuGuid+"?ss="+encodeURIComponent(k10.settings.SessionIdentifierForApi)+"&li="+encodeURIComponent(t.id)+"&ln="+encodeURIComponent(t.name)+"&internalrequest=true",k10.service.get(f,function(){n.log("Ajax call Succeed!")},function(){n.log("Ajax call Failed!")},!1)},o=function(t){var f=i("internalrequest"),e=i("invalidate"),r,u;if(f===null&&e===null)return r=typeof t!="undefined"&&typeof t.pdfType=="number"?parseInt(t.pdfType):0,u=k10.settings.BaseMenusUrl+"/html/statfiles/"+k10.settings.OrganisationGuid+"/"+k10.settings.ZooMenuGuid+"/"+k10.settings.MenuGuid+"?ss="+encodeURIComponent(k10.settings.SessionIdentifierForApi)+"&fn="+encodeURIComponent(k10.settings.StatFileName)+"&internalrequest=true&pdfType="+r,k10.service.get(u,function(){n.log("Ajax call Succeed!")},function(){n.log("Ajax call Failed!")},!1)},s=function(t){return k10.service.get(k10.settings.BaseMenusUrl+"/html/getsupplier/"+k10.settings.OrganisationGuid+"/"+t+"?internalrequest=true",function(){n.log("Ajax call Succeed!")},function(){n.log("Ajax call Failed!")},!0)},h=function(i,r,u,f){return n.log("get: "+i),f===!0?$k10.ajax({url:i,headers:t(),type:"GET",crossDomain:!0,success:function(n,t,i){r(n,t,i)},error:function(n,t,i){u(n,t,i)}}):$k10.ajax({url:i,type:"GET",crossDomain:!0,success:function(n,t,i){r(n,t,i)},error:function(n,t,i){u(n,t,i)}})},r=function(i,r,u,f,e){return n.log("postJson: "+i),e===!0?$k10.ajax({url:i,headers:t(),type:"POST",contentType:"application/json",data:r,crossDomain:!0,success:function(n,t,i){u(n,t,i)},error:function(n,t,i){f(n,t,i)}}):$k10.ajax({url:i,type:"POST",contentType:"application/json",data:r,crossDomain:!0,success:function(n,t,i){u(n,t,i)},error:function(n,t,i){f(n,t,i)}})},c=function(i,r){return n.log("postText: "+i),_includeHeader===!0?$k10.ajax({url:i,headers:t(),type:"POST",contentType:"text/plain",data:r,crossDomain:!0,success:function(n,t,i){_callbackSucceed(n,t,i)},error:function(n,t,i){_callbackFailed(n,t,i)}}):$k10.ajax({url:i,type:"POST",contentType:"text/plain",data:r,crossDomain:!0,success:function(n,t,i){_callbackSucceed(n,t,i)},error:function(n,t,i){_callbackFailed(n,t,i)}})},i=function(n){var u=null,i,t,r;if(window.location.href.indexOf("?")!=-1)for(i=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),t=0;t<i.length;t++)if(r=i[t].split("="),r[0]==n){u=r[1];break}return u},l=function(t){n.log("menu selected '"+t+"'");u(t,function(n){var t=n;k10.service.publish("renderNewMenu",t)},function(){n.warn("Ajax call Failed!");k10.service.publish("spinnerStop")})},a=function(t){n.log("section selected "+t.menuGuid+" "+t.sectionGuid);k10.service.publish("spinnerStart");f(t.menuGuid,t.sectionGuid,function(n){var i={html:n,sectionGuid:t.sectionGuid};k10.service.publish("renderNewSection",i)},function(){n.warn("Ajax call Failed!");k10.service.publish("spinnerStop")})},v=function(t,i){var u="/inner/social/"+t.url.orgGuid+"/"+t.url.menuGuid+"?internalrequest=true";return r(u,i,function(n){var t=n;k10.service.publish("updateShare",t)},function(){n.warn("Ajax call Failed!")},!0)},y=function(n,t,i){var u="/inner/putorder/"+k10.settings.OrganisationGuid+"/"+k10.settings.ZooMenuGuid+"?ss="+encodeURIComponent(k10.settings.SessionIdentifierForApi)+"&internalrequest=true&menuUrl="+encodeURIComponent(window.location.href);return location.host.indexOf("tkmenus.com")==-1&&location.host.indexOf("tenkites.com")==-1&&location.host.indexOf("viewthe.menu")==-1&&(u=k10.settings.BaseMenusUrl+u),r(u,n,t,i,!0)},p=function(i,r,u,f){if(i.indexOf(".com")!=-1)return null;var e="/recipecors/"+k10.settings.OrganisationGuid+"/"+k10.settings.MenuGuid+(r?"/subrecipe/":"/menurecipe/pid")+i+"?internalrequest=true";location.host.indexOf("tkmenus.com")==-1&&location.host.indexOf("tenkites.com")==-1&&location.host.indexOf("viewthe.menu")==-1&&(e=k10.settings.BaseMenusUrl+e);n.log("getRecipe: "+e);$k10.ajax({url:e,type:"GET",crossDomain:!0,headers:t(),success:function(n,t,i){u(n,t,i)},error:function(n,t,i){f(n,t,i)}})},w=function(n,t,i){var r="/html/filterrecipes/"+k10.settings.OrganisationGuid+"/"+k10.settings.ZooMenuGuid;location.host.indexOf("tkmenus.com")==-1&&location.host.indexOf("tenkites.com")==-1&&location.host.indexOf("viewthe.menu")==-1&&(r=k10.settings.BaseMenusUrl+r);$k10.ajax({url:r,type:"POST",contentType:"application/json",data:JSON.stringify(n),crossDomain:!0,dataType:"json",success:function(n,i,r){n!==null&&t(n,i,r)},error:function(n,t,r){i(n,t,r)}})},b=function(n,t,i){var r="/html/recipenames/"+k10.settings.OrganisationGuid+"/"+k10.settings.ZooMenuGuid+"?searchRecipeName="+n;location.host.indexOf("tkmenus.com")==-1&&location.host.indexOf("tenkites.com")==-1&&location.host.indexOf("viewthe.menu")==-1&&(r=k10.settings.BaseMenusUrl+r);$k10.ajax({url:r,type:"POST",contentType:"application/json",crossDomain:!0,dataType:"json",data:JSON.stringify(n),success:function(n,i,r){n!==null&&t(n,i,r)},error:function(n,t,r){i(n,t,r)}})},k=function(){n=k10.tools.Debugger(!1,"service")};return{init:k,get:h,postJson:r,postText:c,apiHeader:t,sendStatLabels:e,sendStatFiles:o,getSupplier:s,getQueryStringValue:i,menuSelected:l,sectionSelected:a,putOrder:y,updateShare:v,getRecipe:p,filterRecipesRazor:w,searchByRecipeNameDropDown:b}}();k10=k10||{};k10.calorieFilter=function(){function s(i){var r=i.value;t.noMaxMinSelected=r[0]===t.maxMinCalorieValue[0]&&r[1]===t.maxMinCalorieValue[1];$k10.each(n.$sliderRange,function(){$k10(this).find("span").text(r[0]+" : "+r[1]+(r[1]===t.maxMinCalorieValue[1]?"+":""))});$k10.each(n.$sliderText,function(){$k10(this).find("span").text("Only showing menu items between "+r[0]+" and "+r[1]+(r[1]===t.maxMinCalorieValue[1]?"+":"")+" calories")});t.selectedCalorieValue[0]=r[0];t.selectedCalorieValue[1]=r[1];k10.settings.useLocalStorage?window.localStorage.setItem("calorieFilter",JSON.stringify(t)):k10.settings.useSessionStorage&&window.sessionStorage.setItem("calorieFilter",JSON.stringify(t));setTimeout(function(){k10.calorieFilter.publish("calorieFilterChanged")},0)}function h(n){var t=k10.settings.useLocalStorage?window.localStorage.getItem("calorieFilter"):k10.settings.useSessionStorage?window.sessionStorage.getItem("calorieFilter"):null,i;t!==null&&typeof t!="undefined"&&(i=JSON.parse(t),n.bootstrapSlider("setValue",i.selectedCalorieValue),k10.calorieFilter.model.selectedCalorieValue=i.selectedCalorieValue,k10.calorieFilter.publish("calorieFilterChanged",{oninit:!0}))}var n={$allMenus:"",$calorieFilter:"",$sliderRange:"",$sliderText:""},t={noMaxMinSelected:!0,maxMinCalorieValue:[0,2500],selectedCalorieValue:[0,2500]},i=function(i){typeof $k10().bootstrapSlider!="undefined"&&(t.noMaxMinSelected=!0,$k10("input.k10-slider").bootstrapSlider("setValue",[0,2500]),$k10.each(n.$sliderRange,function(){$k10(this).find("span").text("0 : 2500+")}),$k10.each(n.$sliderText,function(){$k10(this).find("span").text("Use the slider to filter this menu by your calorie range")}),t.selectedCalorieValue=[0,2500],k10.settings.useLocalStorage?window.localStorage.removeItem("calorieFilter"):k10.settings.useSessionStorage&&window.sessionStorage.removeItem("calorieFilter"),i&&(typeof i.stopSpinner=="undefined"||i.stopSpinner===!0)&&k10.calorieFilter.publish("calorieFilterChanged"),$k10(".tooltip-max").css("margin-left","-28px"),$k10(".tooltip-min").css("margin-left","-14.5px"))},r=function(){n.$calorieFilter.toggleClass("k10-calorie-filter_open");n.$calorieFilter.find(".k10-calorie-filter__name").toggleClass("k10-calorie-filter__name_opened");n.$calorieFilter.find(".k10-calorie-filter__icon").toggleClass("k10-calorie-filter__icon_opened");n.$calorieFilter.find(".k10-calorie-filter__slider-container").toggleClass("k10-calorie-filter__slider-container_opened");k10.customScripts.publish("calorieFilter.toggled");var t=n.$calorieFilter.hasClass("k10-calorie-filter_open");k10.labelFilter.publish("calorieFilterToggled",{isOpened:t})},u=function(t){var i=$k10(t.target).closest(".k10-calorie-filter__slider-container").length,u=$k10(t.target).closest(".k10-calorie-filter__panel").length||$k10(t.target).hasClass("k10-calorie-filter__panel");i||u||n.$calorieFilter.hasClass("k10-calorie-filter_open")&&r()},e=function(){if(k10.settings.handleOutsideClicksForFilters)n.$allMenus.on("click",u);if(!k10.settings.globalSpinner)n.$allMenus.on("click",".k10-toolbar__filters-clear",i);n.$calorieFilter.on("click",".k10-calorie-filter__reset",i);n.$calorieFilter.on("click",".k10-calorie-filter__panel",r)},o=function(){k10.settings.handleOutsideClicksForFilters&&n.$allMenus.off("click",u);k10.settings.globalSpinner||n.$allMenus.off("click",".k10-toolbar__filters-clear",i);n.$calorieFilter.off("click",".k10-calorie-filter__reset",i);n.$calorieFilter.off("click",".k10-calorie-filter__panel",r)},f=function(){if(n.$allMenus=$k10(".k10-menus"),n.$calorieFilter=$k10(".k10-calorie-filter"),n.$sliderRange=$k10(".k10-calorie-filter__slider-range"),n.$sliderText=$k10(".k10-calorie-filter__slider-text"),n.$calorieFilter.length>0){if(typeof $k10().bootstrapSlider!="undefined"){var t=$k10("input.k10-slider").bootstrapSlider();$k10("input.k10-slider").on("slideStop",s);h(t);$k10(".tooltip-max").css("margin-left","-28px");$k10(".tooltip-min").css("margin-left","-14.5px")}o();e()}},c=function(){k10.calorieFilter.publish("calorieFilterChanged");f()};return{init:f,model:t,menuHasBeenChanged:c,resetFilter:i}}();k10=k10||{};k10.categoryFilter=function(){var t={$allMenus:"",$categoryFilter:""},i={},n={selectedCategories:[]},s=function(n,t){this.id=n;this.parentId=t},h=function(t){n.selectedCategories=n.selectedCategories.filter(function(n){return n.id!==t.id})},r=function(){var r,u;if(i.log("_updateControls"),n.selectedCategories.length>0)for(r=0;r<n.selectedCategories.length;r++)u=n.selectedCategories[r],$k10('[data-category-id="'+u.id+'"] input').prop("checked",!0);else t.$categoryFilter.each(function(){$k10(this).find(".k10-category-filter__category-chkbox").prop("checked",!1)})},f=function(t){if(i.log("_categoryClicked"),$k10(t.target).is("input")){k10.settings.globalSpinner&&k10.categoryFilter.publish("spinnerStart");var e=$k10(t.target),f=$k10(this).attr("data-category-id").split(";"),u=new s(parseInt(f[0]),parseInt(f[1]));e.prop("checked")?n.selectedCategories.indexOf(u)===-1&&(n.selectedCategories.push(u),r()):(h(u),r());k10.settings.useLocalStorage?window.localStorage.setItem("categoryFilter",JSON.stringify(n)):k10.settings.useSessionStorage&&window.sessionStorage.setItem("categoryFilter",JSON.stringify(n));setTimeout(function(){k10.categoryFilter.publish("categoryFilterChanged")},0)}},u=function(t){i.log("clear category filter");n.selectedCategories=[];r();k10.settings.useLocalStorage?window.localStorage.removeItem("categoryFilter"):k10.settings.useSessionStorage&&window.sessionStorage.removeItem("categoryFilter");t&&(typeof t.stopSpinner=="undefined"||t.stopSpinner===!0)&&k10.categoryFilter.publish("categoryFilterChanged")},e=function(n){var t=$k10(n.target).closest(".k10-category-filter");t.toggleClass("k10-category-filter_open");t.find(".k10-category-filter__name").toggleClass("k10-category-filter__name_opened");t.find(".k10-category-filter__icon").toggleClass("k10-category-filter__icon_opened");t.find(".k10-category-filter__options").toggleClass("k10-category-filter__options_opened");t.hasClass("k10-category-filter_open")&&k10.categoryFilter.publish("openFilter",k10.ui.initScroll)},c=function(){if(!k10.settings.globalSpinner)t.$allMenus.on("click",".k10-toolbar__filters-clear",u);t.$categoryFilter.each(function(){$k10(this).on("click",".k10-category-filter__category-wrapper",f);$k10(this).on("click",".k10-category-filter__panel",e)})},l=function(){k10.settings.globalSpinner||t.$allMenus.off("click",".k10-toolbar__filters-clear",u);t.$categoryFilter.each(function(){$k10(this).off("click",".k10-category-filter__category-wrapper",f);$k10(this).off("click",".k10-category-filter__panel",e)})},o=function(){var n,u;i=k10.tools.Debugger(!0,"category-filter");i.log("init");t.$allMenus=$k10(".k10-menus");t.$categoryFilter=$k10(".k10-category-filter");l();c();n=k10.settings.useLocalStorage?window.localStorage.getItem("categoryFilter"):k10.settings.useSessionStorage?window.sessionStorage.getItem("categoryFilter"):null;n!==null&&typeof n!="undefined"&&(u=JSON.parse(n),k10.categoryFilter.model.selectedCategories=u.selectedCategories,k10.categoryFilter.publish("categoryFilterChanged"));r()},a=function(){i.log("menuHasBeenChanged");k10.categoryFilter.publish("categoryFilterChanged");o()};return{init:o,model:n,menuHasBeenChanged:a,clearFilter:u}}();_createClass=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}();k10=k10||{};k10.foodPrintFilter=function(){var e=k10.tools.Debugger(!0,"food-print-filter"),i=$k10,n=k10.className,u="foodPrintFilterChanged",o="foodPrintFilterToggled",s=function(){function n(){_classCallCheck(this,n);this.storageName="foodPrintFilter";this.storageLocation=k10.settings.useLocalStorage?window.localStorage:k10.settings.useSessionStorage?window.sessionStorage:null}return _createClass(n,[{key:"read",value:function(){var n=this.storageLocation===null?null:this.storageLocation.getItem(""+this.storageName);return n!=null?JSON.parse(n):null}},{key:"write",value:function(n){this.storageLocation!=null&&this.storageLocation.setItem(""+this.storageName,JSON.stringify(n))}},{key:"clear",value:function(){this.storageLocation!=null&&this.storageLocation.removeItem(""+this.storageName)}}]),n}(),h=function(){function r(){_classCallCheck(this,r);this.onPanelClick=this.onPanelClick.bind(this)}return _createClass(r,[{key:"initControls",value:function(){this.$allMenus=i("."+n.menus);this.$panel=i("."+n.foodPrintPanel)}},{key:"bindEvents",value:function(){this.$panel.on("click",this.onPanelClick)}},{key:"unbindEvents",value:function(){this.$panel.off("click",this.onPanelClick)}},{key:"onPanelClick",value:function(r){var u=i(r.target).closest("."+n.foodPrintFilter).length>0;u||(t.toggle(),this.$panel.find("."+n.foodPrintPanelName).toggleClass(n.foodPrintPanelNameOpen),this.$panel.toggleClass(n.foodPrintPanelOpen))}},{key:"closeWithoutNotification",value:function(){this.$panel.find("."+n.foodPrintPanelName).removeClass(n.foodPrintPanelNameOpen);this.$panel.removeClass(n.foodPrintPanelOpen)}}]),r}(),c=function(){function t(){_classCallCheck(this,t);this.selectedGrades=[];this.onGradeClick=this.onGradeClick.bind(this);this.onResetClick=this.onResetClick.bind(this)}return _createClass(t,[{key:"initControls",value:function(){this.$allMenus=i("."+n.menus);this.$filter=i("."+n.foodPrintFilter)}},{key:"bindEvents",value:function(){this.$filter.on("click","."+n.foodPrintGrade,this.onGradeClick);this.$filter.on("click","."+n.foodPrintFilterReset,this.onResetClick)}},{key:"unbindEvents",value:function(){this.$filter.off("click","."+n.foodPrintGrade,this.onGradeClick);this.$filter.off("click","."+n.foodPrintFilterReset,this.onResetClick)}},{key:"onGradeClick",value:function(n){if(i(n.target).is("input")){var r=i(n.target),o=r.closest("label"),t=o.attr("data-fp-grade-name");e.log("onGradeClick: "+t);k10.settings.globalSpinner&&k10.categoryFilter.publish("spinnerStart");r.prop("checked")?this.addGrade(t):this.removeGrade(t);this.updateControls();f.write(this.selectedGrades);setTimeout(function(){return k10.foodPrintFilter.publish(u)},0)}}},{key:"onResetClick",value:function(){this.selectedGrades=[];this.updateControls();f.clear();k10.foodPrintFilter.publish(u)}},{key:"addGrade",value:function(n){this.selectedGrades.indexOf(n)===-1&&this.selectedGrades.push(n)}},{key:"removeGrade",value:function(n){this.selectedGrades=this.selectedGrades.filter(function(t){return t!==n})}},{key:"toggle",value:function(){var t=n.foodPrintFilterOpen,i;this.$filter.toggleClass(t);i=this.$filter.hasClass(t);k10.foodPrintFilter.publish(o,{isOpened:i})}},{key:"closeWithoutNotification",value:function(){this.$filter.removeClass(n.foodPrintFilterOpen)}},{key:"updateControls",value:function(){this.selectedGrades.length>0?this.selectedGrades.map(function(n){i('[data-fp-grade-name="'+n+'"] input').prop("checked",!0)}):this.$filter.find("[data-fp-grade-name] input").prop("checked",!1)}}]),t}(),t=new c,r=new h,f=new s,l=function(){t.initControls();t.unbindEvents();t.bindEvents();r.initControls();r.unbindEvents();r.bindEvents();var n=f.read();n!==null&&(t.selectedGrades=n.selectedGrades,k10.foodPrintFilter.publish(u));t.updateControls()},a=function(){t.initControls();t.unbindEvents();t.bindEvents();t.updateControls();r.initControls();r.unbindEvents();r.bindEvents()},v=function(){t.closeWithoutNotification();r.closeWithoutNotification()};return{init:l,menuHasBeenChanged:a,close:v,getSelectedGrades:function(){return t.selectedGrades}}}();k10=k10||{};k10.sectionFilter=function(){var n={$allMenus:"",$sectionFilter:""},t={selectedSections:[]},o=function(n){this.id=+n},s=function(n){t.selectedSections=t.selectedSections.filter(function(t){return t.id!==n})},i=function(){var i,r;if(_debug.log("_updateControls"),t.selectedSections.length>0)for(i=0;i<t.selectedSections.length;i++)r=t.selectedSections[i],$k10('[data-section-id="'+r.id+'"] input').prop("checked",!0);else k10.settings.sectionFilter==!0&&n.$sectionFilter.find(".k10-section-filter__section-chkbox").prop("checked",!1)},r=function(n){if(_debug.log("_sectionClicked"),$k10(n.target).is("input")){var u=$k10(n.target),r=+$k10(this).attr("data-section-id");u.prop("checked")?t.selectedSections.indexOf(r)===-1&&(t.selectedSections.push(new o(r)),i()):(s(r),i());k10.sectionFilter.publish("sectionFilterChanged")}},u=function(){_debug.log("clear section filter");t.selectedSections=[];i();k10.sectionFilter.publish("sectionFilterChanged")},f=function(){n.$sectionFilter.toggleClass("k10-section-filter_open");n.$sectionFilter.find(".k10-section-filter__name").toggleClass("k10-section-filter__name_opened");n.$sectionFilter.find(".k10-section-filter__icon").toggleClass("k10-section-filter__icon_opened");n.$sectionFilter.find(".k10-section-filter__options").toggleClass("k10-section-filter__options_opened");n.$sectionFilter.hasClass("k10-section-filter_open")&&k10.sectionFilter.publish("openFilter",k10.ui.initScroll)},h=function(){n.$allMenus.on("click",".k10-toolbar__filters-clear",u);if(k10.settings.sectionFilter==!0){n.$sectionFilter.on("click",".k10-section-filter__section-wrapper",r);n.$sectionFilter.on("click",".k10-section-filter__panel",f)}},c=function(){n.$allMenus.off("click",".k10-toolbar__filters-clear",u);k10.settings.sectionFilter==!0&&(n.$sectionFilter.off("click",".k10-section-filter__section-wrapper",r),n.$sectionFilter.off("click",".k10-section-filter__panel",f))},e=function(){_debug=k10.tools.Debugger(!0,"section-filter");_debug.log("init");n.$allMenus=$k10(".k10-menus");n.$sectionFilter=$k10(".k10-section-filter");c();h();i()},l=function(){_debug.log("menuHasBeenChanged");k10.sectionFilter.publish("sectionFilterChanged");e()};return{init:e,model:t,menuHasBeenChanged:l}}();k10=k10||{};k10.search=function(){var t={$allMenus:"",$searchBtn:"",$searchInput:""},i={},n={searchName:"",filterNames:[]},u=function(){var t,r;i.log("_search");t=$k10(this).closest(".k10-toolbar__search, .k10-search-filter__panel").find(".k10-toolbar__search-input, .k10-search-filter__input");t.is("input")&&(k10.settings.globalSpinner&&k10.search.publish("spinnerStart"),r=t.val().trim().replace(/\s/gi,"").replace(/[\"'\[\]\+=\.,;@&\$%~`#\^{}\-!\*\(\)_:\|<>\?\\]/gi,"").toLowerCase(),k10.settings.allowMultipleSearch&&r.length>0?(n.searchName+=(n.searchName.length>0?";":"")+r,n.filterNames.push(t.val().trim())):k10.settings.allowMultipleSearch||(n.searchName=r),k10.settings.useLocalStorage?window.localStorage.setItem("searchFilter",JSON.stringify(n)):k10.settings.useSessionStorage&&window.sessionStorage.setItem("searchFilter",JSON.stringify(n)),setTimeout(function(){k10.search.publish("searchInputChanged")},0))},f=function(t){t.keyCode===13&&(k10.settings.globalSpinner&&k10.search.publish("spinnerStart"),n.searchName=$k10(t.target).val().trim().replace(/\s/gi,"").replace(/[\"'\[\]\+=\.,;@&\$%~`#\^{}\-!\*\(\)_:\|<>\?\\]/gi,"").toLowerCase(),setTimeout(function(){k10.search.publish("searchInputChanged")},0))},r=function(t){i.log("clear search");$k10(".k10-toolbar__search-input, .k10-search-filter__input").val("");n.searchName="";n.filterNames=[];k10.settings.useLocalStorage?window.localStorage.removeItem("searchFilter"):k10.settings.useSessionStorage&&window.sessionStorage.removeItem("searchFilter");t&&(typeof t.stopSpinner=="undefined"||t.stopSpinner===!0)&&k10.search.publish("searchInputChanged")},o=function(){if(!k10.settings.globalSpinner)t.$allMenus.on("click",".k10-toolbar__filters-clear, .k10-search-filter__clear-button",r);t.$searchBtn.on("click",u);t.$searchInput.on("change keydown keypress keyup",f)},s=function(){k10.settings.globalSpinner||t.$allMenus.off("click",".k10-toolbar__filters-clear, .k10-search-filter__clear-button",r);t.$searchBtn.off("click",u);t.$searchInput.off("change keydown keypress keyup",f)},e=function(){var n,r;i=k10.tools.Debugger(!0,"section-filter");i.log("init");t.$allMenus=$k10(".k10-menus");t.$searchBtn=$k10(".k10-toolbar__search-button, .k10-search-filter__button");t.$searchInput=$k10(".k10-toolbar__search-input");s();o();n=k10.settings.useLocalStorage?window.localStorage.getItem("searchFilter"):k10.settings.useSessionStorage?window.sessionStorage.getItem("searchFilter"):null;n!==null&&typeof n!="undefined"&&(r=JSON.parse(n),k10.search.model.filterNames=r.filterNames,k10.search.model.searchName=r.searchName,k10.search.publish("searchInputChanged"))},h=function(){i.log("menuHasBeenChanged");k10.search.publish("searchInputChanged");e()};return{init:e,model:n,menuHasBeenChanged:h,clearFilter:r}}();_createClass=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}();k10=k10||{};k10.mealPlanner=function(){var n,o=function(){function n(){_classCallCheck(this,n);this.isExpanded=!1;this.toggle=this.toggle.bind(this)}return _createClass(n,[{key:"init",value:function(){this.initControls();this.unbindEvents();this.bindEvents()}},{key:"initControls",value:function(){this.$menu=$k10(".k10-menus").first();this.$mealPlanner=this.$menu.find(".k10-meal-planner");this.$addBtn=this.$menu.find(".k10-recipe__add-calories, .k10-recipe-card__add-calories");this.$byoBtns=this.$menu.find(".k10-recipe__add-calories[data-is-byo='true'], .k10-recipe-card__add-calories[data-is-byo='true']")}},{key:"bindEvents",value:function(){this.$mealPlanner.on("click",".k10-meal-planner__button_desktop",this.toggle);this.$mealPlanner.on("click",".k10-meal-planner__clear-all",e);this.$mealPlanner.on("click",".k10-meal-planner__menu-item-remove",f);this.$addBtn.on("click",u)}},{key:"unbindEvents",value:function(){this.$mealPlanner.off("click",".k10-meal-planner__button_desktop",this.toggle);this.$mealPlanner.off("click",".k10-meal-planner__clear-all",e);this.$mealPlanner.off("click",".k10-meal-planner__menu-item-remove",f);this.$addBtn.off("click",u)}},{key:"toggle",value:function(){this.isExpanded?this.collapseMealPlanner():this.expandMealPlanner()}},{key:"expandMealPlanner",value:function(){this.isExpanded=!0;this.$menu.find(".k10-meal-planner__dish-list").removeClass("k10-meal-planner__dish-list_hidden");this.$menu.find(".k10-meal-planner__dish-list-wrapper").removeClass("k10-meal-planner__dish-list-wrapper_hidden");this.$menu.find(".k10-meal-planner__arrow_desktop").addClass("k10-meal-planner__arrow_desktop_toggled");this.$menu.find(".k10-meal-planner__button").addClass("k10-meal-planner__button_toggled")}},{key:"collapseMealPlanner",value:function(){this.isExpanded=!1;this.$menu.find(".k10-meal-planner__dish-list").addClass("k10-meal-planner__dish-list_hidden");this.$menu.find(".k10-meal-planner__dish-list-wrapper").addClass("k10-meal-planner__dish-list-wrapper_hidden");this.$menu.find(".k10-meal-planner__arrow_desktop").removeClass("k10-meal-planner__arrow_desktop_toggled");this.$menu.find(".k10-meal-planner__button").removeClass("k10-meal-planner__button_toggled")}},{key:"onMenuChanged",value:function(){this.isExpanded?this.expandMealPlanner():this.collapseMealPlanner()}}]),n}(),t=new o,i,s=function(n,t){this.id=n;this.name=t;this.items=[]},h=function(n,t){this.id=n;this.recipe=t},c=function(n,t,i,r,u,f,e){this.id=n;this.name=t;this.price=i;this.kCal=r;this.gda=u;this.isByo=f;this.byoDetails=f&&typeof e!="undefined"&&e!==null?$k10.isArray(e.data)?e.data:JSON.parse(e).data:[]},l=function(n,t,i,r,u,f){this.price=n;this.kCal=t;this.gda=i;this.isAllKCal=r;this.isAllGda=u;this.count=f},a=function(n){var t=0;return $k10.each(n,function(i){t+=n[i].items.length}),t},u=function(u){var d=u.target,f=$k10(d),w,e,v;if(t.expandMealPlanner(),w=f.hasClass("k10-recipe__add-calories_hide")||f.hasClass("k10-recipe__add-calories_hidden"),f.hasClass("k10-byo__add-calories")&&w)return!1;e=[];try{e=JSON.parse(window.localStorage.getItem("mealPlanner")||"[]");e==null&&(e=[])}catch(u){n.errorLog("mealPlanner: _addItem","JSON Error: "+u.message);e=[]}if(v=a(e),k10.settings.mealPlannerAllowMultipleEntries===!1&&typeof f.attr("data-is-added")!="undefined"){if(f.attr("data-is-added")==="true")return!1;f.attr("data-is-added")==="false"&&v>=k10.settings.maxMealPlanItems||f.attr("data-is-added","true")}if(v<k10.settings.maxMealPlanItems){var y=0,b=f.attr("data-section-id"),o=f.attr("data-recipe-kcal"),g=o==="-"||o===""||o===0?"-":Math.ceil(parseFloat(o.toString().replace(/,/g,""))*100/i),p=f.attr("data-recipe-price"),nt=new c(f.attr("data-recipe-id"),f.attr("data-recipe-name"),(p==="-"||p===""?0:parseFloat(p.toString().replace(/,/g,""))).toFixed(2),o==="-"||o===""?"-":parseFloat(o.toString().replace(/,/g,"")),g,f.attr("data-is-byo"),f.attr("data-byo-details")),k=new h(v,nt),l=null;$k10.each(e,function(n){e[n].id===b&&(l=e[n],y=n,l.items.push(k))});l===null&&(y=e.length,l=new s(b,f.attr("data-section-name")),l.items.push(k),e.push(l));e[y]=l;r(e);window.localStorage.setItem("mealPlanner",JSON.stringify(e));k10.mealPlanner.publish("mpHasBeenChanged");$k10(".k10-alert-success.k10-alert-free").first().removeClass("k10-alert-free").stop(!0,!0).show().delay(1e3).fadeOut(3e3,function(){$k10(this).addClass("k10-alert-free")})}else $k10("#spanNotificationDanger").stop(!0,!0).show().delay(1e3).fadeOut(3e3)},f=function(t){var s=t.target,i=[];try{i=JSON.parse(window.localStorage.getItem("mealPlanner")||"[]");i==null&&(i=[])}catch(h){n.errorLog("mealPlanner: removeItem","JSON Error: "+h.message);i=[]}var u=parseInt($k10(s).attr("data-index"),10),e=[],o=0,f=-1;$k10.each(i,function(n){$k10.each(i[n].items,function(t){var r=i[n].items[t];r.id===u&&(e=i[n].items,o=t,typeof $k10(".k10-recipe__add-calories").attr("data-is-added")!="undefined"&&$k10(".k10-recipe__add-calories[data-section-id='"+i[n].id+"'][data-recipe-id='"+r.recipe.id+"']").attr("data-is-added","false"),i[n].items.length===1&&(f=n))})});e.splice(o,1);f!==-1&&i.splice(f,1);i.length>0?(u=0,$k10.each(i,function(n){$k10.each(i[n].items,function(t){i[n].items[t].id=u;u++})}),r(i),window.localStorage.setItem("mealPlanner",JSON.stringify(i))):(window.localStorage.removeItem("mealPlanner"),window.localStorage.removeItem("mealPlannerTotal"));k10.mealPlanner.publish("mpHasBeenChanged")},e=function(){var t=[];try{t=JSON.parse(window.localStorage.getItem("mealPlanner")||"[]");t==null&&(t=[])}catch(i){n.errorLog("mealPlanner: removeItem","JSON Error: "+i.message);t=[]}$k10.each(t,function(n){$k10.each(t[n].items,function(i){var r=t[n].items[i];typeof $k10(".k10-recipe__add-calories").attr("data-is-added")!="undefined"&&$k10(".k10-recipe__add-calories[data-section-id='"+t[n].id+"'][data-recipe-id='"+r.recipe.id+"']").attr("data-is-added","false")})});window.localStorage.removeItem("mealPlanner");window.localStorage.removeItem("mealPlannerTotal");k10.mealPlanner.publish("mpHasBeenChanged")},v=function(){var u=[];try{u=JSON.parse(window.localStorage.getItem("mealPlanner")||"[]");u==null&&(u=[])}catch(f){n.errorLog("mealPlanner: changeByoValues","JSON Error: "+f.message);u=[]}u.length>0&&($k10.each(u,function(n){var r=u[n];$k10.each(r.items,function(f){var e=u[n].items[f].recipe;e.isByo===!0&&$k10.each(t.$byoBtns,function(){if($k10(this).attr("data-section-id")===r.id&&$k10(this).attr("data-recipe-id")===e.id&&$k10(this).closest(".k10-hidden-menus").length===0){var n=$k10(this).attr("data-recipe-kcal"),t=$k10(this).attr("data-recipe-price"),u=n==="-"||n===""||n===0?"-":Math.ceil(parseFloat(n.toString().replace(/,/g,""))*100/i);e.kCal=n==="-"||n===""?"-":parseFloat(n.toString().replace(/,/g,""));e.gda=u;e.price=(t==="-"||t===""?0:parseFloat(t.toString().replace(/,/g,""))).toFixed(2);e.byoDetails=$k10(this).attr("data-byo-details")}})})}),r(u),window.localStorage.setItem("mealPlanner",JSON.stringify(u)),k10.mealPlanner.publish("mpHasBeenChanged"))},r=function(n){var t=0,i=0,r=0,u=0,f=!0,e=!0;$k10.each(n,function(o){$k10.each(n[o].items,function(s){var h=n[o].items[s].recipe;t+=parseFloat(h.price);i+=h.kCal==="-"?0:parseFloat(h.kCal.toString().replace(/,/g,""));h.kCal==="-"&&(f=!1);r+=h.gda==="-"?0:parseFloat(h.gda);h.gda==="-"&&(e=!1);u++})});window.localStorage.setItem("mealPlannerTotal",JSON.stringify(new l(t.toFixed(2),i,r,f,e,u)))},y=function(){return i},p=function(){n=k10.tools.Debugger(!0,"mealPlanner");i=2e3;t.init();k10.mealPlanner.publish("mpHasBeenChanged")};return{init:p,changeByoValues:v,getDailyGda:y,menuHasBeenChanged:function(){t.onMenuChanged()}}}();k10=k10||{};k10.basket=function(){var h,n={$allMenus:"",$basket:"",$dishList:"",$addBtn:"",$removeBtn:"",$byoBtns:"",$serviceUnitSelect:"",$timeSlotSelect:"",$submitBtn:""},t={lastServiceUnit:null,lastTimeSlot:null,paymentLink:null},u,i,r=null,w=function(n,t){this.id=n;this.name=t;this.items=[]},b=function(n,t){this.id=n;this.recipe=t},k=function(n,t,i,r,u,f,e,o){this.id=n;this.name=t;this.desc=i;this.price=r;this.kCal=u;this.gda=f;this.isByo=e;this.byoDetails=e&&typeof o!="undefined"&&o!==null?$k10.isArray(o.data)?o.data:JSON.parse(o).data:[];this.menuIdentifier=k10.settings.MenuGuid},d=function(n,t,i,r,u,f){this.price=n;this.kCal=t;this.gda=i;this.isAllKCal=r;this.isAllGda=u;this.count=f},g=function(n,t,i){this.OrganisationIdentifier=k10.settings.OrganisationGuid;this.SiteUrl=window.location.href;this.SiteName=k10.settings.UnitName;this.SiteDescription=k10.settings.UnitCode;this.ServiceUnitIdentifier=$k10(n).attr("data-service-unit-guid");this.ServiceUnitName=$k10(n).text();this.OrderingMode=i;var r=t.text.split(" - ");this.SlotDate=r[0].trim();this.SlotTime=r[1].trim();this.TimeSlotStart=t.timeslotstart;this.TimeSlotEnd=t.timeslotend;this.OrderItems=[]},c=function(n,t,i,r,u,f,e,o){this.ProductIdentifier=n;this.Name=t;this.Description=i;this.Quantity=r;this.Price=u;this.ParentProductIdentifier=f;this.SubItems=e;this.MenuIdentifier=o},nt=function(n){var t=0;return $k10.each(n,function(i){t+=n[i].items.length}),t},l=function(n){var i=n.target,r,h;if($k10(i).hasClass("k10-byo__add-calories")&&$k10(i).hasClass("k10-recipe__add-calories_hide"))return!1;if(r=f(),h=nt(r),typeof $k10(i).attr("data-is-added")!="undefined"){if($k10(i).attr("data-is-added")==="true")return!1;$k10(i).attr("data-is-added")==="false"&&h>=k10.settings.maxMealPlanItems||$k10(i).attr("data-is-added","true")}if(h===0&&t.paymentLink!==null&&(t.paymentLink=null),h<k10.settings.maxMealPlanItems){var c=0,a=$k10(i).attr("data-section-id"),o=$k10(i).attr("data-recipe-kcal"),y=o==="-"||o===""||o===0?"-":Math.ceil(parseFloat(o.toString().replace(/,/g,""))*100/u),l=$k10(i).attr("data-recipe-price"),p=new k($k10(i).attr("data-recipe-id"),$k10(i).attr("data-recipe-name"),$k10(i).attr("data-recipe-desc"),(l==="-"||l===""?0:parseFloat(l.toString().replace(/,/g,""))).toFixed(2),o==="-"||o===""?"-":parseFloat(o.toString().replace(/,/g,"")),y,$k10(i).attr("data-is-byo"),$k10(i).attr("data-byo-details")),v=new b(h,p),s=null;$k10.each(r,function(n){r[n].id===a&&(s=r[n],c=n,s.items.push(v))});s===null&&(c=r.length,s=new w(a,$k10(i).attr("data-section-name")),s.items.push(v),r.push(s));r[c]=s;e(r);window.localStorage.setItem("basket",JSON.stringify(r));setTimeout(function(){k10.basket.publish("basketHasBeenChanged")},500);$k10(".k10-alert-success.k10-alert-free").first().removeClass("k10-alert-free").stop(!0,!0).show().delay(1e3).fadeOut(3e3,function(){$k10(this).addClass("k10-alert-free")})}else $k10("#spanNotificationDanger").stop(!0,!0).show().delay(1e3).fadeOut(3e3)},tt=function(n){var t=f(),i=parseInt($k10(n).attr("data-index"),10),u=[],o=0,r=-1;$k10.each(t,function(n){$k10.each(t[n].items,function(f){var e=t[n].items[f];e.id===i&&(u=t[n].items,o=f,typeof $k10(".k10-recipe__add-calories").attr("data-is-added")!="undefined"&&$k10(".k10-recipe__add-calories[data-section-id='"+t[n].id+"'][data-recipe-id='"+e.recipe.id+"']").attr("data-is-added","false"),t[n].items.length===1&&(r=n))})});u.splice(o,1);r!==-1&&t.splice(r,1);t.length>0?(i=0,$k10.each(t,function(n){$k10.each(t[n].items,function(r){t[n].items[r].id=i;i++})}),e(t),window.localStorage.setItem("basket",JSON.stringify(t))):(window.localStorage.removeItem("basket"),window.localStorage.removeItem("basketTotal"));k10.basket.publish("basketHasBeenChanged")},f=function(){var n=[];try{n=JSON.parse(window.localStorage.getItem("basket")||"[]");n==null&&(n=[])}catch(t){h.errorLog("basket: changeByoValues","JSON Error: "+t.message);n=[]}return n},it=function(){var t=f();t.length>0&&($k10.each(t,function(i){var r=t[i];$k10.each(r.items,function(f){var e=t[i].items[f].recipe;e.isByo===!0&&$k10.each(n.$byoBtns,function(){if($k10(this).attr("data-section-id")===r.id&&$k10(this).attr("data-recipe-id")===e.id&&$k10(this).closest(".k10-hidden-menus").length===0){var n=$k10(this).attr("data-recipe-kcal"),t=$k10(this).attr("data-recipe-price"),i=n==="-"||n===""||n===0?"-":Math.ceil(parseFloat(n.toString().replace(/,/g,""))*100/u);e.kCal=n==="-"||n===""?"-":parseFloat(n.toString().replace(/,/g,""));e.gda=i;e.price=(t==="-"||t===""?0:parseFloat(t.toString().replace(/,/g,""))).toFixed(2);e.byoDetails=$k10(this).attr("data-byo-details")}})})}),e(t),window.localStorage.setItem("basket",JSON.stringify(t)),k10.basket.publish("basketHasBeenChanged"))},e=function(n){var t=0,i=0,r=0,u=0,f=!0,e=!0;$k10.each(n,function(o){$k10.each(n[o].items,function(s){var h=n[o].items[s].recipe;t+=parseFloat(h.price);i+=h.kCal==="-"?0:parseFloat(h.kCal.toString().replace(/,/g,""));h.kCal==="-"&&(f=!1);r+=h.gda==="-"?0:parseFloat(h.gda);h.gda==="-"&&(e=!1);u++})});window.localStorage.setItem("basketTotal",JSON.stringify(new d(t.toFixed(2),i,r,f,e,u)))},o=function(){$k10(".k10-basket__dish-list").toggleClass("k10-basket__dish-list_hidden");$k10(".k10-basket__dish-list-wrapper").toggleClass("k10-basket__dish-list-wrapper_hidden");$k10(".k10-basket__arrow_desktop").toggleClass("k10-basket__arrow_desktop_toggled");$k10(".k10-basket__button").toggleClass("k10-basket__button_toggled")},a=function(t){var r=$k10(t.target).closest(".k10-basket__button_desktop").length,u=$k10(t.target).closest(".k10-basket__dish-list").length,i=$k10(t.target).closest(".k10-basket__menu-item-remove").length,f=$k10(t.target).closest(".k10-recipe__add-calories").length;u||r||i||f||n.$dishList.hasClass("k10-basket__dish-list_hidden")||o();i&&tt(t.target)},rt=function(){n.$basket.on("click",o);n.$allMenus.on("click",a);n.$addBtn.on("click",l)},ut=function(){n.$basket.off("click",o);n.$allMenus.off("click",a);n.$addBtn.off("click",l)},v=function(i,r){var u,f,e;if(n.$submitBtn=$k10(".k10-basket__submit-button"),i.select2("destroy").empty(),r.length){for(i.select2({minimumResultsForSearch:Infinity,templateResult:function(n,t){return n.element&&$k10(n.element).attr("data-time-slot-orders-limit-reached")==="true"&&$k10(t).addClass("k10-basket__select_time-slot_orders-limit-reached"),n.text}}),u=0;u<r.length;u++)f=new Option(r[u].text,r[u].id,!1,!1),f.setAttribute("data-time-slot-orders-limit-reached",r[u].orderslimitreached),i.append(f).trigger("change");t.lastTimeSlot!==null&&(e=$k10.grep(r,function(n){return n.id.toString()===t.lastTimeSlot.toString()}),e.length>0&&i.val(t.lastTimeSlot).trigger("change"));i.closest(".k10-basket__control").removeClass("k10-basket__control_hidden");n.$submitBtn.removeClass("k10-basket__submit-button_disabled")}else i.select2({minimumResultsForSearch:Infinity}),i.closest(".k10-basket__control").addClass("k10-basket__control_hidden"),n.$submitBtn.addClass("k10-basket__submit-button_disabled")},y=function(){var o,f,u,e,s;if(n.$serviceUnitSelect=$k10(".k10-basket__dish-list-container .k10-basket__select_service-unit").select2({minimumResultsForSearch:Infinity}),n.$timeSlotSelect=$k10(".k10-basket__dish-list-container .k10-basket__select_time-slot").select2({minimumResultsForSearch:Infinity}),n.$submitBtn=$k10(".k10-basket__submit-button"),k10.basket.publish("spinnerStop"),r!==null){for(n.$serviceUnitSelect=$k10(".k10-basket__dish-list-container .k10-basket__select_service-unit").select2({minimumResultsForSearch:Infinity}),o=new Option($k10(".k10-basket__dish-list-container .k10-basket__select_service-unit").attr("data-placeholder-text"),-1,!1,!1),n.$serviceUnitSelect.append(o).trigger("change"),f=!1,u=0;u<r.length;u++)f=f===!0||t.lastServiceUnit===r[u].id,e=new Option(r[u].text,r[u].id,!1,!1),e.setAttribute("data-service-unit-guid",r[u].identifier),n.$serviceUnitSelect.append(e).trigger("change");f||(t.lastServiceUnit=null,t.lastTimeSlot=null,n.$submitBtn.addClass("k10-basket__submit-button_disabled"),n.$timeSlotSelect.closest(".k10-basket__control").addClass("k10-basket__control_hidden"))}if(i!==null)n.$serviceUnitSelect.on("select2:select",function(){var u=$k10(this).val(),r=$k10.grep(typeof i.data!="undefined"?i.data:i,function(n){return n.suid===u}),f;t.paymentLink=null;parseInt(u,10)<=0?(t.lastServiceUnit=null,t.lastTimeSlot=null,n.$submitBtn.addClass("k10-basket__submit-button_disabled")):(t.lastServiceUnit=u,f=$k10.grep(r,function(n){return n.orderslimitreached==="false"}),t.lastTimeSlot=f.length>0?f[0].id:r.length>0?r[0].id:null,n.$submitBtn.removeClass("k10-basket__submit-button_disabled"));v(n.$timeSlotSelect,r)});n.$timeSlotSelect.on("select2:select",function(){var n=$k10(this).val();t.lastTimeSlot=n;t.paymentLink=null});t.lastServiceUnit!==null&&(n.$serviceUnitSelect.val(t.lastServiceUnit).trigger("change"),i!==null&&(s=$k10.grep(typeof i.data!="undefined"?i.data:i,function(n){return n.suid.toString()===t.lastServiceUnit.toString()}),v(n.$timeSlotSelect,s)));n.$submitBtn.off("click",p);n.$submitBtn.on("click",p)},p=function(){var u,o;if(t.paymentLink!==null)return s(),!1;if(u=$k10(".k10-basket__dish-list-container .k10-basket__select_service-unit option:selected")[0],o=$k10(".k10-basket").find("[name='DataServiceOrderingMode']").val(),parseInt(u.value,10)<=0||$k10(this).hasClass("k10-basket__submit-button_disabled"))return!1;$k10(".k10-basket__submit-button").removeClass("k10-basket__submit-button_disabled").addClass("k10-basket__submit-button_disabled");var l=$k10(".k10-basket__dish-list-container .k10-basket__select_time-slot option:selected")[0].text,a=$k10.grep(typeof i.data!="undefined"?i.data:i,function(n){return n.text===l}),h=f(),n=new g(u,a[0],o),e=[];$k10.each(h,function(t){var i=h[t];$k10.each(i.items,function(t){var r=i.items[t].recipe,s=$k10.grep(e,function(n){return n.id===r.id}),h,f,u,o;if(s.length<=0){if(h=[],r.isByo)for(f=$k10.isArray(r.byoDetails)?r.byoDetails:JSON.parse(r.byoDetails).data,u=0;u<f.length;u++)for(o=0;o<f[u].items.length;o++)h.push(new c(f[u].items[o].id,f[u].items[o].name,f[u].items[o].desc,1,parseFloat(f[u].items[o].price),f[u].items[o].parentId,[],r.menuIdentifier));e.push({id:r.id,count:1});n.OrderItems.push(new c(r.id,r.name,r.desc,1,parseFloat(r.price),null,h,r.menuIdentifier))}else s[0].count=s[0].count+1})});$k10.each(n.OrderItems,function(t){var i=n.OrderItems[t],r=$k10.grep(e,function(n){return n.id===i.ProductIdentifier});r.length>0&&r[0].count>1&&(i.Quantity=r[0].count,i.Price=i.Price)});k10.basket.publish("spinnerStart");k10.service.putOrder(JSON.stringify(n),function(n){n.status==="success"?(t.paymentLink=n.url,s()):n.status==="timeSlotError"?($k10("#spanNotificationTimeSlotExpired").stop(!0,!0).show().delay(3e3).fadeOut(3e3),$k10(".k10-basket__dish-list-container .k10-basket__select_service-unit").select2("destroy").empty(),$k10(".k10-basket__dish-list-container .k10-basket__select_time-slot").select2("destroy").empty(),r=n.serviceUnits,i=n.timeSlots,y()):n.status==="orderLimitError"&&($k10("#spanNotificationOrderLimitReached").stop(!0,!0).show().delay(3e3).fadeOut(3e3),$k10(".k10-basket__submit-button").removeClass("k10-basket__submit-button_disabled"),k10.basket.publish("spinnerStop"))},function(){$k10(".k10-basket__submit-button").removeClass("k10-basket__submit-button_disabled");k10.basket.publish("spinnerStop")})},s=function(){window.localStorage.removeItem("basket");window.localStorage.removeItem("basketTotal");k10.basket.publish("basketHasBeenChanged")},ft=function(){h=k10.tools.Debugger(!0,"basket");u=2e3;n.$allMenus=$k10(".k10-menus");n.$basket=$k10(".k10-basket__button_desktop");n.$dishList=$k10(".k10-basket__dish-list");n.$addBtn=$k10(".k10-recipe__add-calories, .k10-recipe-card__add-calories");n.$byoBtns=$k10(".k10-recipe__add-calories[data-is-byo='true'], .k10-recipe-card__add-calories[data-is-byo='true']");n.$removeBtn=$k10(".k10-basket__menu-item-remove-btn");try{i=$k10.parseJSON($k10("#k10-time-slots-json").val())}catch(r){i=null}k10.settings.oneServiceUnitId!=-1&&(t.lastServiceUnit=k10.settings.oneServiceUnitId);ut();rt();k10.basket.publish("basketHasBeenChanged")},et=function(){return u};return{init:ft,changeByoValues:it,initSelect2:y,model:t,showPaymentDialog:s,getDailyGda:et}}();k10=k10||{};k10.spinner=function(){var n=function(){$k10(".k10-spinner").show()},t=function(){$k10(".k10-spinner").hide()};return{start:n,stop:t}}();k10=k10||{};k10.templateChanger={setTheme:function(n){var t=n.replace("k10__theme_","");$k10("body").addClass("k10-menus_theme_"+t.replace(/\s/,""))},changeTemplate:function(n,t,i){n=n.toLowerCase().replace(/\s/,"");var r=k10.templateChanger.generateTemplateArray(n),u=n.replace("k10__theme_","").replace(/\s/,"");$k10(".tk-header-ribbon .tk-templates li.tk-current-template").removeClass("");$k10(".tk-header-ribbon .tk-templates li a."+n).parent().addClass("tk-current-template");k10.templateChanger.setHeaderHeight();$k10(".k10-menus").not(".k10-hidden-menus .k10-menus").addClass("k10-menus_theme_"+u);k10.templateChanger.setTheme(n);$k10(".tk-header-ribbon").show();$k10(".tk-header-ribbon .tk-template-changer ul li").mouseover(function(){var n=$k10(this).find("a").attr("data-theme"),u=i=="sample4"?704:1199;if($k10(window).width()>u&&typeof n!="undefined")k10.templateChanger.onMouseOverAndOutHandler(n,r,t)}).mouseout(function(){var n=$k10(this).find("a").attr("data-theme"),f=i=="sample4"?704:1199;if($k10(window).width()>f&&n!="tk-template-info")k10.templateChanger.onMouseOverAndOutHandler(u,r,t)}).on("click",function(n){var f,i,e,o;if(n.preventDefault(),f=$k10(this).find("a"),i=f.attr("class"),i!="tk-template-info"){$k10(".tk-header-ribbon .tk-template-changer ul li.tk-current-template").each(function(){$k10(this).removeClass("tk-current-template")});$k10(this).addClass("tk-current-template");u=f.attr("data-theme").replace(/\s/,"");k10.templateChanger.onMouseOverAndOutHandler(u,r,t);e=$k10(".k10-menu-selector__name").not(".k10-hidden-menus .k10-menu-selector__name");i.indexOf("b")==-1&&e.text().toLowerCase().indexOf("greyscale")!=-1?(o=$k10(".tk-menu-sel-drpdn-menu li.clicked").length,o==0?$k10(".tk-menu-sel-drpdn-menu li").first().find("a").click():$k10(".tk-menu-sel-drpdn-menu li.clicked").find("a").click()):i.indexOf("b")!=-1&&$k10(".tk-menu-sel-drpdn-menu li").each(function(){$k10(this).find("a").text().toLowerCase().indexOf("greyscale")!=-1&&$k10(this).hasClass("clicked")===!1&&($k10(this).addClass("fake-click").find("a").click(),$k10(this).removeClass("fake-click"))})}});$k10(".tk-header-ribbon .tk-sample-drpdn-menu li").mouseover(function(){var u=$k10(this).find("a").attr("class"),r=i==="sample4"?704:1199,n,t;$k10(window).width()>r&&(n=$k10(this).find("a"),$k10("#tkTemplateModalLabel").text(n.text()),k10.templateChanger.setTemplateDescription($k10(this).index()),t=n.attr("class").split(" "),$k10("#tkTemplateModal .tk-modal-body > img").attr("src","/images/sample/"+t[1].replace("k10__theme_","")+".png"))});$k10(".tk-header-ribbon .tk-templates li").mouseover(function(){var n=$k10(this).find("a").not(".tk-template-info").attr("class"),t=i==="sample4"?704:1199;$k10(window).width()>t&&n!==undefined&&$k10("#tkTemplateModal .tk-modal-body > img").attr("src","/images/sample/"+i+n.replace("k10__theme_","")+".png")}).mouseout(function(){var n=$k10(".tk-templates li.tk-current-template a").attr("class"),t=i==="sample4"?704:1199;$k10(window).width()>t&&$k10("#tkTemplateModal .tk-modal-body > img").attr("src","/images/sample/"+i+n.replace("k10__theme_","")+".png")});$k10(".tk-header-ribbon .tk-templates li a.tk-template-info").on("click",function(n){var t,r;n.preventDefault();k10.templateChanger.closeAllOtherModals();t=$k10(".tk-header-ribbon .tk-templates li.tk-current-template a").attr("class");$k10("#tkTemplateModal .tk-modal-body > img").attr("src","/images/sample/"+i+t.replace("k10__theme_","")+".png");$k10("#tkTemplateModalLabel").text($k10($k10(".tk-samples .tk-btn-info .tk-caption")[0]).text());r=$k10(".tk-sample-drpdn-menu li a.tk-current-sample").parent().index();k10.templateChanger.setTemplateDescription(r);$k10("#tkTemplateModal").modal("toggle");$k10(".modal-backdrop").length>0&&$k10(".modal-backdrop").addClass("tk-ribbon-backdrop")});$k10(".tk-header-ribbon .tk-sample-drpdn-menu").mouseenter(function(){$k10(window).width()>1199&&($k10("#tkTemplateModal").modal("show"),$k10(".modal-backdrop").addClass("tk-ribbon-backdrop"))}).mouseleave(function(){$k10(window).width()>1199&&($k10("#tkTemplateModal").modal("hide"),$k10("body").removeClass("modal-open"),$k10(".modal-backdrop").remove())});$k10(".tk-dropdown").on("click",function(){k10.templateChanger.closeAllOtherModals()});$k10(function(){$k10(".tk-menu-sel-drpdn-menu").on("click","li",function(){$k10(this).addClass("clicked");var n=$k10(this).find("span"),i=$k10(".tk-header-ribbon .tk-template-changer ul li.tk-current-template a").attr("class");if(n.text().toLowerCase().indexOf("greyscale")!=-1&&$k10(this).hasClass("fake-click")==!1){k10.templateChanger.onMouseOverAndOutHandler(r[2],r,t);$k10(".tk-header-ribbon .tk-template-changer ul li a."+r[2]).click()}else if(n.text().toLowerCase().indexOf("greyscale")==-1&&typeof i!="undefined"&&i.indexOf("b")!=-1){k10.templateChanger.onMouseOverAndOutHandler(r[0],r,t);$k10(".tk-header-ribbon .tk-template-changer ul li a."+r[0]).click()}$k10(this).removeClass("clicked");setTimeout(function(){typeof mainJs.stackInActiveMenuItems!="undefined"&&(mainJs.stackInActiveMenuItems(),mainJs.sendHeight())},200)})})},changeDieataryIcons:function(n,t){var r,i,u;for(n="/"+n.toLowerCase()+"/",t="/"+t.toLowerCase()+"/",r=$k10("img.k10-recipe__icon_img, img.k10-labels-filter__icon_img"),i=0;i<r.length;i++)u=$k10(r[i]).attr("src"),typeof u!="undefined"&&$k10(r[i]).attr("src",u.replace(t,n));k10.settings.SkinImagePath=k10.settings.SkinImagePath.replace(t,n)},onMouseOverAndOutHandler:function(n,t){var i=$k10(".k10-menus").not(".k10-hidden-menus .k10-menus");$k10.each(t,function(t,r){var e="k10-menus_theme_"+r,o,f,u,s,h;if(i.hasClass(e)&&r!==n){if(i.removeClass(e),i.addClass("k10-menus_theme_"+n),$k10("body").removeClass(e),$k10("body").addClass("k10-menus_theme_"+n),o=$k10("body").find(".tk-html-header-scripts"),o.length>0)for(f=o.find("link[rel=stylesheet]"),u=0;u<f.length;u++)s=$k10(f[u]).attr("href"),s.indexOf("?")!==-1&&(h=s.split("?"),$k10(f[u]).attr("href",h[0].toLowerCase().replace(r.toLowerCase(),n.toLowerCase())+"?"+h[1]));k10.templateChanger.changeDieataryIcons(n,r);return}})},generateTemplateArray:function(){var n=[];return $k10(".k10-menus").first().find(".tk-header-ribbon .tk-template-changer ul li a").each(function(){var t=$k10(this).attr("data-theme");typeof t!="undefined"&&n.push(t.toLowerCase().replace(/\s/,""))}),n},closeAllOtherModals:function(){var n=$k10("#dietary-advice").find("button.close");$k10("#dietary-advice").hasClass("in")&&n.click()},setTemplateDescription:function(n){var t=$k10("input.tkSampleDescription");$k10(".tk-modal-body-description").text($k10(t[n]).val())},setHeaderHeight:function(){var t=$k10(".tk-header-background-image"),n;if(t.length>0){n=new Image;n.src=t.css("background-image").replace(/url\(|\)$|"/ig,"");$k10(n).on("load",function(){t.css("height",n.height+"px")})}}};k10=k10||{};k10.supplier=function(){var t={$allMenus:"",$supplierInput:"",$supplierBtn:"",$supplierBtnBack:""},n={currentSupplier:null,currentRecipe:{id:"",name:"",sectionId:""},mapData:null},i=function(){var t=$k10(this),i=+t.attr("data-supplier-id");if(n.currentRecipe.id=t.attr("data-recipe-id"),n.currentRecipe.name=t.attr("data-recipe-name"),n.currentRecipe.sectionId=t.attr("data-section-id"),n.currentSupplier===null||n.currentSupplier.i!==i)try{k10.service.getSupplier(i).done(function(t){t!==null&&typeof t=="object"&&(n.currentSupplier=t,e(parseFloat(t.lt),parseFloat(t.ln),parseFloat(t.zm)))})}catch(r){return!1}else n.currentSupplier!==null&&k10.supplier.publish("showSupplier")},r=function(){var n=$k10(".k10-supplier"),t=$k10(".k10-recipe-card[data-section-id='"+$k10(this).attr("data-section-id")+"'][data-recipe-id='"+$k10(this).attr("data-recipe-id")+"']");n.length>0&&t.length>0&&($k10(t[0]).removeClass("k10-recipe-card_hidden"),$k10(n[0]).addClass("k10-supplier_hidden"),$k10("html, body").scrollTop(0))},u=function(){t.$supplierBtn.on("click",i);t.$supplierBtnBack.on("click",r)},f=function(){t.$supplierBtn.off("click",i);t.$supplierBtnBack.off("click",r)},e=function(t,i,r){var u=new google.maps.LatLng(t,i),f=(new google.maps.Geocoder).geocode({latLng:u},function(t,i){var s,f,e,o,h,c;if(i==google.maps.GeocoderStatus.OK&&t.length>0)for(s=t[0].address_components,f=0;f<s.length;f++)for(e=s[f],o=0;o<e.types.length;o++)e.types[o]==="country"&&(h=new google.maps.Map(document.getElementById("map"),{zoom:r,center:u,mapTypeId:"satellite",mapTypeControl:!1,streetViewControl:!1}),c=new google.maps.Marker({position:u,map:h}),n.mapData=e,k10.supplier.publish("showSupplier"),setTimeout(function(){google.maps.event.trigger(h,"resize")},1e3))})},o=function(){t.$allMenus=$k10(".k10-menus");t.$supplierBtn=$k10(".k10-recipe-card__read-more");t.$supplierBtnBack=$k10(".k10-supplier__back-to-menu-item");f();u()};return{init:o,model:n}}();tkSocialChecker=function(){function r(){return t}var t=!1,i=document.querySelector(".k10-menus"),n;return i!==null&&(n=i.getAttribute("data-show-social"),n!==null&&n.toLowerCase()==="true"&&(t=!0)),{showSocialMedia:r}}(),function(n,t,i){if(tkSocialChecker.showSocialMedia()){var r,u=n.getElementsByTagName(t)[0];if(n.getElementById(i))return;r=n.createElement(t);r.id=i;r.src="https://connect.facebook.net/en_US/sdk.js";u.parentNode.insertBefore(r,u)}}(document,"script","facebook-jssdk");window.twttr=function(n,t,i){if(tkSocialChecker.showSocialMedia()){var u,f=n.getElementsByTagName(t)[0],r=window.twttr||{};return n.getElementById(i)?r:(u=n.createElement(t),u.id=i,u.src="https://platform.twitter.com/widgets.js",f.parentNode.insertBefore(u,f),r._e=[],r.ready=function(n){r._e.push(n)},r)}}(document,"script","twitter-wjs"),function(n,t,i){if(tkSocialChecker.showSocialMedia()){var r,u=n.getElementsByTagName(t)[0];if(n.getElementById(i))return;r=n.createElement(t);r.id=i;r.async=!0;r.src="https://assets.pinterest.com/js/pinit.js";u.parentNode.insertBefore(r,u)}}(document,"script","pinterest-jssdk");k10=k10||{};k10.socialMedia=function(){var n={$fbShareCounter:"",$twitterShareCounter:"",$pinterestShareCounter:"",$socialMedia:"",$pinterestLink:"",$twitterLink:"",firstPageLoad:!0,$menu:"",$menus:"",menuGuid:"",menuName:"",desc:"",image:"",url:""},i={},t={network:{facebook:1,twitter:2,pinterest:3},type:{share:1,like:2},action:{add:1,remove:2}},u=function(){var t,r;n.$menu=$k10(".k10-menus").first();n.menuGuid=n.$menu.attr("data-menu-identifier");n.$menus=$k10(".k10-menus[data-menu-identifier="+n.menuGuid+"]");n.$socialMedia=n.$menu.find(".social-media").first();n.menuName=n.$socialMedia.attr("data-tag-title");n.desc=n.$socialMedia.attr("data-tag-description");n.image=n.$socialMedia.attr("data-tag-image");t=location.protocol+"//"+location.host;location.host=="localhost:1718"&&(t="http://devl.tkmenus.com");location.host=="localhost:3568"&&(t="https://devl.tksiteinfo.com");r=decodeURIComponent(l("htmlUrl"));n.url=t+location.pathname+"?"+(r?"htmlUrl="+encodeURIComponent(r+"?mguid="+n.menuGuid)+"&":"")+"mguid="+n.menuGuid;$k10('meta[name="twitter:url"]').attr("content",n.url);$k10('meta[property="og:url"]').attr("content",n.url);n.$fbShareCounter=$k10(n.$menus).find(".social-media__share-counter_fb");n.$twitterShareCounter=$k10(n.$menus).find(" .social-media__share-counter_twitter");n.$pinterestShareCounter=$k10(n.$menus).find(" .social-media__share-counter_pinterest");n.$twitterLink=n.$socialMedia.find("a.social-media__link_twitter");n.$pinterestLink=n.$socialMedia.find("a.social-media__link_pinterest");i.log("setVariables:"+n.url)},l=function(n){for(var u=decodeURIComponent(window.location.search.substring(1)),r=u.split("&"),t,i=0;i<r.length;i++)if(t=r[i].split("="),t[0]===n)return t[1]===undefined?!0:t[1]},r=function(t){var r={url:{orgGuid:k10.settings.OrganisationGuid,menuGuid:n.menuGuid},callbacks:{success:function(){zoomenuTools.ConsoleLog("Ajax call Succeed!")},error:function(){zoomenuTools.ConsoleLog("Ajax call Failed!")}}},u={network:t.network,type:t.type,action:t.action};k10.service.updateShare(r,JSON.stringify(u));i.log("send database")},f=function(){var u=location.host;u=="localhost:1718"&&(u="devl.tkmenus.com");i.log("share fb url:"+n.url);FB.ui({method:"share",href:n.url},function(i){var f,u;if(typeof i!="undefined")for(f={network:t.network.facebook,type:t.type.share,action:t.action.add},r(f),u=0;u<n.$fbShareCounter.length;u++)$k10(n.$fbShareCounter[u]).text(parseInt($k10(n.$fbShareCounter[u]).text(),10)+1)})},e=function(){var f="https://twitter.com/intent/tweet",e,u;for(f+="?text="+encodeURIComponent(n.menuName),f+="&url="+encodeURIComponent(n.url),i.log("share tw url:"+n.url),n.$twitterLink.attr("href",f),i.log("share tw href:"+f),e={network:t.network.twitter,type:t.type.share,action:t.action.add},r(e),u=0;u<n.$twitterShareCounter.length;u++)$k10(n.$twitterShareCounter[u]).text(parseInt($k10(n.$twitterShareCounter[u]).text(),10)+1)},b=function(i){var u,r,f;return i.preventDefault(),u=n.image,r="https://www.pinterest.com/pin/create/button/",r+="?url=https://menus.tenkites.com/sample1?mguid="+n.menuGuid,r+="&description="+encodeURIComponent(n.menuName),r+="&media="+u,window.open(r,"targetWindow","toolbar=no, location=yes, status=no, menubar=no, scrollbars=yes, resizable=yes, width=600, height=250"),f={network:t.network.pinterest,type:t.type.share,action:t.action.add},n.$pinterestShareCounter.text(parseInt(n.$pinterestShareCounter.text(),10)+1),!1},o=function(n){var u={network:t.network.facebook,type:t.type.like,action:t.action.add};i.log("like fb url:"+n);r(u)},s=function(n){var u={network:t.network.facebook,type:t.type.like,action:t.action.remove};i.log("dislike fb url:"+n);r(u)},a=function(){$k10(".fb-like").attr("data-href",n.url);var t=n.$menu.find(".social-media__net_fb-like");FB.XFBML.parse(t[0]);i.log("update like fb url:"+n.url)},h=function(){n.$menu.on("click",".social-media__net_fb",f);n.$menu.on("click",".social-media a.social-media__link_twitter",e);FB.Event.subscribe("edge.create",o);FB.Event.subscribe("edge.remove",s)},v=function(){n.$menu.off("click",".social-media__net_fb",f);n.$menu.off("click",".social-media a.social-media__link_twitter",e);FB.Event.unsubscribe("edge.create",o);FB.Event.unsubscribe("edge.remove",s)},y=function(){i=k10.tools.Debugger(!0,"socialMedia");$k10(window).bind("load",function(){n.$socialMedia==""&&(c(),i.log("load socialMedia"))});setTimeout(function(){n.$socialMedia==""&&(c(),i.log("init socialMedia"))},1200)},c=function(){typeof FB!="undefined"&&FB!=null&&(window.fbAsyncInit(),u(),h(),n.$socialMedia.show())},p=function(){setTimeout(function(){typeof FB!="undefined"&&FB!=null&&(window.fbAsyncInit(),u(),v(),a(),h(),n.$socialMedia.show(),i.log("update socialMedia"))},100)};return{init:y,update:p}}();k10=k10||{};k10.partner=function(){function e(){function t(){var n="window.k10Partners.localStorageTest",t;try{return window.localStorage.setItem(n,n),t=window.localStorage.getItem(n)===n,window.localStorage.removeItem(n),t&&window.localStorage}catch(i){c.error(i)}}var n="k10-partners-"+l.PartnerGuid;this.getItem=function(){var i=t(),r;return i?(r=i.getItem(n),JSON.parse(r)):null};this.setItem=function(i){var r=t(),u=JSON.stringify(i);r&&r.setItem(n,u)}}function o(){function r(){var n=t.getItem(),r=n.backUrl,f=n.labels.join(),e=n.showMayContain,o=n.cuisine,s=n.location.locationId,h=n.location.optionIds.join(),u="lbl="+f+"&may="+e+"&cus="+o+"&loc="+s+"&op="+h,c=r.indexOf("?")>-1?r+"&"+u:r+"?"+u;i.attr("href",c)}var i=n(".k10-back");i.on("click",r);this.show=function(n){if(n!==null){var t=i.find(".k10-back__text"),r=t.data("text")+" "+n.backText;i.removeClass("k10-back_hidden");i.find(".k10-back__text").text(r);i.attr("href",n.backUrl)}}}function s(){function t(){n(".k10-all-courses").addClass("k10-all-courses_hidden");n(".k10-missing-label").removeClass("k10-missing-label_hidden")}var i=n(".k10-labels-filter__label-wrapper").length?"k10-labels-filter__label-wrapper":"k10-labels-filter2__label-wrapper";this.select=function(r){r!==null&&n.isArray(r.labels)&&r.labels.forEach(function(r){var u=n("."+i+'[data-label-code="'+r+'"]');u.length?u.find("input").click():t()});this.restoreMayFromStorage(r)};this.restoreMayFromStorage=function(n){n!==null&&n.showMayContain===!0&&$k10(".k10-toggle__input-main").click()};this.checkCodes=function(r){if(r===null){t();return}try{r=JSON.parse(r)}catch(s){t()}if(!n.isArray(r)){t();return}var f=n(".k10-menus").first().find("."+i).length,e=r.length,o=f!==e,u=!1;if(o){t();return}r.forEach(function(t){var r=n("."+i+'[data-label-code="'+t+'"]');u=r.length===0?!0:u});u&&t()}}function h(){var t=n(".k10-partner"),i=t.find(".k10-toolbar__partner-name");this.showName=function(n){n!==""&&typeof n!="undefined"&&i.length&&i.text(n)};this.hideIfEmpty=function(){t.length&&t.text().trim()===""&&t.addClass("k10-partner_hidden")}}function v(){function c(){var n=window.location.search,t=n.slice(n.indexOf("?")+1).split("&");return t.reduce(function(n,t){var i=t.indexOf("="),r;if(i<0)return r={},r[t]=null,Object.assign(n,r);var f=t.slice(0,i),e=t.slice(i+1),u={};return u[f]=decodeURIComponent(e),Object.assign(n,u)},{})}function l(n,t){var i,r;return t.hasOwnProperty("lbl")&&(i=t.lbl.split(",").map(function(n){return n.trim()}).filter(function(n){return n!==""}),Object.assign(n,{labels:i})),t.hasOwnProperty("may")&&Object.assign(n,{showMayContain:t.may==="true"}),t.hasOwnProperty("cus")&&Object.assign(n,{cuisine:isNaN(t.cus)?null:parseInt(t.cus,10)}),t.hasOwnProperty("loc")&&(Object.assign(n,{location:{locationId:isNaN(t.loc)?null:parseInt(t.loc,10)}}),t.hasOwnProperty("op")&&(r=t.op===""?[]:t.op.split(",").filter(function(n){return!isNaN(n)}).map(function(n){return parseInt(n,10)}),Object.assign(n.location,{optionIds:r}))),t.hasOwnProperty("name")&&Object.assign(n,{backText:t.name}),t.hasOwnProperty("back")&&Object.assign(n,{backUrl:t.back}),Object.keys(n).length===0&&n.constructor===Object?null:n}var e=$k10(".k10-partner"),o=e.data("name"),s=e.attr("data-partner-host-labels"),h=c(),n=l({},h);i=n!==null&&n.hasOwnProperty("backUrl");u.showName(o);u.hideIfEmpty();i&&(a.show(n),r.select(n),r.checkCodes(s),t.setItem(n),f=!1)}function y(){if(!f&&i){var r=k10.labelFilter.model.selectedLabels,u=!$k10(".k10-toggle__input-main").prop("checked"),n=t.getItem();n.labels=r.map(function(n){return n.code});n.showMayContain=u;t.setItem(n)}}Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(n){"use strict";var f,i,t,e,r,s,u,o;if(n===undefined||n===null)throw new TypeError("Cannot convert first argument to object");for(f=Object(n),i=1;i<arguments.length;i++)if(t=arguments[i],t!==undefined&&t!==null)for(t=Object(t),e=Object.keys(Object(t)),r=0,s=e.length;r<s;r++)u=e[r],o=Object.getOwnPropertyDescriptor(t,u),o!==undefined&&o.enumerable&&(f[u]=t[u]);return f}});var c=k10.tools.Debugger(!0,"partner"),n=$k10,l=k10.settings,t=new e,a=new o,r=new s,u=new h,f=!0,i=!1;return{onDomReady:v,onFilterChanged:y}}();k10=k10||{};k10.statusArea=function(){var t={$allMenus:"",$searchTags:"",$counter:"",$categoryFilter:"",$labelFilter2:""},r={},n={selectedFilters:[]},e=function(){s();o()},o=function(){var u=$k10(".k10-recipe:not(.k10-recipe_hidden)").length,r,i;if(u===0?$k10(".k10-recipe__no-items").removeClass("k10-recipe__no-items_hidden"):$k10(".k10-recipe__no-items").addClass("k10-recipe__no-items_hidden"),n.selectedFilters.length>0){for(t.$searchTags.find(".k10-toolbar__search-tag:not(.k10-toolbar__search-tag_clear)").remove(),r="",i=0;i<n.selectedFilters.length;i++)r+="<div class='k10-toolbar__search-tag' data-id='"+i+"'><span class='k10-toolbar__search-tag-value'>"+n.selectedFilters[i].name+"<\/span><span class='k10-toolbar__search-tag-remove'>×<\/span><\/div>";t.$searchTags.prepend(r);t.$searchTags.find(".k10-toolbar__search-tag_clear").removeClass("k10-toolbar__search-tag_hidden")}else t.$searchTags.find(".k10-toolbar__search-tag:not(.k10-toolbar__search-tag_clear)").remove(),t.$searchTags.find(".k10-toolbar__search-tag_clear").addClass("k10-toolbar__search-tag_hidden");c();h()},s=function(){var t,e,r;if(k10.settings.showSearch)if(t=$k10(".k10-search-filter__input").val(),k10.search.model.searchName.length>0)if(e=k10.search.model.searchName.split(";"),t.trim().length===0)for(r=0;r<k10.search.model.filterNames.length;r++)u(e,k10.search.model.filterNames[r]);else u(e,t);else n.selectedFilters=n.selectedFilters.filter(function(n){return n.type!=="search"});if(k10.settings.showCategoryFilter&&$k10(".k10-category-filter__category-chkbox").each(function(){var n=$k10(this).closest(".k10-category-filter__category-wrapper").attr("data-category-name");i($k10(this),n,"category",!0)}),k10.settings.showLabelFilter&&$k10(".k10-labels-filter2__label-chkbox").each(function(){var n=$k10(this).closest(".k10-labels-filter2__label-wrapper").attr("data-label-name");i($k10(this),n,"label",!0)}),k10.settings.showCalorieFilter&&$k10(".k10-calorie-filter__slider .slider").length>0){var t="between {0} and {1} cal",s=$k10(".k10-slider").attr("data-slider-min"),h=$k10(".k10-slider").attr("data-slider-max"),f=$k10(".k10-slider").val().split(","),o=-1,c=n.selectedFilters.filter(function(n,t){if(n.name.indexOf("between")!==-1)return o=t,t});o!==-1&&n.selectedFilters.splice(o,1);f[0]===s&&f[1]===h||n.selectedFilters.push({name:t.replace("{0}",f[0]).replace("{1}",f[1]),type:"calorie"})}},u=function(n,t){var r=-1,u=n.filter(function(n,i){if(n===t.trim().replace(/\s/gi,"").replace(/[\"'\[\]\+=\.,;@&\$%~`#\^{}\-!\*\(\)_:\|<>\?\\]/gi,"").toLowerCase())return r=i,i});n.length>0&&r!==-1&&i($k10(this),t,"search",!1)},i=function(t,i,r,u){if(i!==""){var f=-1,e=n.selectedFilters.filter(function(n,t){if(n.name===i)return f=t,t});u?t.prop("checked")?f===-1&&n.selectedFilters.push({name:i,type:r}):f!==-1&&n.selectedFilters.splice(f,1):f===-1&&n.selectedFilters.push({name:i,type:r})}},f=function(){var u,t,f,e;if(k10.settings.globalSpinner&&k10.categoryFilter.publish("spinnerStart"),u=parseInt($k10(this).attr("data-id"),10),t=n.selectedFilters[u],t.type==="search"&&k10.settings.showSearch){var i=k10.search.model.searchName.split(";"),r=-1,o=i.filter(function(n,i){if(n===t.name.trim().replace(/\s/gi,"").replace(/[\"'\[\]\+=\.,;@&\$%~`#\^{}\-!\*\(\)_:\|<>\?\\]/gi,"").toLowerCase())return r=i,i});r!==-1&&(n.selectedFilters.splice(u,1),i.splice(r,1),k10.search.model.filterNames.splice(r,1),k10.search.model.searchName=i.length==0?"":i.join(";"));k10.settings.useLocalStorage?window.localStorage.setItem("searchFilter",JSON.stringify(k10.search.model)):k10.settings.useSessionStorage&&window.sessionStorage.setItem("searchFilter",JSON.stringify(k10.search.model));setTimeout(function(){k10.statusArea.publish("searchInputChanged")},0)}t.type==="category"&&k10.settings.showCategoryFilter&&(f=$k10(".k10-category-filter__category-wrapper[data-category-name='"+t.name+"']"),k10.categoryFilter.model.selectedCategories=k10.categoryFilter.model.selectedCategories.filter(function(n){return n.id!==parseInt(f.attr("data-category-id"))}),f.find(".k10-category-filter__category-chkbox").prop("checked",!1),k10.settings.useLocalStorage?window.localStorage.setItem("categoryFilter",JSON.stringify(k10.categoryFilter.model)):k10.settings.useSessionStorage&&window.sessionStorage.setItem("categoryFilter",JSON.stringify(k10.categoryFilter.model)),setTimeout(function(){k10.statusArea.publish("categoryFilterChanged")},0));t.type==="label"&&k10.settings.showLabelFilter&&(e=$k10(".k10-labels-filter2__label-wrapper[data-label-name='"+t.name+"']"),k10.labelFilter.model.selectedLabels=k10.labelFilter.model.selectedLabels.filter(function(n){return n.id!==parseInt(e.attr("data-label-id"))}),e.find(".k10-labels-filter2__label-chkbox").prop("checked",!1),k10.settings.useLocalStorage?window.localStorage.setItem("labelFilter",JSON.stringify(k10.labelFilter.model)):k10.settings.useSessionStorage&&window.sessionStorage.setItem("labelFilter",JSON.stringify(k10.labelFilter.model)),setTimeout(function(){k10.statusArea.publish("labelsFilterChanged")},0));t.type==="calorie"&&k10.settings.showCalorieFilter&&setTimeout(function(){k10.statusArea.publish("calorieFilterReset",{stopSpinner:!0})},0)},h=function(){$k10(".k10-toolbar__search-tag:not(.k10-toolbar__search-tag_clear)").on("click",f)},c=function(){$k10(".k10-toolbar__search-tag:not(.k10-toolbar__search-tag_clear)").off("click",f)},l=function(){r=k10.tools.Debugger(!0,"status-area");r.log("init");t.$allMenus=$k10(".k10-menus");t.$searchTags=$k10(".k10-toolbar__search-tags")};return{init:l,update:e,model:n}}();